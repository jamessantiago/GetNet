!function(){function gi(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function ar(n){return n===null?NaN:+n}function si(n){return!isNaN(n)}function pl(n){return{left:function(t,i,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);r<u;){var f=r+u>>>1;n(t[f],i)<0?r=f+1:u=f}return r},right:function(t,i,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);r<u;){var f=r+u>>>1;n(t[f],i)>0?u=f:r=f+1}return r}}}function ck(n){return n.length}function lk(n){for(var t=1;n*t%1;)t*=10;return t}function wl(n,t){for(var i in t)Object.defineProperty(n.prototype,i,{value:t[i],enumerable:!1})}function at(){this._=Object.create(null)}function vr(n){return(n+="")===bl||n[0]===bu?bu+n:n}function ku(n){return(n+="")[0]===bu?n.slice(1):n}function kl(n){return vr(n)in this._}function dl(n){return(n=vr(n))in this._&&delete this._[n]}function gl(){var n=[];for(var t in this._)n.push(ku(t));return n}function na(){var n=0;for(var t in this._)++n;return n}function ta(){for(var n in this._)return!1;return!0}function eo(){this._=Object.create(null)}function ak(n,t,i){return function(){var r=i.apply(t,arguments);return r===t?n:r}}function oo(n,t){var i,u,r;if(t in n)return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),i=0,u=so.length;i<u;++i)if(r=so[i]+t,r in n)return r}function l(){}function ho(){}function ia(n){function r(){for(var i=t,r=-1,f=i.length,u;++r<f;)(u=i[r].on)&&u.apply(this,arguments);return n}var t=[],i=new at;return r.on=function(r,u){var f=i.get(r),e;return arguments.length<2?f&&f.on:(f&&(f.on=null,t=t.slice(0,e=t.indexOf(f)).concat(t.slice(e+1)),i.remove(r)),u&&t.push(i.set(r,{on:u})),n)},r}function gt(){n.event.preventDefault()}function co(){for(var t=n.event,i;i=t.sourceEvent;)t=i;return t}function lo(t){for(var i=new ho,r=0,u=arguments.length;++r<u;)i[arguments[r]]=ia(i);return i.of=function(r,u){return function(f){try{var e=f.sourceEvent=n.event;f.target=t;n.event=f;i[f.type].apply(r,u)}finally{n.event=e}}},i}function ni(n){return yr(n,e),n}function yo(n){return typeof n=="function"?n:function(){return ao(n,this)}}function fa(n){return typeof n=="function"?n:function(){return vo(n,this)}}function ea(t,i){function r(){this.removeAttribute(t)}function u(){this.removeAttributeNS(t.space,t.local)}function f(){this.setAttribute(t,i)}function e(){this.setAttributeNS(t.space,t.local,i)}function o(){var n=i.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=i.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=n.ns.qualify(t),i==null?t.local?u:r:typeof i=="function"?t.local?s:o:t.local?e:f}function oa(n){return n.trim().replace(/\s+/g," ")}function sa(t){return new RegExp("(?:^|\\s+)"+n.requote(t)+"(?:\\s+|$)","g")}function ha(n){return(n+"").trim().split(/^|\s+/)}function ca(n,t){function r(){for(var r=-1;++r<i;)n[r](this,t)}function u(){for(var r=-1,u=t.apply(this,arguments);++r<i;)n[r](this,u)}n=ha(n).map(yk);var i=n.length;return typeof t=="function"?u:r}function yk(n){var t=sa(n);return function(i,r){if(u=i.classList)return r?u.add(n):u.remove(n);var u=i.getAttribute("class")||"";r?(t.lastIndex=0,t.test(u)||i.setAttribute("class",oa(u+" "+n))):i.setAttribute("class",oa(u.replace(t," ")))}}function la(n,t,i){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,i)}function f(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,i)}return t==null?r:typeof t=="function"?f:u}function aa(n,t){function i(){delete this[n]}function r(){this[n]=t}function u(){var i=t.apply(this,arguments);i==null?delete this[n]:this[n]=i}return t==null?i:typeof t=="function"?u:r}function va(t){return typeof t=="function"?t:(t=n.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function pk(){var n=this.parentNode;n&&n.removeChild(this)}function po(n){return{__data__:n}}function ya(n){return function(){return ua(this,n)}}function wk(n){return arguments.length||(n=gi),function(t,i){return t&&i?n(t.__data__,i.__data__):!t-!i}}function vt(n,t){for(var i=0,u=n.length;i<u;i++)for(var f=n[i],r=0,o=f.length,e;r<o;r++)(e=f[r])&&t(e,r,i);return n}function pa(n){return yr(n,et),n}function bk(n){var t,i;return function(r,u,f){var e=n[f].update,s=e.length,o;for(f!=i&&(i=f,t=0),u>=t&&(t=u+1);!(o=e[t])&&++t<s;);return o}}function wo(n){var t=n.__transition__;t&&++t.active}function wa(t,i,r){function s(){var n=this[u];n&&(this.removeEventListener(t,n,n.$),delete this[u])}function h(){var n=o(i,dt(arguments));s.call(this);this.addEventListener(t,this[u]=n,n.$=r);n._=i}function c(){var f=new RegExp("^__on([^.]+)"+n.requote(t)+"$"),u,i,r;for(i in this)(u=i.match(f))&&(r=this[i],this.removeEventListener(u[1],r,r.$),delete this[i])}var u="__on"+t,f=t.indexOf("."),o=ba,e;return f>0&&(t=t.slice(0,f)),e=gu.get(t),e&&(t=e,o=kk),f?i?h:s:i?l:c}function ba(t,i){return function(r){var u=n.event;n.event=r;i[0]=this.__data__;try{t.apply(this,i)}finally{n.event=u}}}function kk(n,t){var i=ba(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||r.compareDocumentPosition(t)&8)||i.call(t,n)}}function nf(){var t=".dragsuppress-"+ ++ka,u="click"+t,r=n.select(p).on("touchmove"+t,gt).on("dragstart"+t,gt).on("selectstart"+t,gt),i,f;return nr&&(i=lt.style,f=i[nr],i[nr]="none"),function(n){r.on(t,null);if(nr&&(i[nr]=f),n){var e=function(){r.on(u,null)};r.on(u,function(){gt();e()},!0);setTimeout(e,0)}}}function ko(t,i){var u,r,f,e;return(i.changedTouches&&(i=i.changedTouches[0]),u=t.ownerSVGElement||t,u.createSVGPoint)?(r=u.createSVGPoint(),tf<0&&(p.scrollX||p.scrollY)&&(u=n.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),f=u[0][0].getScreenCTM(),tf=!(f.f||f.e),u.remove()),tf?(r.x=i.pageX,r.y=i.pageY):(r.x=i.clientX,r.y=i.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]):(e=t.getBoundingClientRect(),[i.clientX-e.left-t.clientLeft,i.clientY-e.top-t.clientTop])}function dk(){return n.event.changedTouches[0].identifier}function gk(){return n.event.target}function nd(){return p}function da(n){return n>0?1:n<0?-1:0}function ns(n,t,i){return(t[0]-n[0])*(i[1]-n[1])-(t[1]-n[1])*(i[0]-n[0])}function ga(n){return n>1?0:n<-1?f:Math.acos(n)}function ti(n){return n>1?h:n<-1?-h:Math.asin(n)}function id(n){return((n=Math.exp(n))-1/n)/2}function nv(n){return((n=Math.exp(n))+1/n)/2}function rd(n){return((n=Math.exp(2*n))-1)/(n+1)}function tv(n){return(n=Math.sin(n/2))*n}function hi(){}function ot(n,t,i){return this instanceof ot?void(this.h=+n,this.s=+t,this.l=+i):arguments.length<2?n instanceof ot?new ot(n.h,n.s,n.l):cv(""+n,lv,ot):new ot(n,t,i)}function rs(n,t,i){function e(n){return(n>360?n-=360:n<0&&(n+=360),n<60)?r+(u-r)*n/60:n<180?u:n<240?r+(u-r)*(240-n)/60:r}function f(n){return Math.round(e(n)*255)}var r,u;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:t<0?0:t>1?1:t,i=i<0?0:i>1?1:i,u=i<=.5?i*(1+t):i+t-i*t,r=2*i-u,new b(f(n+120),f(n),f(n-120))}function ut(t,i,r){return this instanceof ut?void(this.h=+t,this.c=+i,this.l=+r):arguments.length<2?t instanceof ut?new ut(t.h,t.c,t.l):t instanceof ft?sv(t.l,t.a,t.b):sv((t=av((t=n.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ut(t,i,r)}function us(n,t,i){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new ft(i,Math.cos(n*=u)*t,Math.sin(n)*t)}function ft(n,t,i){return this instanceof ft?void(this.l=+n,this.a=+t,this.b=+i):arguments.length<2?n instanceof ft?new ft(n.l,n.a,n.b):n instanceof ut?us(n.h,n.c,n.l):av((n=b(n)).r,n.g,n.b):new ft(n,t,i)}function ov(n,t,i){var r=(n+16)/116,u=r+t/500,f=r-i/200;return u=es(u)*uv,r=es(r)*fv,f=es(f)*ev,new b(ss(3.2404542*u-1.5371385*r-.4985314*f),ss(-.969266*u+1.8760108*r+.041556*f),ss(.0556434*u-.2040259*r+1.0572252*f))}function sv(n,t,i){return n>0?new ut(Math.atan2(i,t)*s,Math.sqrt(t*t+i*i),n):new ut(NaN,NaN,n)}function es(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function os(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function ss(n){return Math.round(255*(n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function b(n,t,i){return this instanceof b?void(this.r=~~n,this.g=~~t,this.b=~~i):arguments.length<2?n instanceof b?new b(n.r,n.g,n.b):cv(""+n,b,rs):new b(n,t,i)}function hv(n){return new b(n>>16,n>>8&255,n&255)}function sf(n){return hv(n)+""}function tr(n){return n<16?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function cv(n,t,i){var f=0,e=0,o=0,s,u,r;if(s=/([a-z]+)\((.*)\)/i.exec(n),s){u=s[2].split(",");switch(s[1]){case"hsl":return i(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(cs(u[0]),cs(u[1]),cs(u[2]))}}return(r=wr.get(n))?t(r.r,r.g,r.b):(n==null||n.charAt(0)!=="#"||isNaN(r=parseInt(n.slice(1),16))||(n.length===4?(f=(r&3840)>>4,f=f>>4|f,e=r&240,e=e>>4|e,o=r&15,o=o<<4|o):n.length===7&&(f=(r&16711680)>>16,e=(r&65280)>>8,o=r&255)),t(f,e,o))}function lv(n,t,i){var f=Math.min(n/=255,t/=255,i/=255),r=Math.max(n,t,i),u=r-f,e,s,o=(r+f)/2;return u?(s=o<.5?u/(r+f):u/(2-r-f),e=(n==r?(t-i)/u+(t<i?6:0):t==r?(i-n)/u+2:(n-t)/u+4)*60):(e=NaN,s=o>0&&o<1?0:e),new ot(e,s,o)}function av(n,t,i){n=hs(n);t=hs(t);i=hs(i);var u=os((.4124564*n+.3575761*t+.1804375*i)/uv),r=os((.2126729*n+.7151522*t+.072175*i)/fv),f=os((.0193339*n+.119192*t+.9503041*i)/ev);return ft(116*r-16,500*(u-r),200*(r-f))}function hs(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function cs(n){var t=parseFloat(n);return n.charAt(n.length-1)==="%"?Math.round(t*2.55):t}function o(n){return typeof n=="function"?n:function(){return n}}function v(n){return n}function ls(n){return function(t,i,r){return arguments.length===2&&typeof i=="function"&&(r=i,i=null),hf(t,i,n,r)}}function hf(t,i,r,u){function c(){var n=e.status,t;if(!n&&fd(e)||n>=200&&n<300||n===304){try{t=r.call(f,e)}catch(i){s.error.call(f,i);return}s.load.call(f,t)}else s.error.call(f,e)}var f={},s=n.dispatch("beforesend","progress","load","error"),o={},e=new XMLHttpRequest,h=null;return!p.XDomainRequest||"withCredentials"in e||!/^(http(s)?:)?\/\//.test(t)||(e=new XDomainRequest),"onload"in e?e.onload=e.onerror=c:e.onreadystatechange=function(){e.readyState>3&&c()},e.onprogress=function(t){var i=n.event;n.event=t;try{s.progress.call(f,e)}finally{n.event=i}},f.header=function(n,t){return(n=(n+"").toLowerCase(),arguments.length<2)?o[n]:(t==null?delete o[n]:o[n]=t+"",f)},f.mimeType=function(n){return arguments.length?(i=n==null?null:n+"",f):i},f.responseType=function(n){return arguments.length?(h=n,f):h},f.response=function(n){return r=n,f},["get","post"].forEach(function(n){f[n]=function(){return f.send.apply(f,[n].concat(dt(arguments)))}}),f.send=function(n,r,u){if(arguments.length===2&&typeof r=="function"&&(u=r,r=null),e.open(n,t,!0),i==null||"accept"in o||(o.accept=i+",*/*"),e.setRequestHeader)for(var c in o)e.setRequestHeader(c,o[c]);if(i!=null&&e.overrideMimeType&&e.overrideMimeType(i),h!=null&&(e.responseType=h),u!=null)f.on("error",u).on("load",function(n){u(null,n)});return s.beforesend.call(f,e),e.send(r==null?null:r),f},f.abort=function(){return e.abort(),f},n.rebind(f,s,"on"),u==null?f:f.get(ud(u))}function ud(n){return n.length===1?function(t,i){n(t==null?i:null)}:n}function fd(n){var t=n.responseType;return t&&t!=="text"?n.response:n.responseText}function vs(){var t=vv(),n=yv()-t;n>24?(isFinite(n)&&(clearTimeout(vf),vf=setTimeout(vs,n)),af=0):(af=1,as(vs))}function vv(){var n=Date.now();for(yt=cf;yt;)n>=yt.t&&(yt.f=yt.c(n-yt.t)),yt=yt.n;return n}function yv(){for(var t,n=cf,i=Infinity;n;)n.f?n=t?t.n=n.n:cf=n.n:(n.t<i&&(i=n.t),n=(t=n).n);return lf=t,i}function ys(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function ed(n,t){var i=Math.pow(10,r(8-t)*3);return{scale:t>8?function(n){return n/i}:function(n){return n*i},symbol:n}}function od(t){var e=t.decimal,r=t.thousands,i=t.grouping,u=t.currency,f=i&&r?function(n,t){for(var f=n.length,o=[],s=0,u=i[0],e=0;f>0&&u>0;){if(e+u+1>t&&(u=Math.max(1,t-e)),o.push(n.substring(f-=u,f+u)),(e+=u+1)>t)break;u=i[s=(s+1)%i.length]}return o.reverse().join(r)}:v;return function(t){var o=ps.exec(t),y=o[1]||" ",s=o[2]||">",b=o[3]||"-",k=o[4]||"",l=o[5],p=+o[6],w=o[7],r=o[8],i=o[9],h=1,a="",c="",d=!1,g=!0,v;r&&(r=+r.substring(1));(l||y==="0"&&s==="=")&&(l=y="0",s="=");switch(i){case"n":w=!0;i="g";break;case"%":h=100;c="%";i="f";break;case"p":h=100;c="%";i="r";break;case"b":case"o":case"x":case"X":k==="#"&&(a="0"+i.toLowerCase());case"c":g=!1;case"d":d=!0;r=0;break;case"s":h=-1;i="r"}return k==="$"&&(a=u[0],c=u[1]),i!="r"||r||(i="g"),r!=null&&(i=="g"?r=Math.max(1,Math.min(21,r)):(i=="e"||i=="f")&&(r=Math.max(0,Math.min(20,r)))),i=wv.get(i)||sd,v=l&&w,function(t){var ft=c,k,ut,it,u,nt,rt,tt,o;return d&&t%1?"":(k=t<0||t===0&&1/t<0?(t=-t,"-"):b==="-"?"":b,h<0?(ut=n.formatPrefix(t,r),t=ut.scale(t),ft=ut.symbol+c):t*=h,t=i(t,r),it=t.lastIndexOf("."),it<0?(rt=g?t.lastIndexOf("e"):-1,rt<0?(u=t,nt=""):(u=t.substring(0,rt),nt=t.substring(rt))):(u=t.substring(0,it),nt=e+t.substring(it+1)),!l&&w&&(u=f(u,Infinity)),tt=a.length+u.length+nt.length+(v?0:k.length),o=tt<p?new Array(tt=p-tt+1).join(y):"",v&&(u=f(o+u,o.length?p-nt.length:Infinity)),k+=a,t=u+nt,(s==="<"?k+t+o:s===">"?o+k+t:s==="^"?o.substring(0,tt>>=1)+k+t+o.substring(tt):k+(v?t:o+t))+ft)}}}function sd(n){return n+""}function pt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ci(n,t,i){function e(t){var i=n(t),r=f(i,1);return t-i<r-t?i:r}function u(i){return t(i=n(new y(i-1)),1),i}function f(n,i){return t(n=new y(+n),i),n}function o(n,r,f){var e=u(n),o=[];if(f>1)while(e<r)i(e)%f||o.push(new Date(+e)),t(e,1);else while(e<r)o.push(new Date(+e)),t(e,1);return o}function s(n,t,i){try{y=pt;var r=new pt;return r._=n,o(r,t,i)}finally{y=Date}}n.floor=n;n.round=e;n.ceil=u;n.offset=f;n.range=o;var r=n.utc=yf(n);return r.floor=r,r.round=yf(e),r.ceil=yf(u),r.offset=yf(f),r.range=s,n}function yf(n){return function(t,i){try{y=pt;var r=new pt;return r._=t,n(r,i)._}finally{y=Date}}}function hd(t){function r(n){function t(t){for(var e=[],r=-1,o=0,f,s,h;++r<i;)n.charCodeAt(r)===37&&(e.push(n.slice(o,r)),(s=bv[f=n.charAt(++r)])!=null&&(f=n.charAt(++r)),(h=u[f])&&(f=h(t,s==null?f==="e"?" ":"0":s)),e.push(f),o=r+1);return e.push(n.slice(o,r)),e.join("")}var i=n.length;return t.parse=function(t){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=f(i,n,t,0),u,r;return e!=t.length?null:("p"in i&&(i.H=i.H%12+i.p*12),u=i.Z!=null&&y!==pt,r=new(u?pt:y),"j"in i?r.setFullYear(i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(r.setFullYear(i.y,0,1),r.setFullYear(i.y,0,"W"in i?(i.w+6)%7+i.W*7-(r.getDay()+5)%7:i.w+i.U*7-(r.getDay()+6)%7)):r.setFullYear(i.y,i.m,i.d),r.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L),u?r._:r)},t.toString=function(){return n},t}function f(n,t,i,r){for(var f,e,o,u=0,s=t.length,h=i.length;u<s;){if(r>=h)return-1;if(f=t.charCodeAt(u++),f===37){if(o=t.charAt(u++),e=k[o in bv?t.charAt(u++):o],!e||(r=e(n,i,r))<0)return-1}else if(f!=i.charCodeAt(r++))return-1}return r}function ft(n,t,i){v.lastIndex=0;var r=v.exec(t.slice(i));return r?(n.w=it.get(r[0].toLowerCase()),i+r[0].length):-1}function et(n,t,i){a.lastIndex=0;var r=a.exec(t.slice(i));return r?(n.w=tt.get(r[0].toLowerCase()),i+r[0].length):-1}function ot(n,t,i){b.lastIndex=0;var r=b.exec(t.slice(i));return r?(n.m=ut.get(r[0].toLowerCase()),i+r[0].length):-1}function st(n,t,i){p.lastIndex=0;var r=p.exec(t.slice(i));return r?(n.m=rt.get(r[0].toLowerCase()),i+r[0].length):-1}function ht(n,t,i){return f(n,u.c.toString(),t,i)}function ct(n,t,i){return f(n,u.x.toString(),t,i)}function lt(n,t,i){return f(n,u.X.toString(),t,i)}function at(n,t,i){var r=l.get(t.slice(i,i+=2).toLowerCase());return r==null?-1:(n.p=r,i)}var d=t.dateTime,g=t.date,nt=t.time,c=t.periods,e=t.days,o=t.shortDays,s=t.months,h=t.shortMonths,u,k;r.utc=function(n){function i(n){try{y=pt;var i=new y;return i._=n,t(i)}finally{y=Date}}var t=r(n);return i.parse=function(n){try{y=pt;var i=t.parse(n);return i&&i._}finally{y=Date}},i.toString=t.toString,i};r.multi=r.utc.multi=rg;var l=n.map(),a=pf(e),tt=wf(e),v=pf(o),it=wf(o),p=pf(s),rt=wf(s),b=pf(h),ut=wf(h);return c.forEach(function(n,t){l.set(n.toLowerCase(),t)}),u={a:function(n){return o[n.getDay()]},A:function(n){return e[n.getDay()]},b:function(n){return h[n.getMonth()]},B:function(n){return s[n.getMonth()]},c:r(d),d:function(n,t){return w(n.getDate(),t,2)},e:function(n,t){return w(n.getDate(),t,2)},H:function(n,t){return w(n.getHours(),t,2)},I:function(n,t){return w(n.getHours()%12||12,t,2)},j:function(n,t){return w(1+i.dayOfYear(n),t,3)},L:function(n,t){return w(n.getMilliseconds(),t,3)},m:function(n,t){return w(n.getMonth()+1,t,2)},M:function(n,t){return w(n.getMinutes(),t,2)},p:function(n){return c[+(n.getHours()>=12)]},S:function(n,t){return w(n.getSeconds(),t,2)},U:function(n,t){return w(i.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return w(i.mondayOfYear(n),t,2)},x:r(g),X:r(nt),y:function(n,t){return w(n.getFullYear()%100,t,2)},Y:function(n,t){return w(n.getFullYear()%1e4,t,4)},Z:tg,"%":function(){return"%"}},k={a:ft,A:et,b:ot,B:st,c:ht,d:dv,e:dv,H:gv,I:gv,j:kd,L:ng,m:bd,M:dd,p:at,S:gd,U:ld,w:cd,W:ad,x:ct,X:lt,y:yd,Y:vd,Z:pd,"%":ig},r}function w(n,t,i){var u=n<0?"-":"",r=(u?-n:n)+"",f=r.length;return u+(f<i?new Array(i-f+1).join(t)+r:r)}function pf(t){return new RegExp("^(?:"+t.map(n.requote).join("|")+")","i")}function wf(n){for(var i=new at,t=-1,r=n.length;++t<r;)i.set(n[t].toLowerCase(),t);return i}function cd(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+1));return r?(n.w=+r[0],i+r[0].length):-1}function ld(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i));return r?(n.U=+r[0],i+r[0].length):-1}function ad(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i));return r?(n.W=+r[0],i+r[0].length):-1}function vd(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+4));return r?(n.y=+r[0],i+r[0].length):-1}function yd(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.y=wd(+r[0]),i+r[0].length):-1}function pd(n,t,i){return/^[+-]\d{4}$/.test(t=t.slice(i,i+5))?(n.Z=-t,i+5):-1}function wd(n){return n+(n>68?1900:2e3)}function bd(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.m=r[0]-1,i+r[0].length):-1}function dv(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.d=+r[0],i+r[0].length):-1}function kd(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+3));return r?(n.j=+r[0],i+r[0].length):-1}function gv(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.H=+r[0],i+r[0].length):-1}function dd(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.M=+r[0],i+r[0].length):-1}function gd(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.S=+r[0],i+r[0].length):-1}function ng(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+3));return r?(n.L=+r[0],i+r[0].length):-1}function tg(n){var t=n.getTimezoneOffset(),i=t>0?"-":"+",u=r(t)/60|0,f=r(t)%60;return i+w(u,"0",2)+w(f,"0",2)}function ig(n,t,i){kv.lastIndex=0;var r=kv.exec(t.slice(i,i+1));return r?i+r[0].length:-1}function rg(n){for(var i=n.length,t=-1;++t<i;)n[t][0]=this(n[t][0]);return function(t){for(var r=0,i=n[r];!i[1](t);)i=n[++r];return i[0](t)}}function bs(){}function ny(n,t,i){var r=i.s=n+t,u=r-n,f=r-u;i.t=n-f+(t-u)}function bf(n,t){n&&ds.hasOwnProperty(n.type)&&ds[n.type](n,t)}function gs(n,t,i){var u=-1,f=n.length-i,r;for(t.lineStart();++u<f;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function ty(n,t){var i=-1,r=n.length;for(t.polygonStart();++i<r;)gs(n[i],t,1);t.polygonEnd()}function ug(){function o(r,e){r*=u;e=e*u/2+f/4;var o=r-n,s=o>=0?1:-1,h=s*o,c=Math.cos(e),l=Math.sin(e),a=i*l,v=t*c+a*Math.cos(h),y=a*s*Math.sin(h);ii.add(Math.atan2(y,v));n=r;t=c;i=l}var r,e,n,t,i;k.point=function(s,h){k.point=o;n=(r=s)*u;t=Math.cos(h=(e=h)*u/2+f/4);i=Math.sin(h)};k.lineEnd=function(){o(r,e)}}function li(n){var t=n[0],i=n[1],r=Math.cos(i);return[r*Math.cos(t),r*Math.sin(t),Math.sin(i)]}function df(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function ir(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function nh(n,t){n[0]+=t[0];n[1]+=t[1];n[2]+=t[2]}function gf(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function ne(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t;n[1]/=t;n[2]/=t}function te(n){return[Math.atan2(n[1],n[0]),ti(n[2])]}function ie(n,i){return r(n[0]-i[0])<t&&r(n[1]-i[1])<t}function th(n,t){n*=u;var i=Math.cos(t*=u);dr(i*Math.cos(n),i*Math.sin(n),Math.sin(t))}function dr(n,t,i){++kr;ai+=(n-ai)/kr;vi+=(t-vi)/kr;wt+=(i-wt)/kr}function iy(){function r(r,f){r*=u;var c=Math.cos(f*=u),o=c*Math.cos(r),s=c*Math.sin(r),h=Math.sin(f),e=Math.atan2(Math.sqrt((e=t*h-i*s)*e+(e=i*o-n*h)*e+(e=n*s-t*o)*e),n*o+t*s+i*h);re+=e;ri+=e*(n+(n=o));ui+=e*(t+(t=s));ht+=e*(i+(i=h));dr(n,t,i)}var n,t,i;nt.point=function(f,e){f*=u;var o=Math.cos(e*=u);n=o*Math.cos(f);t=o*Math.sin(f);i=Math.sin(e);nt.point=r;dr(n,t,i)}}function ry(){nt.point=th}function fg(){function e(r,f){r*=u;var p=Math.cos(f*=u),e=p*Math.cos(r),o=p*Math.sin(r),s=Math.sin(f),c=t*s-i*o,l=i*e-n*s,a=n*o-t*e,v=Math.sqrt(c*c+l*l+a*a),w=n*e+t*o+i*s,y=v&&-ga(w)/v,h=Math.atan2(v,w);rr+=y*c;ur+=y*l;fi+=y*a;re+=h;ri+=h*(n+(n=e));ui+=h*(t+(t=o));ht+=h*(i+(i=s));dr(n,t,i)}var r,f,n,t,i;nt.point=function(o,s){r=o;f=s;nt.point=e;o*=u;var h=Math.cos(s*=u);n=h*Math.cos(o);t=h*Math.sin(o);i=Math.sin(s);dr(n,t,i)};nt.lineEnd=function(){e(r,f);nt.lineEnd=ry;nt.point=th}}function uy(n,t){function i(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(i.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),i}function fr(){return!0}function fy(n,t,i,r,u){var h=[],s=[],v,o,l,f,c,a,e;if(n.forEach(function(n){var o,i,f,e,t,r;if(!((o=n.length-1)<=0)){if(i=n[0],f=n[o],ie(i,f)){for(u.lineStart(),e=0;e<o;++e)u.point((i=n[e])[0],i[1]);u.lineEnd();return}t=new ue(i,n,null,!0);r=new ue(i,null,t,!1);t.o=r;h.push(t);s.push(r);t=new ue(f,n,null,!1);r=new ue(f,null,t,!0);t.o=r;h.push(t);s.push(r)}}),s.sort(t),ey(h),ey(s),h.length){for(var e=0,y=i,a=s.length;e<a;++e)s[e].e=y=!y;for(v=h[0];;){for(f=v,c=!0;f.v;)if((f=f.n)===v)return;o=f.z;u.lineStart();do{if(f.v=f.o.v=!0,f.e){if(c)for(e=0,a=o.length;e<a;++e)u.point((l=o[e])[0],l[1]);else r(f.x,f.n.x,1,u);f=f.n}else{if(c)for(o=f.p.z,e=o.length-1;e>=0;--e)u.point((l=o[e])[0],l[1]);else r(f.x,f.p.x,-1,u);f=f.p}f=f.o;o=f.z;c=!c}while(!f.v);u.lineEnd()}}}function ey(n){if(r=n.length){for(var r,u=0,t=n[0],i;++u<r;)t.n=i=n[u],i.p=t,t=i;t.n=i=n[0];i.p=t}}function ue(n,t,i,r){this.x=n;this.z=t;this.o=i;this.e=r;this.v=!1;this.n=this.p=null}function oy(t,i,r,u){return function(f,e){function y(n,i){var r=f(n,i);t(n=r[0],i=r[1])&&e.point(n,i)}function g(n,t){var i=f(n,t);v.point(i[0],i[1])}function p(){o.point=g;v.lineStart()}function w(){o.point=y;v.lineEnd()}function k(n,t){c.push([n,t]);var i=f(n,t);l.point(i[0],i[1])}function nt(){l.lineStart();c=[]}function tt(){var t,r,f;k(c[0][0],c[0][1]);l.lineEnd();var u=l.clean(),n=b.buffer(),i,t=n.length;if(c.pop(),a.push(c),c=null,t){if(u&1){if(i=n[0],t=i.length-1,r=-1,t>0){for(s||(e.polygonStart(),s=!0),e.lineStart();++r<t;)e.point((f=i[r])[0],f[1]);e.lineEnd()}return}t>1&&u&2&&n.push(n.pop().concat(n.shift()));h.push(n.filter(eg))}}var v=i(e),d=f.invert(u[0],u[1]),o={point:y,lineStart:p,lineEnd:w,polygonStart:function(){o.point=k;o.lineStart=nt;o.lineEnd=tt;h=[];a=[]},polygonEnd:function(){o.point=y;o.lineStart=p;o.lineEnd=w;h=n.merge(h);var t=lg(d,a);h.length?(s||(e.polygonStart(),s=!0),fy(h,og,t,r,e)):t&&(s||(e.polygonStart(),s=!0),e.lineStart(),r(null,null,1,e),e.lineEnd());s&&(e.polygonEnd(),s=!1);h=a=null},sphere:function(){e.polygonStart();e.lineStart();r(null,null,1,e);e.lineEnd();e.polygonEnd()}},h,b=sy(),l=i(b),s=!1,a,c;return o}}function eg(n){return n.length>1}function sy(){var n=[],t;return{lineStart:function(){n.push(t=[])},point:function(n,i){t.push([n,i])},lineEnd:l,buffer:function(){var i=n;return n=[],t=null,i},rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))}}}function og(n,i){return((n=n.x)[0]<0?n[1]-h-t:h-n[1])-((i=i.x)[0]<0?i[1]-h-t:h-i[1])}function sg(n){var u=NaN,i=NaN,e=NaN,o;return{lineStart:function(){n.lineStart();o=1},point:function(s,c){var l=s>0?f:-f,a=r(s-u);r(a-f)<t?(n.point(u,i=(i+c)/2>0?h:-h),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(l,i),n.point(s,i),o=0):e!==l&&a>=f&&(r(u-e)<t&&(u-=e*t),r(s-l)<t&&(s-=l*t),i=hg(u,i,s,c),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(l,i),o=0);n.point(u=s,i=c);e=l},lineEnd:function(){n.lineEnd();u=i=NaN},clean:function(){return 2-o}}}function hg(n,i,u,f){var e,o,s=Math.sin(n-u);return r(s)>t?Math.atan((Math.sin(i)*(o=Math.cos(f))*Math.sin(u)-Math.sin(f)*(e=Math.cos(i))*Math.sin(n))/(e*o*s)):(i+f)/2}function cg(n,i,u,e){var o,s;n==null?(o=u*h,e.point(-f,o),e.point(0,o),e.point(f,o),e.point(f,0),e.point(f,-o),e.point(0,-o),e.point(-f,-o),e.point(-f,0),e.point(-f,o)):r(n[0]-i[0])>t?(s=n[0]<i[0]?f:-f,o=u*s/2,e.point(-s,o),e.point(0,o),e.point(s,o)):e.point(i[0],i[1])}function lg(n,i){var e=n[0],nt=n[1],ct=[Math.sin(e),-Math.cos(e),0],a=0,tt=0,o,it,s,v,u,k,g;for(ii.reset(),o=0,it=i.length;o<it;++o)if(s=i[o],v=s.length,v)for(var h=s[0],y=h[0],rt=h[1]/2+f/4,ut=Math.sin(rt),ft=Math.cos(rt),c=1;;){c===v&&(c=0);n=s[c];var p=n[0],et=n[1]/2+f/4,ot=Math.sin(et),st=Math.cos(et),r=p-y,w=r>=0?1:-1,b=w*r,l=b>f,ht=ut*ot;if(ii.add(Math.atan2(ht*w*Math.sin(b),ft*st+ht*Math.cos(b))),a+=l?r+w*d:r,l^y>=e^p>=e&&(u=ir(li(h),li(n)),ne(u),k=ir(ct,u),ne(k),g=(l^r>=0?-1:1)*ti(k[2]),(nt>g||nt===g&&(u[0]||u[1]))&&(tt+=l^r>=0?1:-1)),!c++)break;y=p;ut=ot;ft=st;h=n}return(a<-t||a<t&&ii<0)^tt&1}function ag(n){function s(n,t){return Math.cos(n)*Math.cos(t)>i}function a(n){var i,a,r,l,u;return{lineStart:function(){l=r=!1;u=1},point:function(v,y){var p=[v,y],w,b=s(v,y),d=e?b?0:h(v,y):b?h(v+(v<0?f:-f),y):0,k;!i&&(l=r=b)&&n.lineStart();b!==r&&(w=o(i,p),(ie(i,w)||ie(p,w))&&(p[0]+=t,p[1]+=t,b=s(p[0],p[1])));b!==r?(u=0,b?(n.lineStart(),w=o(p,i),n.point(w[0],w[1])):(w=o(i,p),n.point(w[0],w[1]),n.lineEnd()),i=w):c&&i&&e^b&&(d&a||!(k=o(p,i,!0))||(u=0,e?(n.lineStart(),n.point(k[0][0],k[0][1]),n.point(k[1][0],k[1][1]),n.lineEnd()):(n.point(k[1][0],k[1][1]),n.lineEnd(),n.lineStart(),n.point(k[0][0],k[0][1]))));!b||i&&ie(i,p)||n.point(p[0],p[1]);i=p;r=b;a=d},lineEnd:function(){r&&n.lineEnd();i=null},clean:function(){return u|(l&&r)<<1}}}function o(n,u,e){var et=li(n),ot=li(u),rt=[1,0,0],a=ir(et,ot),ut=df(a,a),b=a[0],k=ut-b*b,g,o,it;if(!k)return!e&&n;var st=i*ut/k,ht=-i*b/k,ct=ir(rt,a),s=gf(rt,st),lt=gf(a,ht);nh(s,lt);var v=ct,p=df(s,v),d=df(v,v),ft=p*p-d*(df(s,s)-1);if(!(ft<0)){if(g=Math.sqrt(ft),o=gf(v,(-p-g)/d),nh(o,s),o=te(o),!e)return o;var h=n[0],y=u[0],c=n[1],l=u[1],w;y<h&&(w=h,h=y,y=w);var nt=y-h,tt=r(nt-f)<t,at=tt||nt<t;return!tt&&l<c&&(w=c,c=l,l=w),(at?tt?c+l>0^o[1]<(r(o[0]-h)<t?c:l):c<=o[1]&&o[1]<=l:nt>f^(h<=o[0]&&o[0]<=y))?(it=gf(v,(-p+g)/d),nh(it,s),[o,te(it)]):void 0}}function h(t,i){var u=e?n:f-n,r=0;return t<-u?r|=1:t>u&&(r|=2),i<-u?r|=4:i>u&&(r|=8),r}var i=Math.cos(n),e=i>0,c=r(i)>t,l=sh(n,6*u);return oy(s,a,l,e?[0,-n]:[-f,n-f])}function hy(n,t,i,r){return function(u){var a=u.a,v=u.b,c=a.x,l=a.y,y=v.x,p=v.y,e=0,o=1,s=y-c,h=p-l,f;if(f=n-c,s||!(f>0)){if(f/=s,s<0){if(f<e)return;f<o&&(o=f)}else if(s>0){if(f>o)return;f>e&&(e=f)}if(f=i-c,s||!(f<0)){if(f/=s,s<0){if(f>o)return;f>e&&(e=f)}else if(s>0){if(f<e)return;f<o&&(o=f)}if(f=t-l,h||!(f>0)){if(f/=h,h<0){if(f<e)return;f<o&&(o=f)}else if(h>0){if(f>o)return;f>e&&(e=f)}if(f=r-l,h||!(f<0)){if(f/=h,h<0){if(f>o)return;f>e&&(e=f)}else if(h>0){if(f<e)return;f<o&&(o=f)}return e>0&&(u.a={x:c+e*s,y:l+e*h}),o<1&&(u.b={x:c+o*s,y:l+o*h}),u}}}}}}function cy(i,u,f,e){function o(n,e){return r(n[0]-i)<t?e>0?0:3:r(n[0]-f)<t?e>0?2:1:r(n[1]-u)<t?e>0?1:0:e>0?3:2}function h(n,t){return s(n.x,t.x)}function s(n,t){var i=o(n,1),r=o(t,1);return i!==r?i-r:i===0?t[1]-n[1]:i===1?n[0]-t[0]:i===2?n[1]-t[1]:t[0]-n[0]}return function(t){function ot(n){for(var r=0,s=c.length,u=n[1],f=0;f<s;++f)for(var e=1,o=c[f],h=o.length,i=o[0],t;e<h;++e)t=o[e],i[1]<=u?t[1]>u&&ns(i,t,n)>0&&++r:t[1]<=u&&ns(i,t,n)<0&&--r,i=t;return r!==0}function d(n,t,r,h){var c=0,l=0;if(n==null||(c=o(n,r))!==(l=o(t,r))||s(n,t)<0^r>0){do h.point(c===0||c===3?i:f,c>1?e:u);while((c=(c+r+4)%4)!==l)}else h.point(t[0],t[1])}function g(n,t){return i<=n&&n<=f&&u<=t&&t<=e}function nt(n,i){g(n,i)&&t.point(n,i)}function st(){p.point=ut;c&&c.push(y=[]);k=!0;l=!1;w=b=NaN}function ht(){r&&(ut(tt,it),rt&&l&&v.rejoin(),r.push(v.buffer()));p.point=nt;l&&t.lineEnd()}function ut(n,i){var r,u;n=Math.max(-gr,Math.min(gr,n));i=Math.max(-gr,Math.min(gr,i));r=g(n,i);c&&y.push([n,i]);k?(tt=n,it=i,rt=r,k=!1,r&&(t.lineStart(),t.point(n,i))):r&&l?t.point(n,i):(u={a:{x:w,y:b},b:{x:n,y:i}},et(u)?(l||(t.lineStart(),t.point(u.a.x,u.a.y)),t.point(u.b.x,u.b.y),r||t.lineEnd(),a=!1):r&&(t.lineStart(),t.point(n,i),a=!1));w=n;b=i;l=r}var ft=t,v=sy(),et=hy(i,u,f,e),r,c,y,p={point:nt,lineStart:st,lineEnd:ht,polygonStart:function(){t=v;r=[];c=[];a=!0},polygonEnd:function(){t=ft;r=n.merge(r);var u=ot([i,e]),f=a&&u,o=r.length;(f||o)&&(t.polygonStart(),f&&(t.lineStart(),d(null,null,1,t),t.lineEnd()),o&&fy(r,h,u,d,t),t.polygonEnd());r=c=y=null}},tt,it,rt,w,b,l,k,a;return p}}function rh(n){var t=0,i=f/3,r=eh(n),u=r(t,i);return u.parallels=function(n){return arguments.length?r(t=n[0]*f/180,i=n[1]*f/180):[t/f*180,i/f*180]},u}function ly(n,t){function e(n,t){var r=Math.sqrt(u-2*i*Math.sin(t))/i;return[r*Math.sin(n*=i),f-r*Math.cos(n)]}var r=Math.sin(n),i=(r+Math.sin(t))/2,u=1+r*(2*i-r),f=Math.sqrt(u)/i;return e.invert=function(n,t){var r=f-t;return[Math.atan2(n,r)/i,ti((u-(n*n+r*r)*i*i)/(2*i))]},e}function vg(){function u(i,r){fh+=t*i-n*r;n=i;t=r}var i,r,n,t;bt.point=function(f,e){bt.point=u;i=n=f;r=t=e};bt.lineEnd=function(){u(i,r)}}function yg(n,t){n<fe&&(fe=n);n>oe&&(oe=n);t<ee&&(ee=t);t>se&&(se=t)}function pg(){function i(n,i){t.push("M",n,",",i,r)}function f(i,r){t.push("M",i,",",r);n.point=e}function e(n,i){t.push("L",n,",",i)}function u(){n.point=i}function o(){t.push("Z")}var r=vy(4.5),t=[],n={point:i,lineStart:function(){n.point=f},lineEnd:u,polygonStart:function(){n.lineEnd=o},polygonEnd:function(){n.lineEnd=u;n.point=i},pointRadius:function(t){return r=vy(t),n},result:function(){if(t.length){var n=t.join("");return t=[],n}}};return n}function vy(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function yi(n,t){ai+=n;vi+=t;++wt}function yy(){function i(i,r){var f=i-n,e=r-t,u=Math.sqrt(f*f+e*e);ri+=u*(n+i)/2;ui+=u*(t+r)/2;ht+=u;yi(n=i,t=r)}var n,t;tt.point=function(r,u){tt.point=i;yi(n=r,t=u)}}function py(){tt.point=yi}function wg(){function u(i,r){var f=i-n,e=r-t,u=Math.sqrt(f*f+e*e);ri+=u*(n+i)/2;ui+=u*(t+r)/2;ht+=u;u=t*i-n*r;rr+=u*(n+i);ur+=u*(t+r);fi+=u*3;yi(n=i,t=r)}var i,r,n,t;tt.point=function(f,e){tt.point=u;yi(i=n=f,r=t=e)};tt.lineEnd=function(){u(i,r)}}function bg(n){function r(t,r){n.moveTo(t+i,r);n.arc(t,r,i,0,d)}function f(i,r){n.moveTo(i,r);t.point=e}function e(t,i){n.lineTo(t,i)}function u(){t.point=r}function o(){n.closePath()}var i=4.5,t={point:r,lineStart:function(){t.point=f},lineEnd:u,polygonStart:function(){t.lineEnd=o},polygonEnd:function(){t.lineEnd=u;t.point=r},pointRadius:function(n){return i=n,t},result:l};return t}function wy(n){function o(n){return(f?c:h)(n)}function h(t){return ky(t,function(i,r){i=n(i,r);t.point(i[0],i[1])})}function c(t){function g(i,r){i=n(i,r);t.point(i[0],i[1])}function l(){r=NaN;i.point=a;t.lineStart()}function a(i,l){var a=li([i,l]),v=n(i,l);e(r,u,c,o,s,h,r=v[0],u=v[1],c=i,o=a[0],s=a[1],h=a[2],f,t);t.point(r,u)}function v(){i.point=g;t.lineEnd()}function tt(){l();i.point=it;i.lineEnd=rt}function it(n,t){a(y=n,nt=t);p=r;w=u;b=o;k=s;d=h;i.point=a}function rt(){e(r,u,c,o,s,h,p,w,y,b,k,d,f,t);i.lineEnd=v;v()}var y,nt,p,w,b,k,d,c,r,u,o,s,h,i={point:g,lineStart:l,lineEnd:v,polygonStart:function(){t.polygonStart();i.lineStart=tt},polygonEnd:function(){t.polygonEnd();i.lineStart=l}};return i}function e(u,f,o,h,c,l,a,v,y,p,w,b,k,d){var it=a-u,rt=v-f,et=it*it+rt*rt;if(et>4*i&&k--){var nt=h+p,tt=c+w,g=l+b,ot=Math.sqrt(nt*nt+tt*tt+g*g),vt=Math.asin(g/=ot),st=r(r(g)-1)<t||r(o-y)<t?(o+y)/2:Math.atan2(tt,nt),ht=n(st,vt),ut=ht[0],ft=ht[1],ct=ut-u,lt=ft-f,at=rt*ct-it*lt;(at*at/et>i||r((it*ct+rt*lt)/et-.5)>.3||h*p+c*w+l*b<s)&&(e(u,f,o,h,c,l,ut,ft,st,nt/=ot,tt/=ot,g,k,d),d.point(ut,ft),e(ut,ft,st,nt,tt,g,a,v,y,p,w,b,k,d))}}var i=.5,s=Math.cos(30*u),f=16;return o.precision=function(n){return arguments.length?(f=(i=n*n)>0&&16,o):Math.sqrt(i)},o}function kg(n){var t=wy(function(t,i){return n([t*s,i*s])});return function(n){return dy(t(n))}}function by(n){this.stream=n}function ky(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function ei(n){return eh(function(){return n})()}function eh(t){function r(n){return n=l(n[0]*u,n[1]*u),[n[0]*i+h,c-n[1]*i]}function et(n){return n=l.invert((n[0]-h)/i,(c-n[1])/i),n&&[n[0]*s,n[1]*s]}function o(){l=uy(tt=oh(b,k,d),e);var n=e(p,w);return h=a-n[0]*i,c=y+n[1]*i,nt()}function nt(){return f&&(f.valid=!1,f=null),r}var e,tt,l,it=wy(function(n,t){return n=e(n,t),[n[0]*i+h,c-n[1]*i]}),i=150,a=480,y=250,p=0,w=0,b=0,k=0,d=0,h,c,rt=ih,ut=v,g=null,ft=null,f;return r.stream=function(n){return f&&(f.valid=!1),f=dy(rt(tt,it(ut(n)))),f.valid=!0,f},r.clipAngle=function(n){return arguments.length?(rt=n==null?(g=n,ih):ag((g=+n)*u),nt()):g},r.clipExtent=function(n){return arguments.length?(ft=n,ut=n?cy(n[0][0],n[0][1],n[1][0],n[1][1]):v,nt()):ft},r.scale=function(n){return arguments.length?(i=+n,o()):i},r.translate=function(n){return arguments.length?(a=+n[0],y=+n[1],o()):[a,y]},r.center=function(n){return arguments.length?(p=n[0]%360*u,w=n[1]%360*u,o()):[p*s,w*s]},r.rotate=function(n){return arguments.length?(b=n[0]%360*u,k=n[1]%360*u,d=n.length>2?n[2]%360*u:0,o()):[b*s,k*s,d*s]},n.rebind(r,it,"precision"),function(){return e=t.apply(this,arguments),r.invert=e.invert&&et,o()}}function dy(n){return ky(n,function(t,i){n.point(t*u,i*u)})}function nu(n,t){return[n,t]}function gy(n,t){return[n>f?n-d:n<-f?n+d:n,t]}function oh(n,t,i){return n?t||i?uy(tp(n),ip(t,i)):tp(n):t||i?ip(t,i):gy}function np(n){return function(t,i){return t+=n,[t>f?t-d:t<-f?t+d:t,i]}}function tp(n){var t=np(n);return t.invert=np(-n),t}function ip(n,t){function e(n,t){var e=Math.cos(t),o=Math.cos(n)*e,s=Math.sin(n)*e,h=Math.sin(t),c=h*i+o*r;return[Math.atan2(s*u-c*f,o*i-h*r),ti(c*u+s*f)]}var i=Math.cos(n),r=Math.sin(n),u=Math.cos(t),f=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),o=Math.cos(n)*e,s=Math.sin(n)*e,h=Math.sin(t),c=h*u-s*f;return[Math.atan2(s*u+h*f,o*i+c*r),ti(c*i-o*r)]},e}function sh(n,t){var i=Math.cos(n),r=Math.sin(n);return function(u,f,e,o){var h=e*t,c,s;for(u!=null?(u=rp(i,u),f=rp(i,f),(e>0?u<f:u>f)&&(u+=e*d)):(u=n+e*d,f=n-.5*h),s=u;e>0?s>f:s<f;s-=h)o.point((c=te([i,-r*Math.cos(s),-r*Math.sin(s)]))[0],c[1])}}function rp(n,i){var r=li(i),u;return r[0]-=n,ne(r),u=ga(-r[1]),((-r[2]<0?-u:u)+2*Math.PI-t)%(2*Math.PI)}function up(i,r,u){var f=n.range(i,r-t,u).concat(r);return function(n){return f.map(function(t){return[n,t]})}}function fp(i,r,u){var f=n.range(i,r-t,u).concat(r);return function(n){return f.map(function(t){return[t,n]})}}function hh(n){return n.source}function ch(n){return n.target}function dg(n,t,i,r){var f=Math.cos(t),c=Math.sin(t),e=Math.cos(r),l=Math.sin(r),a=f*Math.cos(n),v=f*Math.sin(n),y=e*Math.cos(i),p=e*Math.sin(i),u=2*Math.asin(Math.sqrt(tv(r-t)+f*e*tv(i-n))),o=1/Math.sin(u),h=u?function(n){var t=Math.sin(n*=u)*o,i=Math.sin(u-n)*o,r=i*a+t*y,f=i*v+t*p,e=i*c+t*l;return[Math.atan2(f,r)*s,Math.atan2(e,Math.sqrt(r*r+f*f))*s]}:function(){return[n*s,t*s]};return h.distance=u,h}function gg(){function f(f,e){var h=Math.sin(e*=u),s=Math.cos(e),o=r((f*=u)-i),c=Math.cos(o);lh+=Math.atan2(Math.sqrt((o=s*Math.sin(o))*o+(o=t*h-n*s*c)*o),n*h+t*s*c);i=f;n=h;t=s}var i,n,t;pi.point=function(r,e){i=r*u;n=Math.sin(e*=u);t=Math.cos(e);pi.point=f};pi.lineEnd=function(){pi.point=pi.lineEnd=l}}function tu(n,t){function i(t,i){var f=Math.cos(t),r=Math.cos(i),u=n(f*r);return[u*r*Math.sin(t),u*Math.sin(i)]}return i.invert=function(n,i){var r=Math.sqrt(n*n+i*i),u=t(r),f=Math.sin(u),e=Math.cos(u);return[Math.atan2(n*f,r*e),Math.asin(r&&i*f/r)]},i}function ep(n,i){function s(n,i){u>0?i<-h+t&&(i=-h+t):i>h-t&&(i=h-t);var f=u/Math.pow(e(i),r);return[f*Math.sin(r*n),u-f*Math.cos(r*n)]}var o=Math.cos(n),e=function(n){return Math.tan(f/4+n/2)},r=n===i?Math.sin(n):Math.log(o/Math.cos(i))/Math.log(e(i)/e(n)),u=o*Math.pow(e(n),r)/r;return r?(s.invert=function(n,t){var i=u-t,f=da(r)*Math.sqrt(n*n+i*i);return[Math.atan2(n,i)/r,2*Math.atan(Math.pow(u/f,1/r))-h]},s):he}function op(n,i){function o(n,t){var i=f-t;return[i*Math.sin(u*n),f-i*Math.cos(u*n)]}var e=Math.cos(n),u=n===i?Math.sin(n):(e-Math.cos(i))/(i-n),f=e/u+n;return r(u)<t?nu:(o.invert=function(n,t){var i=f-t;return[Math.atan2(n,i)/u,f-da(u)*Math.sqrt(n*n+i*i)]},o)}function he(n,t){return[n,Math.log(Math.tan(f/4+t/2))]}function sp(n){var t=ei(n),r=t.scale,u=t.translate,e=t.clipExtent,i;return t.scale=function(){var n=r.apply(t,arguments);return n===t?i?t.clipExtent(null):t:n},t.translate=function(){var n=u.apply(t,arguments);return n===t?i?t.clipExtent(null):t:n},t.clipExtent=function(n){var h=e.apply(t,arguments),o,s;return h===t?(i=n==null)&&(o=f*r(),s=u(),e([[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]])):i&&(h=null),h},t.clipExtent(null)}function bh(n,t){return[Math.log(Math.tan(f/4+t/2)),-n]}function er(n){return n[0]}function iu(n){return n[1]}function hp(n){for(var u=n.length,i=[0,1],t=2,r=2;r<u;r++){while(t>1&&ns(n[i[t-2]],n[i[t-1]],n[r])<=0)--t;i[t++]=r}return i.slice(0,t)}function nn(n,t){return n[0]-t[0]||n[1]-t[1]}function kh(n,t,i){return(i[0]-t[0])*(n[1]-t[1])<(i[1]-t[1])*(n[0]-t[0])}function dh(n,t,i,r){var u=n[0],e=i[0],o=t[0]-u,s=r[0]-e,f=n[1],h=i[1],c=t[1]-f,l=r[1]-h,a=(s*(f-h)-l*(u-e))/(l*o-s*c);return[u+a*o,f+a*c]}function cp(n){var t=n[0],i=n[n.length-1];return!(t[0]-i[0]||t[1]-i[1])}function tn(){ae(this);this.edge=this.site=this.circle=null}function lp(n){var t=gh.pop()||new tn;return t.site=n,t}function ic(n){cr(n);sr.remove(n);gh.push(n);ae(n)}function rn(n){var a=n.circle,o=a.x,s=a.cy,v={x:o,y:s},h=n.P,c=n.N,f=[n],u,i,l,e;for(ic(n),u=h;u.circle&&r(o-u.circle.x)<t&&r(s-u.circle.cy)<t;)h=u.P,f.unshift(u),ic(u),u=h;for(f.unshift(u),cr(u),i=c;i.circle&&r(o-i.circle.x)<t&&r(s-i.circle.cy)<t;)c=i.N,f.push(i),ic(i),i=c;for(f.push(i),cr(i),l=f.length,e=1;e<l;++e)i=f[e],u=f[e-1],ce(i.edge,u.site,i.site,v);u=f[0];i=f[l-1];i.edge=fu(u.site,i.site,null,v);hr(u);hr(i)}function un(n){for(var b=n.x,k=n.y,i,r,a,v,u=sr._,f;u;)if(a=ap(u,k)-b,a>t)u=u.L;else if(v=b-fn(u,k),v>t){if(!u.R){i=u;break}u=u.R}else{a>-t?(i=u.P,r=u):v>-t?(i=u,r=u.N):i=r=u;break}if(f=lp(n),sr.insert(i,f),i||r){if(i===r){cr(i);r=lp(i.site);sr.insert(f,r);f.edge=r.edge=fu(i.site,f.site);hr(i);hr(r);return}if(!r){f.edge=fu(i.site,f.site);return}cr(i);cr(r);var e=i.site,y=e.x,p=e.y,o=n.x-y,s=n.y-p,h=r.site,c=h.x-y,l=h.y-p,d=2*(o*l-s*c),g=o*o+s*s,nt=c*c+l*l,w={x:(l*g-s*nt)/d+y,y:(o*nt-c*g)/d+p};ce(r.edge,e,h,w);f.edge=fu(e,n,null,w);r.edge=fu(n,h,null,w);hr(i);hr(r)}}function ap(n,t){var i=n.site,u=i.x,l=i.y,f=l-t,e;if(!f)return u;if(e=n.P,!e)return-Infinity;i=e.site;var o=i.x,a=i.y,r=a-t;if(!r)return o;var s=o-u,h=1/f-1/r,c=s/r;return h?(-c+Math.sqrt(c*c-2*h*(s*s/(-2*r)-a+r/2+l-f/2)))/h+u:(u+o)/2}function fn(n,t){var r=n.N,i;return r?ap(r,t):(i=n.site,i.y===t?i.x:Infinity)}function vp(n){this.site=n;this.edges=[]}function en(n){for(var s=n[0][0],h=n[1][0],c=n[0][1],l=n[1][1],i,u,f,e,b=wi,k=b.length,o,a,v,y,w,p;k--;)if(o=b[k],o&&o.prepare())for(v=o.edges,y=v.length,a=0;a<y;)p=v[a].end(),f=p.x,e=p.y,w=v[++a%y].start(),i=w.x,u=w.y,(r(f-i)>t||r(e-u)>t)&&(v.splice(a,0,new le(cn(o.site,p,r(f-s)<t&&l-e>t?{x:s,y:r(i-s)<t?u:l}:r(e-l)<t&&h-f>t?{x:r(u-l)<t?i:h,y:l}:r(f-h)<t&&e-c>t?{x:h,y:r(i-h)<t?u:c}:r(e-c)<t&&f-s>t?{x:r(u-c)<t?i:s,y:c}:null),o.site,null)),++y)}function yp(n,t){return t.angle-n.angle}function on(){ae(this);this.x=this.y=this.arc=this.site=this.cy=null}function hr(n){var w=n.P,b=n.N,u,t;if(w&&b){var s=w.site,h=n.site,c=b.site;if(s!==c){var l=h.x,a=h.y,f=s.x-l,e=s.y-a,o=c.x-l,r=c.y-a,v=2*(f*r-e*o);if(!(v>=-go)){var k=f*f+e*e,d=o*o+r*r,y=(r*k-e*d)/v,p=(f*d-o*k)/v,r=p+a,i=tc.pop()||new on;for(i.arc=n,i.site=h,i.x=y+l,i.y=r+Math.sqrt(y*y+p*p),i.cy=r,n.circle=i,u=null,t=uu._;t;)if(i.y<t.y||i.y===t.y&&i.x<=t.x)if(t.L)t=t.L;else{u=t.P;break}else if(t.R)t=t.R;else{u=t;break}uu.insert(u,i);u||(nc=i)}}}}function cr(n){var t=n.circle;t&&(t.P||(nc=t.N),uu.remove(t),tc.push(t),ae(t),n.circle=null)}function sn(n){for(var u=or,e=hy(n[0][0],n[0][1],n[1][0],n[1][1]),f=u.length,i;f--;)i=u[f],(!hn(i,n)||!e(i)||r(i.a.x-i.b.x)<t&&r(i.a.y-i.b.y)<t)&&(i.a=i.b=null,u.splice(f,1))}function hn(n,t){var f=n.b;if(f)return!0;var i=n.a,h=t[0][0],c=t[1][0],e=t[0][1],o=t[1][1],p=n.l,w=n.r,l=p.x,a=p.y,v=w.x,y=w.y,s=(l+v)/2,b=(a+y)/2,r,u;if(y===a){if(s<h||s>=c)return;if(l>v){if(i){if(i.y>=o)return}else i={x:s,y:e};f={x:s,y:o}}else{if(i){if(i.y<e)return}else i={x:s,y:o};f={x:s,y:e}}}else if(r=(l-v)/(y-a),u=b-r*s,r<-1||r>1)if(l>v){if(i){if(i.y>=o)return}else i={x:(e-u)/r,y:e};f={x:(o-u)/r,y:o}}else{if(i){if(i.y<e)return}else i={x:(o-u)/r,y:o};f={x:(e-u)/r,y:e}}else if(a<y){if(i){if(i.x>=c)return}else i={x:h,y:r*h+u};f={x:c,y:r*c+u}}else{if(i){if(i.x<h)return}else i={x:c,y:r*c+u};f={x:h,y:r*h+u}}return n.a=i,n.b=f,!0}function pp(n,t){this.l=n;this.r=t;this.a=this.b=null}function fu(n,t,i,r){var u=new pp(n,t);return or.push(u),i&&ce(u,n,t,i),r&&ce(u,t,n,r),wi[n.i].edges.push(new le(u,n,t)),wi[t.i].edges.push(new le(u,t,n)),u}function cn(n,t,i){var r=new pp(n,null);return r.a=t,r.b=i,or.push(r),r}function ce(n,t,i,r){n.a||n.b?n.l===i?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=i)}function le(n,t,i){var r=n.a,u=n.b;this.edge=n;this.site=t;this.angle=i?Math.atan2(i.y-t.y,i.x-t.x):n.l===t?Math.atan2(u.x-r.x,r.y-u.y):Math.atan2(r.x-u.x,u.y-r.y)}function rc(){this._=null}function ae(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function eu(n,t){var i=t,r=t.R,u=i.U;u?u.L===i?u.L=r:u.R=r:n._=r;r.U=u;i.U=r;i.R=r.L;i.R&&(i.R.U=i);r.L=i}function ou(n,t){var i=t,r=t.L,u=i.U;u?u.L===i?u.L=r:u.R=r:n._=r;r.U=u;i.U=r;i.L=r.R;i.L&&(i.L.U=i);r.R=i}function wp(n){while(n.L)n=n.L;return n}function uc(n,t){var i=n.sort(ln).pop(),u,f,r,e;for(or=[],wi=new Array(n.length),sr=new rc,uu=new rc;;)if(r=nc,i&&(!r||i.y<r.y||i.y===r.y&&i.x<r.x))(i.x!==u||i.y!==f)&&(wi[i.i]=new vp(i),un(i),u=i.x,f=i.y),i=n.pop();else if(r)rn(r.arc);else break;return t&&(sn(t),en(t)),e={cells:wi,edges:or},sr=uu=or=wi=null,e}function ln(n,t){return t.y-n.y||t.x-n.x}function an(n,t,i){return(n.x-i.x)*(t.y-n.y)-(n.x-t.x)*(i.y-n.y)}function vn(n){return n.x}function yn(n){return n.y}function bp(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hu(n,t,i,r,u,f){if(!n(t,i,r,u,f)){var o=(i+u)*.5,s=(r+f)*.5,e=t.nodes;e[0]&&hu(n,e[0],i,r,o,s);e[1]&&hu(n,e[1],o,r,u,s);e[2]&&hu(n,e[2],i,s,o,f);e[3]&&hu(n,e[3],o,s,u,f)}}function pn(n,t,i,r,u,f,e){var s=Infinity,h;return function o(n,c,l,a,v){var p,y,tt;if(!(c>f)&&!(l>e)&&!(a<r)&&!(v<u)){if(k=n.point){var k,d=t-k[0],g=i-k[1],nt=d*d+g*g;nt<s&&(p=Math.sqrt(s=nt),r=t-p,u=i-p,f=t+p,e=i+p,h=k)}var it=n.nodes,w=(c+a)*.5,b=(l+v)*.5,rt=t>=w,ut=i>=b;for(y=ut<<1|rt,tt=y+4;y<tt;++y)if(n=it[y&3])switch(y&3){case 0:o(n,c,l,w,b);break;case 1:o(n,w,l,a,b);break;case 2:o(n,c,b,w,v);break;case 3:o(n,w,b,a,v)}}}(n,r,u,f,e),h}function fc(t,i){t=n.rgb(t);i=n.rgb(i);var r=t.r,u=t.g,f=t.b,e=i.r-r,o=i.g-u,s=i.b-f;return function(n){return"#"+tr(Math.round(r+e*n))+tr(Math.round(u+o*n))+tr(Math.round(f+s*n))}}function kp(n,t){var u={},r={};for(var i in n)i in t?u[i]=bi(n[i],t[i]):r[i]=n[i];for(i in t)i in n||(r[i]=t[i]);return function(n){for(i in u)r[i]=u[i](n);return r}}function kt(n,t){return n=+n,t=+t,function(i){return n*(1-i)+t*i}}function dp(n,t){var e=ve.lastIndex=ye.lastIndex=0,s,f,u,r=-1,i=[],o=[];for(n=n+"",t=t+"";(s=ve.exec(n))&&(f=ye.exec(t));)(u=f.index)>e&&(u=t.slice(e,u),i[r]?i[r]+=u:i[++r]=u),(s=s[0])===(f=f[0])?i[r]?i[r]+=f:i[++r]=f:(i[++r]=null,o.push({i:r,x:kt(s,f)})),e=ye.lastIndex;return e<t.length&&(u=t.slice(e),i[r]?i[r]+=u:i[++r]=u),i.length<2?o[0]?(t=o[0].x,function(n){return t(n)+""}):function(){return t}:(t=o.length,function(n){for(var r=0,u;r<t;++r)i[(u=o[r]).i]=u.x(n);return i.join("")})}function bi(t,i){for(var r=n.interpolators.length,u;--r>=0&&!(u=n.interpolators[r](t,i)););return u}function pe(n,t){for(var u=[],r=[],e=n.length,o=t.length,f=Math.min(n.length,t.length),i=0;i<f;++i)u.push(bi(n[i],t[i]));for(;i<e;++i)r[i]=n[i];for(;i<o;++i)r[i]=t[i];return function(n){for(i=0;i<f;++i)r[i]=u[i](n);return r}}function kn(n){return function(t){return t<=0?0:t>=1?1:n(t)}}function nw(n){return function(t){return 1-n(1-t)}}function tw(n){return function(t){return.5*(t<.5?n(2*t):2-n(2-2*t))}}function dn(n){return n*n}function gn(n){return n*n*n}function ntt(n){if(n<=0)return 0;if(n>=1)return 1;var t=n*n,i=t*n;return 4*(n<.5?i:3*(n-t)+i-.75)}function ttt(n){return function(t){return Math.pow(t,n)}}function itt(n){return 1-Math.cos(n*h)}function rtt(n){return Math.pow(2,10*(n-1))}function utt(n){return 1-Math.sqrt(1-n*n)}function ftt(n,t){var i;return arguments.length<2&&(t=.45),arguments.length?i=t/d*Math.asin(1/n):(n=1,i=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-i)*d/t)}}function ett(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function ott(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function stt(t,i){t=n.hcl(t);i=n.hcl(i);var u=t.h,f=t.c,o=t.l,r=i.h-u,e=i.c-f,s=i.l-o;return isNaN(e)&&(e=0,f=isNaN(f)?i.c:f),isNaN(r)?(r=0,u=isNaN(u)?i.h:u):r>180?r-=360:r<-180&&(r+=360),function(n){return us(u+r*n,f+e*n,o+s*n)+""}}function htt(t,i){t=n.hsl(t);i=n.hsl(i);var u=t.h,f=t.s,o=t.l,r=i.h-u,e=i.s-f,s=i.l-o;return isNaN(e)&&(e=0,f=isNaN(f)?i.s:f),isNaN(r)?(r=0,u=isNaN(u)?i.h:u):r>180?r-=360:r<-180&&(r+=360),function(n){return rs(u+r*n,f+e*n,o+s*n)+""}}function ctt(t,i){t=n.lab(t);i=n.lab(i);var r=t.l,u=t.a,f=t.b,e=i.l-r,o=i.a-u,s=i.b-f;return function(n){return ov(r+e*n,u+o*n,f+s*n)+""}}function iw(n,t){return t-=n,function(i){return Math.round(n+t*i)}}function rw(n){var t=[n.a,n.b],i=[n.c,n.d],r=fw(t),u=uw(t,i),f=fw(ltt(i,t,-u))||0;t[0]*i[1]<i[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1);this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-i[0],i[1]))*s;this.translate=[n.e,n.f];this.scale=[r,f];this.skew=f?Math.atan2(u,f)*s:0}function uw(n,t){return n[0]*t[0]+n[1]*t[1]}function fw(n){var t=Math.sqrt(uw(n,n));return t&&(n[0]/=t,n[1]/=t),t}function ltt(n,t,i){return n[0]+=i*t[0],n[1]+=i*t[1],n}function ow(t,i){var r=[],o=[],s,c=n.transform(t),l=n.transform(i),a=c.translate,u=l.translate,h=c.rotate,f=l.rotate,p=c.skew,v=l.skew,y=c.scale,e=l.scale;return a[0]!=u[0]||a[1]!=u[1]?(r.push("translate(",null,",",null,")"),o.push({i:1,x:kt(a[0],u[0])},{i:3,x:kt(a[1],u[1])})):u[0]||u[1]?r.push("translate("+u+")"):r.push(""),h!=f?(h-f>180?f+=360:f-h>180&&(h+=360),o.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:kt(h,f)})):f&&r.push(r.pop()+"rotate("+f+")"),p!=v?o.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:kt(p,v)}):v&&r.push(r.pop()+"skewX("+v+")"),y[0]!=e[0]||y[1]!=e[1]?(s=r.push(r.pop()+"scale(",null,",",null,")"),o.push({i:s-4,x:kt(y[0],e[0])},{i:s-2,x:kt(y[1],e[1])})):(e[0]!=1||e[1]!=1)&&r.push(r.pop()+"scale("+e+")"),s=o.length,function(n){for(var t=-1,i;++t<s;)r[(i=o[t]).i]=i.x(n);return r.join("")}}function att(n,t){return t=(t-=n=+n)||1/t,function(i){return(i-n)/t}}function vtt(n,t){return t=(t-=n=+n)||1/t,function(i){return Math.max(0,Math.min(1,(i-n)/t))}}function ytt(n){for(var t=n.source,i=n.target,u=ptt(t,i),r=[t],f;t!==u;)t=t.parent,r.push(t);for(f=r.length;i!==u;)r.splice(f,0,i),i=i.parent;return r}function sw(n){for(var i=[],t=n.parent;t!=null;)i.push(n),n=t,t=t.parent;return i.push(n),i}function ptt(n,t){if(n===t)return n;for(var r=sw(n),u=sw(t),i=r.pop(),f=u.pop(),e=null;i===f;)e=i,i=r.pop(),f=u.pop();return e}function wtt(n){n.fixed|=2}function btt(n){n.fixed&=-7}function ktt(n){n.fixed|=4;n.px=n.x;n.py=n.y}function dtt(n){n.fixed&=-5}function hw(n,t,i){var f=0,e=0,u;if(n.charge=0,!n.leaf)for(var o=n.nodes,h=o.length,s=-1,r;++s<h;)(r=o[s],r!=null)&&(hw(r,t,i),n.charge+=r.charge,f+=r.charge*r.cx,e+=r.charge*r.cy);n.point&&(n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5),u=t*i[n.point.index],n.charge+=n.pointCharge=u,f+=u*n.point.x,e+=u*n.point.y);n.cx=f/n.charge;n.cy=e/n.charge}function cu(t,i){return n.rebind(t,i,"sort","children","value"),t.nodes=t,t.links=fit,t}function lu(n,t){for(var u=[n],i,r;(n=u.pop())!=null;)if(t(n),(r=n.children)&&(i=r.length))while(--i>=0)u.push(r[i])}function ct(n,t){for(var u=[n],f=[],i,e,r;(n=u.pop())!=null;)if(f.push(n),(r=n.children)&&(e=r.length))for(i=-1;++i<e;)u.push(r[i]);while((n=f.pop())!=null)t(n)}function iit(n){return n.children}function rit(n){return n.value}function uit(n,t){return t.value-n.value}function fit(t){return n.merge(t.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function eit(n){return n.x}function oit(n){return n.y}function sit(n,t,i){n.y0=t;n.y=i}function oc(t){return n.range(t.length)}function sc(n){for(var t=-1,r=n[0].length,i=[];++t<r;)i[t]=0;return i}function hit(n){for(var t=1,i=0,r=n[0][1],u,f=n.length;t<f;++t)(u=n[t][1])>r&&(i=t,r=u);return i}function cit(n){return n.reduce(lit,0)}function lit(n,t){return n+t[1]}function ait(n,t){return aw(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function aw(n,t){for(var i=-1,r=+n[0],f=(n[1]-r)/t,u=[];++i<=t;)u[i]=f*i+r;return u}function vit(t){return[n.min(t),n.max(t)]}function yit(n,t){return n.value-t.value}function hc(n,t){var i=n._pack_next;n._pack_next=t;t._pack_prev=n;t._pack_next=i;i._pack_prev=t}function vw(n,t){n._pack_next=t;t._pack_prev=n}function yw(n,t){var i=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>i*i+r*r}function pw(n){function h(n){c=Math.min(n.x-n.r,c);l=Math.max(n.x+n.r,l);a=Math.min(n.y-n.r,a);v=Math.max(n.y+n.r,v)}if((u=n.children)&&(s=u.length)){var u,c=Infinity,l=-Infinity,a=Infinity,v=-Infinity,i,r,t,f,e,o,s;if(u.forEach(pit),i=u[0],i.x=-i.r,i.y=0,h(i),s>1&&(r=u[1],r.x=r.r,r.y=0,h(r),s>2))for(t=u[2],bw(i,r,t),h(t),hc(i,t),i._pack_prev=t,hc(t,r),r=i._pack_next,f=3;f<s;f++){bw(i,r,t=u[f]);var y=0,p=1,w=1;for(e=r._pack_next;e!==r;e=e._pack_next,p++)if(yw(e,t)){y=1;break}if(y==1)for(o=i._pack_prev;o!==e._pack_prev;o=o._pack_prev,w++)if(yw(o,t))break;y?(p<w||p==w&&r.r<i.r?vw(i,r=e):vw(i=o,r),f--):(hc(i,t),r=t,h(t))}var k=(c+l)/2,d=(a+v)/2,b=0;for(f=0;f<s;f++)t=u[f],t.x-=k,t.y-=d,b=Math.max(b,t.r+Math.sqrt(t.x*t.x+t.y*t.y));n.r=b;u.forEach(wit)}}function pit(n){n._pack_next=n._pack_prev=n}function wit(n){delete n._pack_next;delete n._pack_prev}function ww(n,t,i,r){var u=n.children,f,e;if(n.x=t+=r*n.x,n.y=i+=r*n.y,n.r*=r,u)for(f=-1,e=u.length;++f<e;)ww(u[f],t,i,r)}function bw(n,t,i){var r=n.r+i.r,f=t.x-n.x,e=t.y-n.y,u,o,s,h;r&&(f||e)?(u=t.r+i.r,o=f*f+e*e,u*=u,r*=r,s=.5+(r-u)/(2*o),h=Math.sqrt(Math.max(0,2*u*(r+o)-(r-=o)*r-u*u))/(2*o),i.x=n.x+s*f+h*e,i.y=n.y+s*e-h*f):(i.x=n.x+r,i.y=n.y)}function kw(n,t){return n.parent==t.parent?1:2}function cc(n){var t=n.children;return t.length?t[0]:n.t}function lc(n){var t=n.children,i;return(i=t.length)?t[i-1]:n.t}function bit(n,t,i){var r=i/(t.i-n.i);t.c-=r;t.s+=i;n.c+=r;t.z+=i;t.m+=i}function kit(n){for(var i=0,f=0,r=n.children,u=r.length,t;--u>=0;)t=r[u],t.z+=i,t.m+=i,i+=t.s+(f+=t.c)}function dit(n,t,i){return n.a.parent===t.parent?n.a:i}function git(t){return 1+n.max(t,function(n){return n.y})}function nrt(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function dw(n){var t=n.children;return t&&t.length?dw(t[0]):n}function gw(n){var t=n.children,i;return t&&(i=t.length)?gw(t[i-1]):n}function ac(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function nb(n,t){var u=n.x+t[3],f=n.y+t[0],i=n.dx-t[1]-t[3],r=n.dy-t[0]-t[2];return i<0&&(u+=i/2,i=0),r<0&&(f+=r/2,r=0),{x:u,y:f,dx:i,dy:r}}function lr(n){var t=n[0],i=n[n.length-1];return t<i?[t,i]:[i,t]}function we(n){return n.rangeExtent?n.rangeExtent():lr(n.range())}function trt(n,t,i,r){var u=i(n[0],n[1]),f=r(t[0],t[1]);return function(n){return f(u(n))}}function vc(n,t){var i=0,r=n.length-1,u=n[i],f=n[r],e;return f<u&&(e=i,i=r,r=e,e=u,u=f,f=e),n[i]=t.floor(u),n[r]=t.ceil(f),n}function irt(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:tb}function rrt(t,i,r,u){var o=[],s=[],f=0,e=Math.min(t.length,i.length)-1;for(t[e]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++f<=e;)o.push(r(t[f-1],t[f])),s.push(u(i[f-1],i[f]));return function(i){var r=n.bisect(t,i,1,e)-1;return s[r](o[r](i))}}function ib(n,t,i,r){function f(){var f=Math.min(n.length,t.length)>2?rrt:trt,s=r?vtt:att;return e=f(n,t,s,i),o=f(t,n,s,bi),u}function u(n){return e(n)}var e,o;return u.invert=function(n){return o(n)},u.domain=function(t){return arguments.length?(n=t.map(Number),f()):n},u.range=function(n){return arguments.length?(t=n,f()):t},u.rangeRound=function(n){return u.range(n).interpolate(iw)},u.clamp=function(n){return arguments.length?(r=n,f()):r},u.interpolate=function(n){return arguments.length?(i=n,f()):i},u.ticks=function(t){return pc(n,t)},u.tickFormat=function(t,i){return wc(n,t,i)},u.nice=function(t){return rb(n,t),f()},u.copy=function(){return ib(n,t,i,r)},f()}function yc(t,i){return n.rebind(t,i,"range","rangeRound","interpolate","clamp")}function rb(n,t){return vc(n,irt(au(n,t)[2]))}function au(n,t){t==null&&(t=10);var r=lr(n),f=r[1]-r[0],i=Math.pow(10,Math.floor(Math.log(f/t)/Math.LN10)),u=t/f*i;return u<=.15?i*=10:u<=.35?i*=5:u<=.75&&(i*=2),r[0]=Math.ceil(r[0]/i)*i,r[1]=Math.floor(r[1]/i)*i+i*.5,r[2]=i,r}function pc(t,i){return n.range.apply(n,au(t,i))}function wc(t,i,u){var e=au(t,i),f,o;if(u){if(f=ps.exec(u),f.shift(),f[8]==="s")return o=n.formatPrefix(Math.max(r(e[0]),r(e[1]))),f[7]||(f[7]="."+be(o.scale(e[2]))),f[8]="f",u=n.format(f.join("")),function(n){return u(o.scale(n))+o.symbol};f[7]||(f[7]="."+urt(f[8],e));u=f.join("")}else u=",."+be(e[2])+"f";return n.format(u)}function be(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function urt(n,t){var i=be(t[2]);return n in ub?Math.abs(i-be(Math.max(r(t[0]),r(t[1]))))+ +(n!=="e"):i-(n==="%")*2}function fb(t,i,r,u){function e(n){return(r?Math.log(n<0?0:n):-Math.log(n>0?0:-n))/Math.log(i)}function o(n){return r?Math.pow(i,n):-Math.pow(i,-n)}function f(n){return t(e(n))}return f.invert=function(n){return o(t.invert(n))},f.domain=function(n){return arguments.length?(r=n[0]>=0,t.domain((u=n.map(Number)).map(e)),f):u},f.base=function(n){return arguments.length?(i=+n,t.domain(u.map(e)),f):i},f.nice=function(){var n=vc(u.map(e),r?Math:eb);return t.domain(n),u=n.map(o),f},f.ticks=function(){var h=lr(u),t=[],c=h[0],l=h[1],n=Math.floor(e(c)),s=Math.ceil(e(l)),a=i%1?2:i,f;if(isFinite(s-n)){if(r){for(;n<s;n++)for(f=1;f<a;f++)t.push(o(n)*f);t.push(o(n))}else for(t.push(o(n));n++<s;)for(f=a-1;f>0;f--)t.push(o(n)*f);for(n=0;t[n]<c;n++);for(s=t.length;t[s-1]>l;s--);t=t.slice(n,s)}return t},f.tickFormat=function(t,i){if(!arguments.length)return bc;arguments.length<2?i=bc:typeof i!="function"&&(i=n.format(i));var s=Math.max(.1,t/f.ticks().length),h=r?(u=1e-12,Math.ceil):(u=-1e-12,Math.floor),u;return function(n){return n/o(h(e(n)+u))<=s?i(n):""}},f.copy=function(){return fb(t.copy(),i,r,u)},yc(f,t)}function ob(n,t,i){function r(t){return n(u(t))}var u=ke(t),f=ke(1/t);return r.invert=function(t){return f(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((i=t.map(Number)).map(u)),r):i},r.ticks=function(n){return pc(i,n)},r.tickFormat=function(n,t){return wc(i,n,t)},r.nice=function(n){return r.domain(rb(i,n))},r.exponent=function(e){return arguments.length?(u=ke(t=e),f=ke(1/t),n.domain(i.map(u)),r):t},r.copy=function(){return ob(n.copy(),t,i)},yc(r,n)}function ke(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function sb(t,i){function r(n){return u[((e.get(n)||(i.t==="range"?e.set(n,t.push(n)):NaN))-1)%u.length]}function o(i,r){return n.range(t.length).map(function(n){return i+r*n})}var e,u,f;return r.domain=function(n){if(!arguments.length)return t;t=[];e=new at;for(var f=-1,o=n.length,u;++f<o;)e.has(u=n[f])||e.set(u,t.push(u));return r[i.t].apply(r,i.a)},r.range=function(n){return arguments.length?(u=n,f=0,i={t:"range",a:arguments},r):u},r.rangePoints=function(n,e){arguments.length<2&&(e=0);var s=n[0],h=n[1],c=t.length<2?(s=(s+h)/2,0):(h-s)/(t.length-1+e);return u=o(s+c*e/2,c),f=0,i={t:"rangePoints",a:arguments},r},r.rangeRoundPoints=function(n,e){arguments.length<2&&(e=0);var s=n[0],h=n[1],c=t.length<2?(s=h=Math.round((s+h)/2),0):(h-s)/(t.length-1+e)|0;return u=o(s+Math.round(c*e/2+(h-s-(t.length-1+e)*c)/2),c),f=0,i={t:"rangeRoundPoints",a:arguments},r},r.rangeBands=function(n,e,s){arguments.length<2&&(e=0);arguments.length<3&&(s=e);var h=n[1]<n[0],l=n[+h],a=n[1-h],c=(a-l)/(t.length-e+2*s);return u=o(l+c*s,c),h&&u.reverse(),f=c*(1-e),i={t:"rangeBands",a:arguments},r},r.rangeRoundBands=function(n,e,s){arguments.length<2&&(e=0);arguments.length<3&&(s=e);var h=n[1]<n[0],c=n[+h],a=n[1-h],l=Math.floor((a-c)/(t.length-e+2*s));return u=o(c+Math.round((a-c-(t.length-e)*l)/2),l),h&&u.reverse(),f=Math.round(l*(1-e)),i={t:"rangeRoundBands",a:arguments},r},r.rangeBand=function(){return f},r.rangeExtent=function(){return lr(i.a[0])},r.copy=function(){return sb(t,i)},r.domain(t)}function hb(t,i){function f(){var f=0,e=i.length;for(r=[];++f<e;)r[f-1]=n.quantile(t,f/e);return u}function u(t){if(!isNaN(t=+t))return i[n.bisect(r,t)]}var r;return u.domain=function(n){return arguments.length?(t=n.map(ar).filter(si).sort(gi),f()):t},u.range=function(n){return arguments.length?(i=n,f()):i},u.quantiles=function(){return r},u.invertExtent=function(n){return n=i.indexOf(n),n<0?[NaN,NaN]:[n>0?r[n-1]:t[0],n<r.length?r[n]:t[t.length-1]]},u.copy=function(){return hb(t,i)},f()}function cb(n,t,i){function r(t){return i[Math.max(0,Math.min(e,Math.floor(u*(t-n))))]}function f(){return u=i.length/(t-n),e=i.length-1,r}var u,e;return r.domain=function(i){return arguments.length?(n=+i[0],t=+i[i.length-1],f()):[n,t]},r.range=function(n){return arguments.length?(i=n,f()):i},r.invertExtent=function(t){return t=i.indexOf(t),t=t<0?NaN:t/u+n,[t,t+1/u]},r.copy=function(){return cb(n,t,i)},f()}function lb(t,i){function r(r){if(r<=r)return i[n.bisect(t,r)]}return r.domain=function(n){return arguments.length?(t=n,r):t},r.range=function(n){return arguments.length?(i=n,r):i},r.invertExtent=function(n){return n=i.indexOf(n),[t[n-1],t[n]]},r.copy=function(){return lb(t,i)},r}function ab(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(i){return arguments.length?(n=i.map(t),t):n},t.ticks=function(t){return pc(n,t)},t.tickFormat=function(t,i){return wc(n,t,i)},t.copy=function(){return ab(n)},t}function hrt(){return 0}function crt(n){return n.innerRadius}function lrt(n){return n.outerRadius}function vb(n){return n.startAngle}function yb(n){return n.endAngle}function art(n){return n&&n.padAngle}function de(n,t,i,r){return(n-i)*t-(t-r)*n>0?0:1}function ge(n,t,i,r,u){var v=n[0]-t[0],y=n[1]-t[1],nt=(u?r:-r)/Math.sqrt(v*v+y*y),p=nt*y,w=-nt*v,b=n[0]+p,k=n[1]+w,d=t[0]+p,g=t[1]+w,tt=(b+d)/2,it=(k+g)/2,e=d-b,f=g-k,s=e*e+f*f,h=i-r,o=b*g-d*k,c=(f<0?-1:1)*Math.sqrt(h*h*s-o*o),l=(o*f-e*c)/s,a=(-o*e-f*c)/s,rt=(o*f+e*c)/s,ut=(-o*e+f*c)/s,ft=l-tt,et=a-it,ot=rt-tt,st=ut-it;return ft*ft+et*et>ot*ot+st*st&&(l=rt,a=ut),[[l-p,a-w],[l*i/h,a*i/h]]}function pb(n){function t(t){function a(){c.push("M",i(n(e),s))}for(var c=[],e=[],h=-1,v=t.length,l,y=o(r),p=o(u);++h<v;)f.call(this,l=t[h],h)?e.push([+y.call(this,l,h),+p.call(this,l,h)]):e.length&&(a(),e=[]);return e.length&&a(),c.length?c.join(""):null}var r=er,u=iu,f=fr,i=g,e=i.key,s=.7;return t.x=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(u=n,t):u},t.defined=function(n){return arguments.length?(f=n,t):f},t.interpolate=function(n){return arguments.length?(e=typeof n=="function"?i=n:(i=no.get(n)||g).key,t):e},t.tension=function(n){return arguments.length?(s=n,t):s},t}function g(n){return n.join("L")}function vrt(n){return g(n)+"Z"}function yrt(n){for(var r=0,u=n.length,t=n[0],i=[t[0],",",t[1]];++r<u;)i.push("H",(t[0]+(t=n[r])[0])/2,"V",t[1]);return u>1&&i.push("H",t[0]),i.join("")}function kc(n){for(var i=0,u=n.length,t=n[0],r=[t[0],",",t[1]];++i<u;)r.push("V",(t=n[i])[1],"H",t[0]);return r.join("")}function dc(n){for(var i=0,u=n.length,t=n[0],r=[t[0],",",t[1]];++i<u;)r.push("H",(t=n[i])[0],"V",t[1]);return r.join("")}function prt(n,t){return n.length<4?g(n):n[1]+to(n.slice(1,-1),gc(n,t))}function wrt(n,t){return n.length<3?g(n):n[0]+to((n.push(n[0]),n),gc([n[n.length-2]].concat(n,[n[1]]),t))}function brt(n,t){return n.length<3?g(n):n[0]+to(n,gc(n,t))}function to(n,t){var o,h;if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return g(n);var c=n.length!=t.length,f="",s=n[0],i=n[1],e=t[0],r=e,u=1;if(c&&(f+="Q"+(i[0]-e[0]*2/3)+","+(i[1]-e[1]*2/3)+","+i[0]+","+i[1],s=n[1],u=2),t.length>1)for(r=t[1],i=n[u],u++,f+="C"+(s[0]+e[0])+","+(s[1]+e[1])+","+(i[0]-r[0])+","+(i[1]-r[1])+","+i[0]+","+i[1],o=2;o<t.length;o++,u++)i=n[u],r=t[o],f+="S"+(i[0]-r[0])+","+(i[1]-r[1])+","+i[0]+","+i[1];return c&&(h=n[u],f+="Q"+(i[0]+r[0]*2/3)+","+(i[1]+r[1]*2/3)+","+h[0]+","+h[1]),f}function gc(n,t){for(var u=[],f=(1-t)/2,r,e=n[0],i=n[1],o=1,s=n.length;++o<s;)r=e,e=i,i=n[o],u.push([f*(i[0]-r[0]),f*(i[1]-r[1])]);return u}function wb(n){if(n.length<3)return g(n);var o=1,s=n.length,t=n[0],i=t[0],r=t[1],u=[i,i,i,(t=n[1])[0]],f=[r,r,r,t[1]],e=[i,",",r,"L",it(oi,u),",",it(oi,f)];for(n.push(n[s-1]);++o<=s;)t=n[o],u.shift(),u.push(t[0]),f.shift(),f.push(t[1]),nl(e,u,f);return n.pop(),e.push("L",t),e.join("")}function krt(n){if(n.length<4)return g(n);for(var f=[],i=-1,e=n.length,t,r=[0],u=[0];++i<3;)t=n[i],r.push(t[0]),u.push(t[1]);for(f.push(it(oi,r)+","+it(oi,u)),--i;++i<e;)t=n[i],r.shift(),r.push(t[0]),u.shift(),u.push(t[1]),nl(f,r,u);return f.join("")}function drt(n){for(var f,i=-1,e=n.length,o=e+4,t,r=[],u=[];++i<4;)t=n[i%e],r.push(t[0]),u.push(t[1]);for(f=[it(oi,r),",",it(oi,u)],--i;++i<o;)t=n[i%e],r.shift(),r.push(t[0]),u.shift(),u.push(t[1]),nl(f,r,u);return f.join("")}function grt(n,t){var i=n.length-1;if(i)for(var e=n[0][0],o=n[0][1],s=n[i][0]-e,h=n[i][1]-o,u=-1,r,f;++u<=i;)r=n[u],f=u/i,r[0]=t*r[0]+(1-t)*(e+f*s),r[1]=t*r[1]+(1-t)*(o+f*h);return wb(n)}function it(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function nl(n,t,i){n.push("C",it(bb,t),",",it(bb,i),",",it(kb,t),",",it(kb,i),",",it(oi,t),",",it(oi,i))}function tl(n,t){return(t[1]-n[1])/(t[0]-n[0])}function nut(n){for(var t=0,e=n.length-1,i=[],f=n[0],r=n[1],u=i[0]=tl(f,r);++t<e;)i[t]=(u+(u=tl(f=r,r=n[t+1])))/2;return i[t]=u,i}function tut(n){for(var c=[],e,o,s,u,f=nut(n),i=-1,h=n.length-1;++i<h;)e=tl(n[i],n[i+1]),r(e)<t?f[i]=f[i+1]=0:(o=f[i]/e,s=f[i+1]/e,u=o*o+s*s,u>9&&(u=e*3/Math.sqrt(u),f[i]=u*o,f[i+1]=u*s));for(i=-1;++i<=h;)u=(n[Math.min(h,i+1)][0]-n[Math.max(0,i-1)][0])/(6*(1+f[i]*f[i])),c.push([u||0,f[i]*u||0]);return c}function iut(n){return n.length<3?g(n):n[0]+to(n,tut(n))}function db(n){for(var t,u=-1,f=n.length,i,r;++u<f;)t=n[u],i=t[0],r=t[1]-h,t[0]=i*Math.cos(r),t[1]=i*Math.sin(r);return n}function gb(n){function t(t){function d(){p.push("M",i(n(w),s),a,l(n(v.reverse()),s),"Z")}for(var p=[],v=[],w=[],c=-1,g=t.length,y,nt=o(f),tt=o(e),it=f===r?function(){return b}:o(r),rt=e===u?function(){return k}:o(u),b,k;++c<g;)h.call(this,y=t[c],c)?(v.push([b=+nt.call(this,y,c),k=+tt.call(this,y,c)]),w.push([+it.call(this,y,c),+rt.call(this,y,c)])):v.length&&(d(),v=[],w=[]);return v.length&&d(),p.length?p.join(""):null}var f=er,r=er,e=0,u=iu,h=fr,i=g,c=i.key,l=i,a="L",s=.7;return t.x=function(n){return arguments.length?(f=r=n,t):r},t.x0=function(n){return arguments.length?(f=n,t):f},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(e=u=n,t):u},t.y0=function(n){return arguments.length?(e=n,t):e},t.y1=function(n){return arguments.length?(u=n,t):u},t.defined=function(n){return arguments.length?(h=n,t):h},t.interpolate=function(n){return arguments.length?(c=typeof n=="function"?i=n:(i=no.get(n)||g).key,l=i.reverse||i,a=i.closed?"M":"L",t):c},t.tension=function(n){return arguments.length?(s=n,t):s},t}function rut(n){return n.radius}function nk(n){return[n.x,n.y]}function uut(n){return function(){var t=n.apply(this,arguments),i=t[0],r=t[1]-h;return[i*Math.cos(r),i*Math.sin(r)]}}function fut(){return 64}function eut(){return"circle"}function tk(n){var t=Math.sqrt(n/f);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function pu(n,t,i){return yr(n,a),n.namespace=t,n.id=i,n}function fl(n,t,i,r){var u=n.id,f=n.namespace;return vt(n,typeof i=="function"?function(n,e,o){n[f][u].tween.set(t,r(i.call(n,n.__data__,e,o)))}:(i=r(i),function(n){n[f][u].tween.set(t,i)}))}function out(n){return n==null&&(n=""),function(){this.textContent=n}}function ik(n){return n==null?"__transition__":"__transition_"+n+"__"}function ro(t,i,r,u,f){var o=t[r]||(t[r]={active:0,count:0}),e=o[u],s;e||(s=f.time,e=o[u]={tween:new at,time:s,delay:f.delay,duration:f.duration,ease:f.ease},f=null,++o.count,n.timer(function(f){function w(r){if(o.active>u)return v(!1);o.active=u;e.event&&e.event.start.call(t,h,i);e.tween.forEach(function(n,r){(r=r.call(t,h,i))&&a.push(r)});p=e.ease;y=e.duration;n.timer(function(){return l.c=b(r||1)?fr:b,1},0,s)}function b(n){if(o.active!==u)return v(!1);for(var i=n/y,f=p(i),r=a.length;r>0;)a[--r].call(t,f);if(i>=1)return v(!0)}function v(n){return e.event&&e.event[n?"end":"interrupt"].call(t,h,i),--o.count?delete o[u]:delete t[r],1}var h=t.__data__,c=e.delay,y,p,l=yt,a=[];if(l.t=c+s,c<=f)return w(f-c);l.c=w},0,s))}function sut(n,t,i){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:i(n))+",0)"})}function hut(n,t,i){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:i(n))+")"})}function hl(n){return n.toISOString()}function cl(t,i,r){function u(n){return t(n)}function f(t,r){var e=t[1]-t[0],f=e/r,u=n.bisect(uo,f);return u==uo.length?[i.year,au(t.map(function(n){return n/31536e6}),r)[2]]:u?i[f/uo[u-1]<uo[u]/f?u-1:u]:[aut,au(t,r)[2]]}return u.invert=function(n){return di(t.invert(n))},u.domain=function(n){return arguments.length?(t.domain(n),u):t.domain().map(di)},u.nice=function(n,t){function o(i){return!isNaN(i)&&!n.range(i,di(+i+1),t).length}var r=u.domain(),e=lr(r),i=n==null?f(e,10):typeof n=="number"&&f(e,n);return i&&(n=i[0],t=i[1]),u.domain(vc(r,t>1?{floor:function(t){while(o(t=n.floor(t)))t=di(t-1);return t},ceil:function(t){while(o(t=n.ceil(t)))t=di(+t+1);return t}}:n))},u.ticks=function(n,t){var i=lr(u.domain()),r=n==null?f(i,10):typeof n=="number"?f(i,n):!n.range&&[{range:n},t];return r&&(n=r[0],t=r[1]),n.range(i[0],di(+i[1]+1),t<1?1:t)},u.tickFormat=function(){return r},u.copy=function(){return cl(t.copy(),i,r)},yc(u,t)}function di(n){return new Date(n)}function vut(n){return JSON.parse(n.responseText)}function yut(n){var t=rt.createRange();return t.selectNode(rt.body),t.createContextualFragment(n.responseText)}var n={version:"3.5.0"},fo,r,bl,bu,so,ra,yr,e,du,et,bo,gu,nr,ka,tf,is,uf,rv,ff,ef,pr,wr,cf,lf,af,vf,yt,as,pv,ps,wv,i,y,st,ws,br,ks,ds,kf,ii,k,kr,re,ai,vi,wt,ri,ui,ht,rr,ur,fi,nt,ih,gr,uh,fh,bt,fe,ee,oe,se,ay,tt,lh,pi,ah,vh,yh,ph,wh,ru,or,wi,sr,gh,nc,uu,tc,su,ve,ye,ew,ec,cw,lw,tb,ub,bc,eb,vu,no,il,yu,rl,a,ul,ki,io,el,rk,al,ek;Date.now||(Date.now=function(){return+new Date});var vl=[].slice,dt=function(n){return vl.call(n)},rt=document,lt=rt.documentElement,p=window;try{dt(lt.childNodes)[0].nodeType}catch(put){dt=function(n){for(var t=n.length,i=new Array(t);t--;)i[t]=n[t];return i}}try{rt.createElement("div").style.setProperty("opacity",0,"")}catch(wut){var wu=p.Element.prototype,ok=wu.setAttribute,sk=wu.setAttributeNS,yl=p.CSSStyleDeclaration.prototype,hk=yl.setProperty;wu.setAttribute=function(n,t){ok.call(this,n,t+"")};wu.setAttributeNS=function(n,t,i){sk.call(this,n,t,i+"")};yl.setProperty=function(n,t,i){hk.call(this,n,t+"",i)}}n.ascending=gi;n.descending=function(n,t){return t<n?-1:t>n?1:t>=n?0:NaN};n.min=function(n,t){var r=-1,f=n.length,u,i;if(arguments.length===1){while(++r<f)if((i=n[r])!=null&&i>=i){u=i;break}while(++r<f)(i=n[r])!=null&&u>i&&(u=i)}else{while(++r<f)if((i=t.call(n,n[r],r))!=null&&i>=i){u=i;break}while(++r<f)(i=t.call(n,n[r],r))!=null&&u>i&&(u=i)}return u};n.max=function(n,t){var r=-1,f=n.length,u,i;if(arguments.length===1){while(++r<f)if((i=n[r])!=null&&i>=i){u=i;break}while(++r<f)(i=n[r])!=null&&i>u&&(u=i)}else{while(++r<f)if((i=t.call(n,n[r],r))!=null&&i>=i){u=i;break}while(++r<f)(i=t.call(n,n[r],r))!=null&&i>u&&(u=i)}return u};n.extent=function(n,t){var r=-1,e=n.length,u,i,f;if(arguments.length===1){while(++r<e)if((i=n[r])!=null&&i>=i){u=f=i;break}while(++r<e)(i=n[r])!=null&&(u>i&&(u=i),f<i&&(f=i))}else{while(++r<e)if((i=t.call(n,n[r],r))!=null&&i>=i){u=f=i;break}while(++r<e)(i=t.call(n,n[r],r))!=null&&(u>i&&(u=i),f<i&&(f=i))}return[u,f]};n.sum=function(n,t){var u=0,f=n.length,r,i=-1;if(arguments.length===1)while(++i<f)si(r=+n[i])&&(u+=r);else while(++i<f)si(r=+t.call(n,n[i],i))&&(u+=r);return u};n.mean=function(n,t){var f=0,e=n.length,r,i=-1,u=e;if(arguments.length===1)while(++i<e)si(r=ar(n[i]))?f+=r:--u;else while(++i<e)si(r=ar(t.call(n,n[i],i)))?f+=r:--u;if(u)return f/u};n.quantile=function(n,t){var u=(n.length-1)*t+1,i=Math.floor(u),r=+n[i-1],f=u-i;return f?r+f*(n[i]-r):r};n.median=function(t,i){var u=[],e=t.length,f,r=-1;if(arguments.length===1)while(++r<e)si(f=ar(t[r]))&&u.push(f);else while(++r<e)si(f=ar(i.call(t,t[r],r)))&&u.push(f);if(u.length)return n.quantile(u.sort(gi),.5)};fo=pl(gi);n.bisectLeft=fo.left;n.bisect=n.bisectRight=fo.right;n.bisector=function(n){return pl(n.length===1?function(t,i){return gi(n(t),i)}:n)};n.shuffle=function(n,t,i){(r=arguments.length)<3&&(i=n.length,r<2&&(t=0));for(var r=i-t,f,u;r;)u=Math.random()*r--|0,f=n[r+t],n[r+t]=n[u+t],n[u+t]=f;return n};n.permute=function(n,t){for(var i=t.length,r=new Array(i);i--;)r[i]=n[t[i]];return r};n.pairs=function(n){for(var t=0,i=n.length-1,f,r=n[0],u=new Array(i<0?0:i);t<i;)u[t]=[f=r,r=n[++t]];return u};n.zip=function(){var t,r,e;if(!(r=arguments.length))return[];for(var i=-1,u=n.min(arguments,ck),f=new Array(u);++i<u;)for(t=-1,e=f[i]=new Array(r);++t<r;)e[t]=arguments[t][i];return f};n.transpose=function(t){return n.zip.apply(n,t)};n.keys=function(n){var t=[];for(var i in n)t.push(i);return t};n.values=function(n){var t=[];for(var i in n)t.push(n[i]);return t};n.entries=function(n){var t=[];for(var i in n)t.push({key:i,value:n[i]});return t};n.merge=function(n){for(var t=n.length,i,e=-1,r=0,u,f;++e<t;)r+=n[e].length;for(u=new Array(r);--t>=0;)for(f=n[t],i=f.length;--i>=0;)u[--r]=f[i];return u};r=Math.abs;n.range=function(n,t,i){if(arguments.length<3&&(i=1,arguments.length<2&&(t=n,n=0)),(t-n)/i==Infinity)throw new Error("infinite range");var e=[],u=lk(r(i)),o=-1,f;if(n*=u,t*=u,i*=u,i<0)while((f=n+i*++o)>t)e.push(f/u);else while((f=n+i*++o)<t)e.push(f/u);return e};n.map=function(n,t){var r=new at,i,u,e,f;if(n instanceof at)n.forEach(function(n,t){r.set(n,t)});else if(Array.isArray(n))if(i=-1,u=n.length,arguments.length===1)while(++i<u)r.set(i,n[i]);else while(++i<u)r.set(t.call(n,e=n[i],i),e);else for(f in n)r.set(f,n[f]);return r};bl="__proto__";bu="\x00";wl(at,{has:kl,get:function(n){return this._[vr(n)]},set:function(n,t){return this._[vr(n)]=t},remove:dl,keys:gl,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:ku(t),value:this._[t]});return n},size:na,empty:ta,forEach:function(n){for(var t in this._)n.call(this,ku(t),this._[t])}});n.nest=function(){function r(n,e,o){if(o>=i.length)return f?f.call(t,e):u?e.sort(u):e;for(var l=-1,y=e.length,p=i[o++],a,s,h,c=new at,v;++l<y;)(v=c.get(a=p(s=e[l])))?v.push(s):c.set(a,[s]);return n?(s=n(),h=function(t,i){s.set(t,r(n,i,o))}):(s={},h=function(t,i){s[t]=r(n,i,o)}),c.forEach(h),s}function o(n,t){if(t>=i.length)return n;var r=[],u=e[t++];return n.forEach(function(n,i){r.push({key:n,values:o(i,t)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var t={},i=[],e=[],u,f;return t.map=function(n,t){return r(t,n,0)},t.entries=function(t){return o(r(n.map,t,0),0)},t.key=function(n){return i.push(n),t},t.sortKeys=function(n){return e[i.length-1]=n,t},t.sortValues=function(n){return u=n,t},t.rollup=function(n){return f=n,t},t};n.set=function(n){var i=new eo,t,r;if(n)for(t=0,r=n.length;t<r;++t)i.add(n[t]);return i};wl(eo,{has:kl,add:function(n){return this._[vr(n+="")]=!0,n},remove:dl,values:gl,size:na,empty:ta,forEach:function(n){for(var t in this._)n.call(this,ku(t))}});n.behavior={};n.rebind=function(n,t){for(var i=1,u=arguments.length,r;++i<u;)n[r=arguments[i]]=ak(n,t,t[r]);return n};so=["webkit","ms","moz","Moz","o","O"];n.dispatch=function(){for(var n=new ho,t=-1,i=arguments.length;++t<i;)n[arguments[t]]=ia(n);return n};ho.prototype.on=function(n,t){var r=n.indexOf("."),i="";if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n)return arguments.length<2?this[n].on(i):this[n].on(i,t);if(arguments.length===2){if(t==null)for(n in this)if(this.hasOwnProperty(n))this[n].on(i,null);return this}};n.event=null;n.requote=function(n){return n.replace(ra,"\\$&")};ra=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;yr={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var i in t)n[i]=t[i]};var ao=function(n,t){return t.querySelector(n)},vo=function(n,t){return t.querySelectorAll(n)},vk=lt.matches||lt[oo(lt,"matchesSelector")],ua=function(n,t){return vk.call(n,t)};typeof Sizzle=="function"&&(ao=function(n,t){return Sizzle(n,t)[0]||null},vo=Sizzle,ua=Sizzle.matchesSelector);n.selection=function(){return bo};e=n.selection.prototype=[];e.select=function(n){var o=[],i,f,e,t,r,s,u,h;for(n=yo(n),r=-1,s=this.length;++r<s;)for(o.push(i=[]),i.parentNode=(e=this[r]).parentNode,u=-1,h=e.length;++u<h;)(t=e[u])?(i.push(f=n.call(t,t.__data__,u,r)),f&&"__data__"in t&&(f.__data__=t.__data__)):i.push(null);return ni(o)};e.selectAll=function(n){var u=[],f,t,i,e;for(n=fa(n),i=-1,e=this.length;++i<e;)for(var o=this[i],r=-1,s=o.length;++r<s;)(t=o[r])&&(u.push(f=dt(n.call(t,t.__data__,r,i))),f.parentNode=t);return ni(u)};du={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};n.ns={prefix:du,qualify:function(n){var t=n.indexOf(":"),i=n;return t>=0&&(i=n.slice(0,t),n=n.slice(t+1)),du.hasOwnProperty(i)?{space:du[i],local:n}:n}};e.attr=function(t,i){if(arguments.length<2){if(typeof t=="string"){var r=this.node();return t=n.ns.qualify(t),t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(i in t)this.each(ea(i,t[i]));return this}return this.each(ea(t,i))};e.classed=function(n,t){if(arguments.length<2){if(typeof n=="string"){var r=this.node(),u=(n=ha(n)).length,i=-1;if(t=r.classList){while(++i<u)if(!t.contains(n[i]))return!1}else for(t=r.getAttribute("class");++i<u;)if(!sa(n[i]).test(t))return!1;return!0}for(t in n)this.each(ca(t,n[t]));return this}return this.each(ca(n,t))};e.style=function(n,t,i){var r=arguments.length;if(r<3){if(typeof n!="string"){r<2&&(t="");for(i in n)this.each(la(i,n[i],t));return this}if(r<2)return p.getComputedStyle(this.node(),null).getPropertyValue(n);i=""}return this.each(la(n,t,i))};e.property=function(n,t){if(arguments.length<2){if(typeof n=="string")return this.node()[n];for(t in n)this.each(aa(t,n[t]));return this}return this.each(aa(n,t))};e.text=function(n){return arguments.length?this.each(typeof n=="function"?function(){var t=n.apply(this,arguments);this.textContent=t==null?"":t}:n==null?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent};e.html=function(n){return arguments.length?this.each(typeof n=="function"?function(){var t=n.apply(this,arguments);this.innerHTML=t==null?"":t}:n==null?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML};e.append=function(n){return n=va(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})};e.insert=function(n,t){return n=va(n),t=yo(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})};e.remove=function(){return this.each(pk)};e.data=function(n,t){function o(n,i){var r,e=n.length,a=i.length,b=Math.min(e,a),v=new Array(a),o=new Array(a),y=new Array(e),u,c,l,w,p;if(t){for(l=new at,w=new Array(e),r=-1;++r<e;)l.has(p=t.call(u=n[r],u.__data__,r))?y[r]=u:l.set(p,u),w[r]=p;for(r=-1;++r<a;)(u=l.get(p=t.call(i,c=i[r],r)))?u!==!0&&(v[r]=u,u.__data__=c):o[r]=po(c),l.set(p,!0);for(r=-1;++r<e;)l.get(w[r])!==!0&&(y[r]=n[r])}else{for(r=-1;++r<b;)u=n[r],c=i[r],u?(u.__data__=c,v[r]=u):o[r]=po(c);for(;r<a;++r)o[r]=po(i[r]);for(;r<e;++r)y[r]=n[r]}o.update=v;o.parentNode=v.parentNode=y.parentNode=n.parentNode;s.push(o);f.push(v);h.push(y)}var i=-1,u=this.length,r,e;if(!arguments.length){for(n=new Array(u=(r=this[0]).length);++i<u;)(e=r[i])&&(n[i]=e.__data__);return n}var s=pa([]),f=ni([]),h=ni([]);if(typeof n=="function")while(++i<u)o(r=this[i],n.call(r,r.parentNode.__data__,i));else while(++i<u)o(r=this[i],n);return f.enter=function(){return s},f.exit=function(){return h},f};e.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")};e.filter=function(n){var e=[],u,f,r,t,o,i,s;for(typeof n!="function"&&(n=ya(n)),t=0,o=this.length;t<o;t++)for(e.push(u=[]),u.parentNode=(f=this[t]).parentNode,i=0,s=f.length;i<s;i++)(r=f[i])&&n.call(r,r.__data__,i,t)&&u.push(r);return ni(e)};e.order=function(){for(var i=-1,f=this.length;++i<f;)for(var r=this[i],u=r.length-1,n=r[u],t;--u>=0;)(t=r[u])&&(n&&n!==t.nextSibling&&n.parentNode.insertBefore(t,n),n=t);return this};e.sort=function(n){n=wk.apply(this,arguments);for(var t=-1,i=this.length;++t<i;)this[t].sort(n);return this.order()};e.each=function(n){return vt(this,function(t,i,r){n.call(t,t.__data__,i,r)})};e.call=function(n){var t=dt(arguments);return n.apply(t[0]=this,t),this};e.empty=function(){return!this.node()};e.node=function(){for(var i,n=0,r=this.length;n<r;n++)for(var u=this[n],t=0,f=u.length;t<f;t++)if(i=u[t],i)return i;return null};e.size=function(){var n=0;return vt(this,function(){++n}),n};et=[];n.selection.enter=pa;n.selection.enter.prototype=et;et.append=e.append;et.empty=e.empty;et.node=e.node;et.call=e.call;et.size=e.size;et.select=function(n){for(var i,h,e=[],r,o,s,t,u,f=-1,c=this.length;++f<c;)for(s=(t=this[f]).update,e.push(r=[]),r.parentNode=t.parentNode,i=-1,h=t.length;++i<h;)(u=t[i])?(r.push(s[i]=o=n.call(t.parentNode,u.__data__,i,f)),o.__data__=u.__data__):r.push(null);return ni(e)};et.insert=function(n,t){return arguments.length<2&&(t=bk(this)),e.insert.call(this,n,t)};e.transition=function(n){for(var r=ki||++ul,u=ik(n),f=[],e,t,h=io||{time:Date.now(),ease:ntt,delay:0,duration:250},o=-1,c=this.length;++o<c;){f.push(e=[]);for(var s=this[o],i=-1,l=s.length;++i<l;)(t=s[i])&&ro(t,i,u,r,h),e.push(t)}return pu(f,u,r)};e.interrupt=function(n){var t=ik(n);return this.each(function(){var n=this[t];n&&++n.active})};n.select=function(n){var t=[typeof n=="string"?ao(n,rt):n];return t.parentNode=lt,ni([t])};n.selectAll=function(n){var t=dt(typeof n=="string"?vo(n,rt):n);return t.parentNode=lt,ni([t])};bo=n.select(lt);e.on=function(n,t,i){var r=arguments.length;if(r<3){if(typeof n!="string"){r<2&&(t=!1);for(i in n)this.each(wa(i,n[i],t));return this}if(r<2)return(r=this.node()["__on"+n])&&r._;i=!1}return this.each(wa(n,t,i))};gu=n.map({mouseenter:"mouseover",mouseleave:"mouseout"});gu.forEach(function(n){"on"+n in rt&&gu.remove(n)});nr="onselectstart"in rt?null:oo(lt.style,"userSelect");ka=0;n.mouse=function(n){return ko(n,co())};tf=/WebKit/.test(p.navigator.userAgent)?-1:0;n.touch=function(n,t,i){if(arguments.length<3&&(i=t,t=co().changedTouches),t)for(var r=0,f=t.length,u;r<f;++r)if((u=t[r]).identifier===i)return ko(n,u)};n.behavior.drag=function(){function i(){this.on("mousedown.drag",f).on("touchstart.drag",e)}function u(i,u,f,e,o){return function(){function d(){var n=u(v,h),t,i;n&&(t=n[0]-c[0],i=n[1]-c[1],p|=t|i,c=n,y({type:"drag",x:n[0]+s[0],y:n[1]+s[1],dx:t,dy:i}))}function g(){if(u(v,h)){b.on(e+l,null).on(o+l,null);k(p&&n.event.target===w);y({type:"dragend"})}}var a=this,w=n.event.target,v=a.parentNode,y=r.of(a,arguments),p=0,h=i(),l=".drag"+(h==null?"":"-"+h),s,b=n.select(f()).on(e+l,d).on(o+l,g),k=nf(),c=u(v,h);t?(s=t.apply(a,arguments),s=[s.x-c[0],s.y-c[1]]):s=[0,0];y({type:"dragstart"})}}var r=lo(i,"drag","dragstart","dragend"),t=null,f=u(l,n.mouse,nd,"mousemove","mouseup"),e=u(dk,n.touch,gk,"touchmove","touchend");return i.origin=function(n){return arguments.length?(t=n,i):t},n.rebind(i,r,"on")};n.touches=function(n,t){return arguments.length<2&&(t=co().touches),t?dt(t).map(function(t){var i=ko(n,t);return i.identifier=t.identifier,i}):[]};var t=1e-6,go=t*t,f=Math.PI,d=2*f,td=d-t,h=f/2,u=f/180,s=180/f;var rf=Math.SQRT2,ts=2,iv=4;n.interpolateZoom=function(n,t){function p(n){var t=n*y,r,h;return v?(r=nv(u),h=i/(ts*c)*(r*rd(rf*t+u)-id(u)),[o+h*f,s+h*e,i*r/nv(rf*t+u)]):[o+n*f,s+n*e,i*Math.exp(rf*t)]}var o=n[0],s=n[1],i=n[2],w=t[0],b=t[1],r=t[2],f=w-o,e=b-s,h=f*f+e*e,c=Math.sqrt(h),l=(r*r-i*i+iv*h)/(2*i*ts*c),a=(r*r-i*i-iv*h)/(2*r*ts*c),u=Math.log(Math.sqrt(l*l+1)-l),k=Math.log(Math.sqrt(a*a+1)-a),v=k-u,y=(v||Math.log(r/i))/rf;return p.duration=y*1e3,p};n.behavior.zoom=function(){function i(n){n.on(k,ht).on(rv+".zoom",at).on("dblclick.zoom",vt).on(d,ct)}function y(n){return[(n[0]-t.x)/t.k,(n[1]-t.y)/t.k]}function lt(n){return[n[0]*t.k+t.x,n[1]*t.k+t.y]}function it(n){t.k=Math.max(h[0],Math.min(h[1],n))}function w(n,i){i=lt(i);t.x+=n[0]-i[0];t.y+=n[1]-i[1]}function st(u,f,e,o){u.__chart__={x:t.x,y:t.y,k:t.k};it(Math.pow(2,o));w(r=f,e);u=n.select(u);c>0&&(u=u.transition().duration(c));u.call(i.event)}function rt(){a&&a.domain(nt.range().map(function(n){return(n-t.x)/t.k}).map(nt.invert));v&&v.domain(tt.range().map(function(n){return(n-t.y)/t.k}).map(tt.invert))}function e(n){ft++||n({type:"zoomstart"})}function o(n){rt();n({type:"zoom",scale:t.k,translate:[t.x,t.y]})}function u(n){--ft||n({type:"zoomend"});r=null}function ht(){function a(){r=1;w(n.mouse(t),c);o(i)}function v(){h.on(et,null).on(ot,null);l(r&&n.event.target===s);u(i)}var t=this,s=n.event.target,i=f.of(t,arguments),r=0,h=n.select(p).on(et,a).on(ot,v),c=y(n.mouse(t)),l=nf();wo(t);e(i)}function ct(){function p(){var u=n.touches(r);return l=t.k,u.forEach(function(n){n.identifier in i&&(i[n.identifier]=y(n))}),u}function b(){var c=n.event.target,o,e,l,u,s,f;n.select(c).on(nt,ut).on(tt,ft);for(a.push(c),o=n.event.changedTouches,e=0,l=o.length;e<l;++e)i[o[e].identifier]=null;if(u=p(),s=Date.now(),u.length===1)s-g<500&&(f=u[0],st(r,f,i[f.identifier],Math.floor(Math.log(t.k)/Math.LN2)+1),gt()),g=s;else if(u.length>1){var f=u[0],v=u[1],y=f[0]-v[0],w=f[1]-v[1];h=y*y+w*w}}function ut(){var v=n.touches(r),t,f,u,e,a,y,c,p;for(wo(r),a=0,y=v.length;a<y;++a,e=null)if(u=v[a],e=i[u.identifier]){if(f)break;t=u;f=e}e&&(c=(c=u[0]-t[0])*c+(c=u[1]-t[1])*c,p=h&&Math.sqrt(c/h),t=[(t[0]+u[0])/2,(t[1]+u[1])/2],f=[(f[0]+e[0])/2,(f[1]+e[1])/2],it(p*l));g=null;w(t,f);o(s)}function ft(){var r,t,f,e;if(n.event.touches.length){for(r=n.event.changedTouches,t=0,f=r.length;t<f;++t)delete i[r[t].identifier];for(e in i)return void p()}n.selectAll(a).on(c,null);v.on(k,ht).on(d,ct);rt();u(s)}var r=this,s=f.of(r,arguments),i={},h=0,l,c=".zoom-"+n.event.changedTouches[0].identifier,nt="touchmove"+c,tt="touchend"+c,a=[],v=n.select(r),rt=nf();b();e(s);v.on(k,null).on(d,b)}function at(){var i=f.of(this,arguments);l?clearTimeout(l):(ut=y(r=b||n.mouse(this)),wo(this),e(i));l=setTimeout(function(){l=null;u(i)},50);gt();it(Math.pow(2,uf()*.002)*t.k);w(r,ut);o(i)}function vt(){var i=n.mouse(this),r=Math.log(t.k)/Math.LN2;st(this,i,y(i),n.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)}var t={x:0,y:0,k:1},ut,r,b,s=[960,500],h=is,c=250,ft=0,k="mousedown.zoom",et="mousemove.zoom",ot="mouseup.zoom",l,d="touchstart.zoom",g,f=lo(i,"zoomstart","zoom","zoomend"),nt,a,tt,v;return i.event=function(i){i.each(function(){var i=f.of(this,arguments),h=t;ki?n.select(this).transition().each("start.zoom",function(){t=this.__chart__||{x:0,y:0,k:1};e(i)}).tween("zoom:zoom",function(){var u=s[0],c=s[1],f=r?r[0]:u/2,e=r?r[1]:c/2,l=n.interpolateZoom([(f-t.x)/t.k,(e-t.y)/t.k,u/t.k],[(f-h.x)/h.k,(e-h.y)/h.k,u/h.k]);return function(n){var r=l(n),s=u/r[2];this.__chart__=t={x:f-r[0]*s,y:e-r[1]*s,k:s};o(i)}}).each("interrupt.zoom",function(){u(i)}).each("end.zoom",function(){u(i)}):(this.__chart__=t,e(i),o(i),u(i))})},i.translate=function(n){return arguments.length?(t={x:+n[0],y:+n[1],k:t.k},rt(),i):[t.x,t.y]},i.scale=function(n){return arguments.length?(t={x:t.x,y:t.y,k:+n},rt(),i):t.k},i.scaleExtent=function(n){return arguments.length?(h=n==null?is:[+n[0],+n[1]],i):h},i.center=function(n){return arguments.length?(b=n&&[+n[0],+n[1]],i):b},i.size=function(n){return arguments.length?(s=n&&[+n[0],+n[1]],i):s},i.duration=function(n){return arguments.length?(c=+n,i):c},i.x=function(n){return arguments.length?(a=n,nt=n.copy(),t={x:0,y:0,k:1},i):a},i.y=function(n){return arguments.length?(v=n,tt=n.copy(),t={x:0,y:0,k:1},i):v},n.rebind(i,f,"on")};is=[0,Infinity];rv="onwheel"in rt?(uf=function(){return-n.event.deltaY*(n.event.deltaMode?120:1)},"wheel"):"onmousewheel"in rt?(uf=function(){return n.event.wheelDelta},"mousewheel"):(uf=function(){return-n.event.detail},"MozMousePixelScroll");n.color=hi;hi.prototype.toString=function(){return this.rgb()+""};n.hsl=ot;ff=ot.prototype=new hi;ff.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new ot(this.h,this.s,this.l/n)};ff.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new ot(this.h,this.s,n*this.l)};ff.rgb=function(){return rs(this.h,this.s,this.l)};n.hcl=ut;ef=ut.prototype=new hi;ef.brighter=function(n){return new ut(this.h,this.c,Math.min(100,this.l+of*(arguments.length?n:1)))};ef.darker=function(n){return new ut(this.h,this.c,Math.max(0,this.l-of*(arguments.length?n:1)))};ef.rgb=function(){return us(this.h,this.c,this.l).rgb()};n.lab=ft;var of=18,uv=.95047,fv=1,ev=1.08883,fs=ft.prototype=new hi;fs.brighter=function(n){return new ft(Math.min(100,this.l+of*(arguments.length?n:1)),this.a,this.b)};fs.darker=function(n){return new ft(Math.max(0,this.l-of*(arguments.length?n:1)),this.a,this.b)};fs.rgb=function(){return ov(this.l,this.a,this.b)};n.rgb=b;pr=b.prototype=new hi;pr.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var i=this.r,r=this.g,u=this.b,t=30;return!i&&!r&&!u?new b(t,t,t):(i&&i<t&&(i=t),r&&r<t&&(r=t),u&&u<t&&(u=t),new b(Math.min(255,i/n),Math.min(255,r/n),Math.min(255,u/n)))};pr.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new b(n*this.r,n*this.g,n*this.b)};pr.hsl=function(){return lv(this.r,this.g,this.b)};pr.toString=function(){return"#"+tr(this.r)+tr(this.g)+tr(this.b)};wr=n.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});wr.forEach(function(n,t){wr.set(n,hv(t))});n.functor=o;n.xhr=ls(v);n.dsv=function(n,t){function i(n,i,r){arguments.length<3&&(r=i,i=null);var e=hf(n,t,i==null?u:f(i),r);return e.row=function(n){return arguments.length?e.response((i=n)==null?u:f(n)):i},e}function u(n){return i.parse(n.responseText)}function f(n){return function(t){return i.parse(t.responseText,n)}}function s(t){return t.map(r).join(n)}function r(n){return e.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var e=new RegExp('["'+n+"\n]"),o=n.charCodeAt(0);return i.parse=function(n,t){var r;return i.parseRows(n,function(n,i){if(r)return r(n,i-1);var u=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,i){return t(u(n),i)}:u})},i.parseRows=function(n,t){function l(){var f,t,u,c;if(i>=s)return e;if(r)return r=!1,h;if(f=i,n.charCodeAt(f)===34){for(t=f;t++<s;)if(n.charCodeAt(t)===34){if(n.charCodeAt(t+1)!==34)break;++t}return i=t+2,u=n.charCodeAt(t+1),u===13?(r=!0,n.charCodeAt(t+2)===10&&++i):u===10&&(r=!0),n.slice(f+1,t).replace(/""/g,'"')}while(i<s){if(u=n.charCodeAt(i++),c=1,u===10)r=!0;else if(u===13)r=!0,n.charCodeAt(i)===10&&(++i,++c);else if(u!==o)continue;return n.slice(f,i-c)}return n.slice(f)}for(var h={},e={},c=[],s=n.length,i=0,a=0,u,r,f;(u=l())!==e;){for(f=[];u!==h&&u!==e;)f.push(u),u=l();t&&(f=t(f,a++))==null||c.push(f)}return c},i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var f=new eo,u=[];return t.forEach(function(n){for(var t in n)f.has(t)||u.push(f.add(t))}),[u.map(r).join(n)].concat(t.map(function(t){return u.map(function(n){return r(t[n])}).join(n)})).join("\n")},i.formatRows=function(n){return n.map(s).join("\n")},i};n.csv=n.dsv(",","text/csv");n.tsv=n.dsv("\t","text/tab-separated-values");as=p[oo(p,"requestAnimationFrame")]||function(n){setTimeout(n,17)};n.timer=function(n,t,i){var u=arguments.length,f,r;u<2&&(t=0);u<3&&(i=Date.now());f=i+t;r={c:n,t:f,f:!1,n:null};lf?lf.n=r:cf=r;lf=r;af||(vf=clearTimeout(vf),af=1,as(vs))};n.timer.flush=function(){vv();yv()};n.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};pv=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(ed);n.formatPrefix=function(t,i){var r=0;return t&&(t<0&&(t*=-1),i&&(t=n.round(t,ys(t,i))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,Math.floor((r-1)/3)*3))),pv[8+r/3]};ps=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;wv=n.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(t,i){return(t=n.round(t,ys(t,i))).toFixed(Math.max(0,Math.min(20,ys(t*(1+1e-15),i))))}});i=n.time={};y=Date;pt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){st.setUTCDate.apply(this._,arguments)},setDay:function(){st.setUTCDay.apply(this._,arguments)},setFullYear:function(){st.setUTCFullYear.apply(this._,arguments)},setHours:function(){st.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){st.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){st.setUTCMinutes.apply(this._,arguments)},setMonth:function(){st.setUTCMonth.apply(this._,arguments)},setSeconds:function(){st.setUTCSeconds.apply(this._,arguments)},setTime:function(){st.setTime.apply(this._,arguments)}};st=Date.prototype;i.year=ci(function(n){return n=i.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()});i.years=i.year.range;i.years.utc=i.year.utc.range;i.day=ci(function(n){var t=new y(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1});i.days=i.day.range;i.days.utc=i.day.utc.range;i.dayOfYear=function(n){var t=i.year(n);return Math.floor((n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var r=i[n]=ci(function(n){return(n=i.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+Math.floor(t)*7)},function(n){var r=i.year(n).getDay();return Math.floor((i.dayOfYear(n)+(r+t)%7)/7)-(r!==t)});i[n+"s"]=r.range;i[n+"s"].utc=r.utc.range;i[n+"OfYear"]=function(n){var r=i.year(n).getDay();return Math.floor((i.dayOfYear(n)+(r+t)%7)/7)}});i.week=i.sunday;i.weeks=i.sunday.range;i.weeks.utc=i.sunday.utc.range;i.weekOfYear=i.sundayOfYear;var bv={"-":"",_:" ","0":"0"},c=/^\s*\d+/,kv=/^%/;n.locale=function(n){return{numberFormat:od(n),timeFormat:hd(n)}};ws=n.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});n.format=ws.numberFormat;n.geo={};bs.prototype={s:0,t:0,add:function(n){ny(n,this.t,br);ny(br.s,this.s,this);this.s?this.t+=br.t:this.s=br.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};br=new bs;n.geo.stream=function(n,t){n&&ks.hasOwnProperty(n.type)?ks[n.type](n,t):bf(n,t)};ks={Feature:function(n,t){bf(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,r=-1,u=i.length;++r<u;)bf(i[r].geometry,t)}};ds={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates;t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)n=i[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){gs(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)gs(i[r],t,0)},Polygon:function(n,t){ty(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)ty(i[r],t)},GeometryCollection:function(n,t){for(var i=n.geometries,r=-1,u=i.length;++r<u;)bf(i[r],t)}};n.geo.area=function(t){return kf=0,n.geo.stream(t,k),kf};ii=new bs;k={sphere:function(){kf+=4*f},point:l,lineStart:l,lineEnd:l,polygonStart:function(){ii.reset();k.lineStart=ug},polygonEnd:function(){var n=2*ii;kf+=n<0?4*f+n:n;k.lineStart=k.lineEnd=k.point=l}};n.geo.bounds=function(){function w(n,t){v.push(l=[i=n,f=n]);t<o&&(o=t);t>h&&(h=t)}function g(n,t){var d=li([n*u,t*u]),v;if(y){var b=ir(y,d),nt=[b[1],-b[0],0],c=ir(nt,b);ne(c);c=te(c);var g=n-a,p=g>0?1:-1,l=c[0]*s*p,k=r(g)>180;k^(p*a<l&&l<p*n)?(v=c[1]*s,v>h&&(h=v)):(l=(l+360)%360-180,k^(p*a<l&&l<p*n))?(v=-c[1]*s,v<o&&(o=v)):(t<o&&(o=t),t>h&&(h=t));k?n<a?e(i,n)>e(i,f)&&(f=n):e(n,f)>e(i,f)&&(i=n):f>=i?(n<i&&(i=n),n>f&&(f=n)):n>a?e(i,n)>e(i,f)&&(f=n):e(n,f)>e(i,f)&&(i=n)}else w(n,t);y=d;a=n}function nt(){c.point=g}function tt(){l[0]=i;l[1]=f;c.point=w;y=null}function it(n,t){if(y){var i=n-a;p+=r(i)>180?i+(i>0?360:-360):i}else b=n,d=t;k.point(n,t);g(n,t)}function ut(){k.lineStart()}function ft(){it(b,d);k.lineEnd();r(p)>t&&(i=-(f=180));l[0]=i;l[1]=f;y=null}function e(n,t){return(t-=n)<0?t+360:t}function et(n,t){return n[0]-t[0]}function rt(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var i,o,f,h,a,b,d,y,p,v,l,c={point:w,lineStart:nt,lineEnd:tt,polygonStart:function(){c.point=it;c.lineStart=ut;c.lineEnd=ft;p=0;k.polygonStart()},polygonEnd:function(){k.polygonEnd();c.point=w;c.lineStart=nt;c.lineEnd=tt;ii<0?(i=-(f=180),o=-(h=90)):p>t?h=90:p<-t&&(o=-90);l[0]=i;l[1]=f}};return function(t){var a,p,w;if(h=f=-(i=o=Infinity),v=[],n.geo.stream(t,c),a=v.length,a){v.sort(et);for(var s=1,r=v[0],u,y=[r];s<a;++s)u=v[s],rt(u[0],r)||rt(u[1],r)?(e(r[0],u[1])>e(r[0],r[1])&&(r[1]=u[1]),e(u[0],r[1])>e(r[0],r[1])&&(r[0]=u[0])):y.push(r=u);p=-Infinity;for(var a=y.length-1,s=0,r=y[a],u;s<=a;r=u,++s)u=y[s],(w=e(r[1],u[0]))>p&&(p=w,i=u[0],f=r[1])}return v=l=null,i===Infinity||o===Infinity?[[NaN,NaN],[NaN,NaN]]:[[i,o],[f,h]]}}();n.geo.centroid=function(i){kr=re=ai=vi=wt=ri=ui=ht=rr=ur=fi=0;n.geo.stream(i,nt);var r=rr,u=ur,f=fi,e=r*r+u*u+f*f;return e<go&&(r=ri,u=ui,f=ht,re<t&&(r=ai,u=vi,f=wt),e=r*r+u*u+f*f,e<go)?[NaN,NaN]:[Math.atan2(u,r)*s,ti(f/Math.sqrt(e))*s]};nt={sphere:l,point:th,lineStart:iy,lineEnd:ry,polygonStart:function(){nt.lineStart=fg},polygonEnd:function(){nt.lineStart=iy}};ih=oy(fr,sg,cg,[-f,-f/2]);gr=1e9;n.geo.clipExtent=function(){var t,i,r,u,n,f,e={stream:function(t){return n&&(n.valid=!1),n=f(t),n.valid=!0,n},extent:function(o){return arguments.length?(f=cy(t=+o[0][0],i=+o[0][1],r=+o[1][0],u=+o[1][1]),n&&(n.valid=!1,n=null),e):[[t,i],[r,u]]}};return e.extent([[0,0],[960,500]])};(n.geo.conicEqualArea=function(){return rh(ly)}).raw=ly;n.geo.albers=function(){return n.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};n.geo.albersUsa=function(){function r(n){var t=n[0],i=n[1];return e=null,(s(t,i),e)||(h(t,i),e)||c(t,i),e}var i=n.geo.albers(),u=n.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),f=n.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),e,o={point:function(n,t){e=[n,t]}},s,h,c;return r.invert=function(n){var e=i.scale(),o=i.translate(),t=(n[0]-o[0])/e,r=(n[1]-o[1])/e;return(r>=.12&&r<.234&&t>=-.425&&t<-.214?u:r>=.166&&r<.234&&t>=-.214&&t<-.115?f:i).invert(n)},r.stream=function(n){var t=i.stream(n),r=u.stream(n),e=f.stream(n);return{point:function(n,i){t.point(n,i);r.point(n,i);e.point(n,i)},sphere:function(){t.sphere();r.sphere();e.sphere()},lineStart:function(){t.lineStart();r.lineStart();e.lineStart()},lineEnd:function(){t.lineEnd();r.lineEnd();e.lineEnd()},polygonStart:function(){t.polygonStart();r.polygonStart();e.polygonStart()},polygonEnd:function(){t.polygonEnd();r.polygonEnd();e.polygonEnd()}}},r.precision=function(n){return arguments.length?(i.precision(n),u.precision(n),f.precision(n),r):i.precision()},r.scale=function(n){return arguments.length?(i.scale(n),u.scale(n*.35),f.scale(n),r.translate(i.translate())):i.scale()},r.translate=function(n){if(!arguments.length)return i.translate();var e=i.scale(),l=+n[0],a=+n[1];return s=i.translate(n).clipExtent([[l-.455*e,a-.238*e],[l+.455*e,a+.238*e]]).stream(o).point,h=u.translate([l-.307*e,a+.201*e]).clipExtent([[l-.425*e+t,a+.12*e+t],[l-.214*e-t,a+.234*e-t]]).stream(o).point,c=f.translate([l-.205*e,a+.212*e]).clipExtent([[l-.214*e+t,a+.166*e+t],[l-.115*e-t,a+.234*e-t]]).stream(o).point,r},r.scale(1070)};bt={point:l,lineStart:l,lineEnd:l,polygonStart:function(){fh=0;bt.lineStart=vg},polygonEnd:function(){bt.lineStart=bt.lineEnd=bt.point=l;uh+=r(fh/2)}};ay={point:yg,lineStart:l,lineEnd:l,polygonStart:l,polygonEnd:l};tt={point:yi,lineStart:yy,lineEnd:py,polygonStart:function(){tt.lineStart=wg},polygonEnd:function(){tt.point=yi;tt.lineStart=yy;tt.lineEnd=py}};n.geo.path=function(){function t(t){return t&&(typeof i=="function"&&r.pointRadius(+i.apply(this,arguments)),f&&f.valid||(f=u(r)),n.geo.stream(t,f)),r.result()}function s(){return f=null,t}var i=4.5,e,o,u,r,f;return t.area=function(t){return uh=0,n.geo.stream(t,u(bt)),uh},t.centroid=function(t){return ai=vi=wt=ri=ui=ht=rr=ur=fi=0,n.geo.stream(t,u(tt)),fi?[rr/fi,ur/fi]:ht?[ri/ht,ui/ht]:wt?[ai/wt,vi/wt]:[NaN,NaN]},t.bounds=function(t){return oe=se=-(fe=ee=Infinity),n.geo.stream(t,u(ay)),[[fe,ee],[oe,se]]},t.projection=function(n){return arguments.length?(u=(e=n)?n.stream||kg(n):v,s()):e},t.context=function(n){return arguments.length?(r=(o=n)==null?new pg:new bg(n),typeof i!="function"&&r.pointRadius(i),s()):o},t.pointRadius=function(n){return arguments.length?(i=typeof n=="function"?n:(r.pointRadius(+n),+n),t):i},t.projection(n.geo.albersUsa()).context(null)};n.geo.transform=function(n){return{stream:function(t){var i=new by(t);for(var r in n)i[r]=n[r];return i}}};by.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};n.geo.projection=ei;n.geo.projectionMutator=eh;(n.geo.equirectangular=function(){return ei(nu)}).raw=nu.invert=nu;n.geo.rotation=function(n){function t(t){return t=n(t[0]*u,t[1]*u),t[0]*=s,t[1]*=s,t}return n=oh(n[0]%360*u,n[1]*u,n.length>2?n[2]*u:0),t.invert=function(t){return t=n.invert(t[0]*u,t[1]*u),t[0]*=s,t[1]*=s,t},t};gy.invert=nu;n.geo.circle=function(){function n(){var n=typeof t=="function"?t.apply(this,arguments):t,r=oh(-n[0]*u,-n[1]*u,0).invert,i=[];return f(null,null,1,{point:function(n,t){i.push(n=r(n,t));n[0]*=s;n[1]*=s}}),{type:"Polygon",coordinates:[i]}}var t=[0,0],i,r=6,f;return n.origin=function(i){return arguments.length?(t=i,n):t},n.angle=function(t){return arguments.length?(f=sh((i=+t)*u,r*u),n):i},n.precision=function(t){return arguments.length?(f=sh(i*u,(r=+t)*u),n):r},n.angle(90)};n.geo.distance=function(n,t){var f=(t[0]-n[0])*u,e=n[1]*u,o=t[1]*u,a=Math.sin(f),s=Math.cos(f),h=Math.sin(e),c=Math.cos(e),l=Math.sin(o),r=Math.cos(o),i;return Math.atan2(Math.sqrt((i=r*a)*i+(i=c*l-h*r*s)*i),h*l+c*r*s)};n.geo.graticule=function(){function i(){return{type:"MultiLineString",coordinates:nt()}}function nt(){return n.range(Math.ceil(f/v)*v,u,v).map(b).concat(n.range(Math.ceil(o/y)*y,e,y).map(k)).concat(n.range(Math.ceil(h/a)*a,s,a).filter(function(n){return r(n%v)>t}).map(d)).concat(n.range(Math.ceil(l/w)*w,c,w).filter(function(n){return r(n%y)>t}).map(g))}var s,h,u,f,c,l,e,o,a=10,w=a,v=90,y=360,d,g,b,k,p=2.5;return i.lines=function(){return nt().map(function(n){return{type:"LineString",coordinates:n}})},i.outline=function(){return{type:"Polygon",coordinates:[b(f).concat(k(e).slice(1),b(u).reverse().slice(1),k(o).reverse().slice(1))]}},i.extent=function(n){return arguments.length?i.majorExtent(n).minorExtent(n):i.minorExtent()},i.majorExtent=function(n){return arguments.length?(f=+n[0][0],u=+n[1][0],o=+n[0][1],e=+n[1][1],f>u&&(n=f,f=u,u=n),o>e&&(n=o,o=e,e=n),i.precision(p)):[[f,o],[u,e]]},i.minorExtent=function(n){return arguments.length?(h=+n[0][0],s=+n[1][0],l=+n[0][1],c=+n[1][1],h>s&&(n=h,h=s,s=n),l>c&&(n=l,l=c,c=n),i.precision(p)):[[h,l],[s,c]]},i.step=function(n){return arguments.length?i.majorStep(n).minorStep(n):i.minorStep()},i.majorStep=function(n){return arguments.length?(v=+n[0],y=+n[1],i):[v,y]},i.minorStep=function(n){return arguments.length?(a=+n[0],w=+n[1],i):[a,w]},i.precision=function(n){return arguments.length?(p=+n,d=up(l,c,90),g=fp(h,s,p),b=up(o,e,90),k=fp(f,u,p),i):p},i.majorExtent([[-180,-90+t],[180,90-t]]).minorExtent([[-180,-80-t],[180,80+t]])};n.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[u||i.apply(this,arguments),f||r.apply(this,arguments)]}}var i=hh,u,r=ch,f;return t.distance=function(){return n.geo.distance(u||i.apply(this,arguments),f||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,u=typeof n=="function"?null:n,t):i},t.target=function(n){return arguments.length?(r=n,f=typeof n=="function"?null:n,t):r},t.precision=function(){return arguments.length?t:0},t};n.geo.interpolate=function(n,t){return dg(n[0]*u,n[1]*u,t[0]*u,t[1]*u)};n.geo.length=function(t){return lh=0,n.geo.stream(t,pi),lh};pi={sphere:l,point:l,lineStart:gg,lineEnd:l,polygonStart:l,polygonEnd:l};ah=tu(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(n.geo.azimuthalEqualArea=function(){return ei(ah)}).raw=ah;vh=tu(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},v);(n.geo.azimuthalEquidistant=function(){return ei(vh)}).raw=vh;(n.geo.conicConformal=function(){return rh(ep)}).raw=ep;(n.geo.conicEquidistant=function(){return rh(op)}).raw=op;yh=tu(function(n){return 1/n},Math.atan);(n.geo.gnomonic=function(){return ei(yh)}).raw=yh;he.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-h]};(n.geo.mercator=function(){return sp(he)}).raw=he;ph=tu(function(){return 1},Math.asin);(n.geo.orthographic=function(){return ei(ph)}).raw=ph;wh=tu(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(n.geo.stereographic=function(){return ei(wh)}).raw=wh;bh.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-h]};(n.geo.transverseMercator=function(){var n=sp(bh),i=n.center,t=n.rotate;return n.center=function(n){return n?i([-n[1],n[0]]):(n=i(),[n[1],-n[0]])},n.rotate=function(n){return n?t([n[0],n[1],n.length>2?n[2]+90:90]):(n=t(),[n[0],n[1],n[2]-90])},t([0,0,90])}).raw=bh;n.geom={};n.geom.hull=function(n){function t(n){if(n.length<3)return[];for(var l=o(i),a=o(r),h=n.length,u=[],c=[],t=0;t<h;t++)u.push([+l.call(this,n[t],t),+a.call(this,n[t],t),t]);for(u.sort(nn),t=0;t<h;t++)c.push([u[t][0],-u[t][1]]);var f=hp(u),e=hp(c),v=e[0]===f[0],y=e[e.length-1]===f[f.length-1],s=[];for(t=f.length-1;t>=0;--t)s.push(n[u[f[t]][2]]);for(t=+v;t<e.length-y;++t)s.push(n[u[e[t]][2]]);return s}var i=er,r=iu;return arguments.length?t(n):(t.x=function(n){return arguments.length?(i=n,t):i},t.y=function(n){return arguments.length?(r=n,t):r},t)};n.geom.polygon=function(n){return yr(n,ru),n};ru=n.geom.polygon.prototype=[];ru.area=function(){for(var i=-1,r=this.length,t,n=this[r-1],u=0;++i<r;)t=n,n=this[i],u+=t[1]*n[0]-t[0]*n[1];return u*.5};ru.centroid=function(n){var u=-1,f=this.length,e=0,o=0,i,t=this[f-1],r;for(arguments.length||(n=-1/(6*this.area()));++u<f;)i=t,t=this[u],r=i[0]*t[1]-t[0]*i[1],e+=(i[0]+t[0])*r,o+=(i[1]+t[1])*r;return[e*n,o*n]};ru.clip=function(n){for(var f,o=cp(n),s=-1,h=this.length-cp(this),e,c,i=this[h-1],t,r,u;++s<h;){for(f=n.slice(),n.length=0,t=this[s],r=f[(c=f.length-o)-1],e=-1;++e<c;)u=f[e],kh(u,i,t)?(kh(r,i,t)||n.push(dh(r,u,i,t)),n.push(u)):kh(r,i,t)&&n.push(dh(r,u,i,t)),r=u;o&&n.push(n[0]);i=t}return n};gh=[];tc=[];vp.prototype.prepare=function(){for(var n=this.edges,t=n.length,i;t--;)i=n[t].edge,i.b&&i.a||n.splice(t,1);return n.sort(yp),n.length};le.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};rc.prototype={insert:function(n,t){var i,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;i=n}else this._?(n=wp(this._),t.P=null,t.N=n,n.P=n.L=t,i=n):(t.P=t.N=null,this._=t,i=null);for(t.L=t.R=null,t.U=i,t.C=!0,n=t;i&&i.C;)r=i.U,i===r.L?(u=r.R,u&&u.C?(i.C=u.C=!1,r.C=!0,n=r):(n===i.R&&(eu(this,i),n=i,i=n.U),i.C=!1,r.C=!0,ou(this,r))):(u=r.L,u&&u.C?(i.C=u.C=!1,r.C=!0,n=r):(n===i.L&&(ou(this,i),n=i,i=n.U),i.C=!1,r.C=!0,eu(this,r))),i=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P);n.P&&(n.P.N=n.N);n.N=n.P=null;var i=n.U,t,f=n.L,u=n.R,r,e;if(r=f?u?wp(u):f:u,i?i.L===n?i.L=r:i.R=r:this._=r,f&&u?(e=r.C,r.C=n.C,r.L=f,f.U=r,r!==u?(i=r.U,r.U=n.U,n=r.R,i.L=n,r.R=u,u.U=r):(r.U=i,i=r,n=r.R)):(e=n.C,n=r),n&&(n.U=i),!e){if(n&&n.C){n.C=!1;return}do{if(n===this._)break;if(n===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,eu(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ou(this,t),t=i.R);t.C=i.C;i.C=t.R.C=!1;eu(this,i);n=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ou(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,eu(this,t),t=i.L);t.C=i.C;i.C=t.L.C=!1;ou(this,i);n=this._;break}t.C=!0;n=i;i=i.U}while(!n.C);n&&(n.C=!1)}}};n.geom.voronoi=function(n){function i(n){var o=new Array(n.length),t=r[0][0],i=r[0][1],u=r[1][0],f=r[1][1];return uc(e(n),r).cells.forEach(function(r,e){var h=r.edges,s=r.site,c=o[e]=h.length?h.map(function(n){var t=n.start();return[t.x,t.y]}):s.x>=t&&s.x<=u&&s.y>=i&&s.y<=f?[[t,f],[u,f],[u,i],[t,i]]:[];c.point=n[e]}),o}function e(n){return n.map(function(n,i){return{x:Math.round(s(n,i)/t)*t,y:Math.round(h(n,i)/t)*t,i:i}})}var u=er,f=iu,s=u,h=f,r=su;return n?i(n):(i.links=function(n){return uc(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},i.triangles=function(n){var t=[];return uc(e(n)).cells.forEach(function(i,r){for(var o=i.site,s=i.edges.sort(yp),h=-1,c=s.length,l,e,u=s[c-1].edge,f=u.l===o?u.r:u.l;++h<c;)l=u,e=f,u=s[h].edge,f=u.l===o?u.r:u.l,r<e.i&&r<f.i&&an(o,e,f)<0&&t.push([n[r],n[e.i],n[f.i]])}),t},i.x=function(n){return arguments.length?(s=o(u=n),i):u},i.y=function(n){return arguments.length?(h=o(f=n),i):f},i.clipExtent=function(n){return arguments.length?(r=n==null?su:n,i):r===su?null:r},i.size=function(n){return arguments.length?i.clipExtent(n&&[[0,0],n]):r===su?null:r&&r[1]},i)};su=[[-1e6,-1e6],[1e6,1e6]];n.geom.delaunay=function(t){return n.geom.voronoi().triangles(t)};n.geom.quadtree=function(n,t,i,u,f){function e(n){function ut(n,t,i,u,f,e,o,s){var h,c,l;isNaN(i)||isNaN(u)||(n.leaf?(h=n.x,c=n.y,h!=null?r(h-i)+r(c-u)<.01?tt(n,t,i,u,f,e,o,s):(l=n.point,n.x=n.y=n.point=null,tt(n,l,h,c,f,e,o,s),tt(n,t,i,u,f,e,o,s)):(n.x=i,n.y=u,n.point=t)):tt(n,t,i,u,f,e,o,s))}function tt(n,t,i,r,u,f,e,o){var s=(u+e)*.5,h=(f+o)*.5,c=i>=s,l=r>=h,a=l<<1|c;n.leaf=!1;n=n.nodes[a]||(n.nodes[a]=bp());c?u=s:e=s;l?f=h:o=h;ut(n,t,i,r,u,f,e,o)}var l,ft=o(s),et=o(h),d,g,e,nt,a,v,y,p,b,k,it,rt,w;if(t!=null)a=t,v=i,y=u,p=f;else if(y=p=-(a=v=Infinity),d=[],g=[],nt=n.length,c)for(e=0;e<nt;++e)l=n[e],l.x<a&&(a=l.x),l.y<v&&(v=l.y),l.x>y&&(y=l.x),l.y>p&&(p=l.y),d.push(l.x),g.push(l.y);else for(e=0;e<nt;++e)b=+ft(l=n[e],e),k=+et(l,e),b<a&&(a=b),k<v&&(v=k),b>y&&(y=b),k>p&&(p=k),d.push(b),g.push(k);if(it=y-a,rt=p-v,it>rt?p=v+it:y=a+rt,w=bp(),w.add=function(n){ut(w,n,+ft(n,++e),+et(n,e),a,v,y,p)},w.visit=function(n){hu(n,w,a,v,y,p)},w.find=function(n){return pn(w,n[0],n[1],a,v,y,p)},e=-1,t==null){while(++e<nt)ut(w,n[e],d[e],g[e],a,v,y,p);--e}else n.forEach(w.add);return d=g=n=l=null,w}var s=er,h=iu,c;return(c=arguments.length)?(s=vn,h=yn,c===3&&(f=i,u=t,i=t=0),e(n)):(e.x=function(n){return arguments.length?(s=n,e):s},e.y=function(n){return arguments.length?(h=n,e):h},e.extent=function(n){return arguments.length?(n==null?t=i=u=f=null:(t=+n[0][0],i=+n[0][1],u=+n[1][0],f=+n[1][1]),e):t==null?null:[[t,i],[u,f]]},e.size=function(n){return arguments.length?(n==null?t=i=u=f=null:(t=i=0,u=+n[0],f=+n[1]),e):t==null?null:[u-t,f-i]},e)};n.interpolateRgb=fc;n.interpolateObject=kp;n.interpolateNumber=kt;n.interpolateString=dp;ve=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;ye=new RegExp(ve.source,"g");n.interpolate=bi;n.interpolators=[function(n,t){var i=typeof t;return(i==="string"?wr.has(t)||/^(#|rgb\(|hsl\()/.test(t)?fc:dp:t instanceof hi?fc:Array.isArray(t)?pe:i==="object"&&isNaN(t)?kp:kt)(n,t)}];n.interpolateArray=pe;var gp=function(){return v},wn=n.map({linear:gp,poly:ttt,quad:function(){return dn},cubic:function(){return gn},sin:function(){return itt},exp:function(){return rtt},circle:function(){return utt},elastic:ftt,back:ett,bounce:function(){return ott}}),bn=n.map({"in":v,out:nw,"in-out":tw,"out-in":function(n){return tw(nw(n))}});n.ease=function(n){var t=n.indexOf("-"),i=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return i=wn.get(i)||gp,r=bn.get(r)||v,kn(r(i.apply(null,vl.call(arguments,1))))};n.interpolateHcl=stt;n.interpolateHsl=htt;n.interpolateLab=ctt;n.interpolateRound=iw;n.transform=function(t){var i=rt.createElementNS(n.ns.prefix.svg,"g");return(n.transform=function(n){if(n!=null){i.setAttribute("transform",n);var t=i.transform.baseVal.consolidate()}return new rw(t?t.matrix:ew)})(t)};rw.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};ew={a:1,b:0,c:0,d:1,e:0,f:0};n.interpolateTransform=ow;n.layout={};n.layout.bundle=function(){return function(n){for(var t=[],i=-1,r=n.length;++i<r;)t.push(ytt(n[i]));return t}};n.layout.chord=function(){function c(){var b={},k=[],it=n.range(r),g=[],v,t,nt,c,a,p,w;for(i=[],u=[],v=0,c=-1;++c<r;){for(t=0,a=-1;++a<r;)t+=f[c][a];k.push(t);g.push(n.range(r));v+=t}for(o&&it.sort(function(n,t){return o(k[n],k[t])}),s&&g.forEach(function(n,t){n.sort(function(n,i){return s(f[t][n],f[t][i])})}),v=(d-e*r)/v,t=0,c=-1;++c<r;){for(nt=t,a=-1;++a<r;){var y=it[c],tt=g[y][a],rt=f[y][tt],ut=t,ft=t+=rt*v;b[y+"-"+tt]={index:y,subindex:tt,startAngle:ut,endAngle:ft,value:rt}}u[y]={index:y,startAngle:nt,endAngle:t,value:(t-nt)/v};t+=e}for(c=-1;++c<r;)for(a=c-1;++a<r;)p=b[c+"-"+a],w=b[a+"-"+c],(p.value||w.value)&&i.push(p.value<w.value?{source:w,target:p}:{source:p,target:w});h&&l()}function l(){i.sort(function(n,t){return h((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var t={},i,u,f,r,e=0,o,s,h;return t.matrix=function(n){return arguments.length?(r=(f=n)&&f.length,i=u=null,t):f},t.padding=function(n){return arguments.length?(e=n,i=u=null,t):e},t.sortGroups=function(n){return arguments.length?(o=n,i=u=null,t):o},t.sortSubgroups=function(n){return arguments.length?(s=n,i=null,t):s},t.sortChords=function(n){return arguments.length?(h=n,i&&l(),t):h},t.chords=function(){return i||c(),i},t.groups=function(){return u||c(),u},t};n.layout.force=function(){function d(n){return function(t,i,r,u){var e;if(t.point!==n){var o=t.cx-n.x,s=t.cy-n.y,h=u-i,f=o*o+s*s;if(h*h/k<f)return f<a&&(e=t.charge/f,n.px-=o*e,n.py-=s*e),!0;t.point&&f&&f<a&&(e=t.pointCharge/f,n.px-=o*e,n.py-=s*e)}return!t.charge}}function g(i){i.px=n.event.x;i.py=n.event.y;t.resume()}var t={},h=n.dispatch("start","tick","end"),f=[1,1],c,r,l=.9,o=gtt,s=nit,e=-30,a=tit,b=.1,k=.64,i=[],u=[],y,p,w;return t.tick=function(){if((r*=.99)<.005)return h.end({type:"end",alpha:r=0}),!0;for(var nt=i.length,it=u.length,tt,t,v,g,k,s,c,a,o=0;o<it;++o)t=u[o],v=t.source,g=t.target,c=g.x-v.x,a=g.y-v.y,(k=c*c+a*a)&&(k=r*p[o]*((k=Math.sqrt(k))-y[o])/k,c*=k,a*=k,g.x-=c*(s=v.weight/(g.weight+v.weight)),g.y-=a*s,v.x+=c*(s=1-s),v.y+=a*s);if((s=r*b)&&(c=f[0]/2,a=f[1]/2,o=-1,s))while(++o<nt)t=i[o],t.x+=(c-t.x)*s,t.y+=(a-t.y)*s;if(e)for(hw(tt=n.geom.quadtree(i),r,w),o=-1;++o<nt;)(t=i[o]).fixed||tt.visit(d(t));for(o=-1;++o<nt;)t=i[o],t.fixed?(t.x=t.px,t.y=t.py):(t.x-=(t.px-(t.px=t.x))*l,t.y-=(t.py-(t.py=t.y))*l);h.tick({type:"tick",alpha:r})},t.nodes=function(n){return arguments.length?(i=n,t):i},t.links=function(n){return arguments.length?(u=n,t):u},t.size=function(n){return arguments.length?(f=n,t):f},t.linkDistance=function(n){return arguments.length?(o=typeof n=="function"?n:+n,t):o},t.distance=t.linkDistance,t.linkStrength=function(n){return arguments.length?(s=typeof n=="function"?n:+n,t):s},t.friction=function(n){return arguments.length?(l=+n,t):l},t.charge=function(n){return arguments.length?(e=typeof n=="function"?n:+n,t):e},t.chargeDistance=function(n){return arguments.length?(a=n*n,t):Math.sqrt(a)},t.gravity=function(n){return arguments.length?(b=+n,t):b},t.theta=function(n){return arguments.length?(k=n*n,t):Math.sqrt(k)},t.alpha=function(i){return arguments.length?(i=+i,r?r=i>0?i:0:i>0&&(h.start({type:"start",alpha:r=i}),n.timer(t.tick)),t):r},t.start=function(){function a(t,i){var f;if(!c){for(c=new Array(h),r=0;r<h;++r)c[r]=[];for(r=0;r<o;++r)f=u[r],c[f.source.index].push(f.target),c[f.target.index].push(f.source)}for(var e=c[n],r=-1,o=e.length,s;++r<o;)if(!isNaN(s=e[r][t]))return s;return Math.random()*i}for(var h=i.length,l=u.length,v=f[0],b=f[1],c,r,n=0;n<h;++n)(r=i[n]).index=n,r.weight=0;for(n=0;n<l;++n)r=u[n],typeof r.source=="number"&&(r.source=i[r.source]),typeof r.target=="number"&&(r.target=i[r.target]),++r.source.weight,++r.target.weight;for(n=0;n<h;++n)r=i[n],isNaN(r.x)&&(r.x=a("x",v)),isNaN(r.y)&&(r.y=a("y",b)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(y=[],typeof o=="function")for(n=0;n<l;++n)y[n]=+o.call(this,u[n],n);else for(n=0;n<l;++n)y[n]=o;if(p=[],typeof s=="function")for(n=0;n<l;++n)p[n]=+s.call(this,u[n],n);else for(n=0;n<l;++n)p[n]=s;if(w=[],typeof e=="function")for(n=0;n<h;++n)w[n]=+e.call(this,i[n],n);else for(n=0;n<h;++n)w[n]=e;return t.resume()},t.resume=function(){return t.alpha(.1)},t.stop=function(){return t.alpha(0)},t.drag=function(){if(c||(c=n.behavior.drag().origin(v).on("dragstart.force",wtt).on("drag.force",g).on("dragend.force",btt)),!arguments.length)return c;this.on("mouseover.force",ktt).on("mouseout.force",dtt).call(c)},n.rebind(t,h,"on")};var gtt=20,nit=1,tit=Infinity;n.layout.hierarchy=function(){function n(u){var h=[u],c=[],f,o,e,s;for(u.depth=0;(f=h.pop())!=null;)if(c.push(f),(e=r.call(n,f,f.depth))&&(o=e.length)){while(--o>=0)h.push(s=e[o]),s.parent=f,s.depth=f.depth+1;t&&(f.value=0);f.children=e}else t&&(f.value=+t.call(n,f,f.depth)||0),delete f.children;return ct(u,function(n){var r,u;i&&(r=n.children)&&r.sort(i);t&&(u=n.parent)&&(u.value+=n.value)}),c}var i=uit,r=iit,t=rit;return n.sort=function(t){return arguments.length?(i=t,n):i},n.children=function(t){return arguments.length?(r=t,n):r},n.value=function(i){return arguments.length?(t=i,n):t},n.revalue=function(i){return t&&(lu(i,function(n){n.children&&(n.value=0)}),ct(i,function(i){var r;i.children||(i.value=+t.call(n,i,i.depth)||0);(r=i.parent)&&(r.value+=i.value)})),i},n};n.layout.partition=function(){function u(n,t,i,r){var f=n.children,e,o,s,h;if(n.x=t,n.y=n.depth*r,n.dx=i,n.dy=r,f&&(o=f.length))for(e=-1,i=n.value?i/n.value:0;++e<o;)u(s=f[e],t,h=s.value*i,r),t+=h}function f(n){var t=n.children,i=0,r,u;if(t&&(u=t.length))for(r=-1;++r<u;)i=Math.max(i,f(t[r]));return 1+i}function i(n,i){var e=r.call(this,n,i);return u(e[0],0,t[0],t[1]/f(e[0])),e}var r=n.layout.hierarchy(),t=[1,1];return i.size=function(n){return arguments.length?(t=n,i):t},cu(i,r)};n.layout.pie=function(){function t(o){var h=o.length,s=o.map(function(n,i){return+e.call(t,n,i)}),c=+(typeof r=="function"?r.apply(this,arguments):r),l=(typeof u=="function"?u.apply(this,arguments):u)-c,a=Math.min(Math.abs(l)/h,+(typeof f=="function"?f.apply(this,arguments):f)),v=a*(l<0?-1:1),b=(l-h*v)/n.sum(s),y=n.range(h),p=[],w;return i!=null&&y.sort(i===ec?function(n,t){return s[t]-s[n]}:function(n,t){return i(o[n],o[t])}),y.forEach(function(n){p[n]={data:o[n],value:w=s[n],startAngle:c,endAngle:c+=w*b+v,padAngle:a}}),p}var e=Number,i=ec,r=0,u=d,f=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(n){return arguments.length?(i=n,t):i},t.startAngle=function(n){return arguments.length?(r=n,t):r},t.endAngle=function(n){return arguments.length?(u=n,t):u},t.padAngle=function(n){return arguments.length?(f=n,t):f},t};ec={};n.layout.stack=function(){function t(s,h){var p,w,b,v,c,k;if(!(b=s.length))return s;var a=s.map(function(n,i){return r.call(t,n,i)}),l=a.map(function(n){return n.map(function(n,i){return[e.call(t,n,i),o.call(t,n,i)]})}),y=u.call(t,l,h);for(a=n.permute(a,y),l=n.permute(l,y),p=f.call(t,l,h),w=a[0].length,c=0;c<w;++c)for(i.call(t,a[0][c],k=p[c],l[0][c][1]),v=1;v<b;++v)i.call(t,a[v][c],k+=l[v-1][c][1],l[v][c][1]);return s}var r=v,u=oc,f=sc,i=sit,e=eit,o=oit;return t.values=function(n){return arguments.length?(r=n,t):r},t.order=function(n){return arguments.length?(u=typeof n=="function"?n:cw.get(n)||oc,t):u},t.offset=function(n){return arguments.length?(f=typeof n=="function"?n:lw.get(n)||sc,t):f},t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(o=n,t):o},t.out=function(n){return arguments.length?(i=n,t):i},t};cw=n.map({"inside-out":function(t){for(var u=t.length,i,f=t.map(hit),e=t.map(cit),l=n.range(u).sort(function(n,t){return f[n]-f[t]}),o=0,s=0,h=[],c=[],r=0;r<u;++r)i=l[r],o<s?(o+=e[i],h.push(i)):(s+=e[i],c.push(i));return c.reverse().concat(h)},reverse:function(t){return n.range(t.length).reverse()},"default":oc});lw=n.map({silhouette:function(n){for(var s=n.length,f=n[0].length,e=[],u=0,r,i,o=[],t=0;t<f;++t){for(r=0,i=0;r<s;r++)i+=n[r][t][1];i>u&&(u=i);e.push(i)}for(t=0;t<f;++t)o[t]=(u-e[t])/2;return o},wiggle:function(n){var a=n.length,h=n[0],v=h.length,i,t,r,u,c,l,f,e,o,s=[];for(s[0]=e=o=0,t=1;t<v;++t){for(i=0,u=0;i<a;++i)u+=n[i][t][1];for(i=0,c=0,f=h[t][0]-h[t-1][0];i<a;++i){for(r=0,l=(n[i][t][1]-n[i][t-1][1])/(2*f);r<i;++r)l+=(n[r][t][1]-n[r][t-1][1])/f;c+=l*n[i][t][1]}s[t]=e-=u?c/u*f:0;e<o&&(o=e)}for(t=0;t<v;++t)s[t]-=o;return s},expand:function(n){for(var r=n.length,f=n[0].length,o=1/r,t,u,e=[],i=0;i<f;++i){for(t=0,u=0;t<r;t++)u+=n[t][i][1];if(u)for(t=0;t<r;t++)n[t][i][1]/=u;else for(t=0;t<r;t++)n[t][i][1]=o}for(i=0;i<f;++i)e[i]=0;return e},zero:sc});n.layout.histogram=function(){function t(t,e){for(var l=[],s=t.map(r,this),a=u.call(this,s,e),h=f.call(this,a,s,e),o,e=-1,y=s.length,v=h.length-1,p=i?1:1/y,c;++e<v;)o=l[e]=[],o.dx=h[e+1]-(o.x=h[e]),o.y=0;if(v>0)for(e=-1;++e<y;)c=s[e],c>=a[0]&&c<=a[1]&&(o=l[n.bisect(h,c,1,v)-1],o.y+=p,o.push(t[e]));return l}var i=!0,r=Number,u=vit,f=ait;return t.value=function(n){return arguments.length?(r=n,t):r},t.range=function(n){return arguments.length?(u=o(n),t):u},t.bins=function(n){return arguments.length?(f=typeof n=="number"?function(t){return aw(t,n)}:o(n),t):f},t.frequency=function(n){return arguments.length?(i=!!n,t):i},t};n.layout.pack=function(){function i(n,i){var c=f.call(this,n,i),e=c[0],o=u[0],s=u[1],l=t==null?Math.sqrt:typeof t=="function"?t:function(){return t},h;return e.x=e.y=0,ct(e,function(n){n.r=+l(n.value)}),ct(e,pw),r&&(h=r*(t?1:Math.max(2*e.r/o,2*e.r/s))/2,ct(e,function(n){n.r+=h}),ct(e,pw),ct(e,function(n){n.r-=h})),ww(e,o/2,s/2,t?1:1/Math.max(2*e.r/o,2*e.r/s)),c}var f=n.layout.hierarchy().sort(yit),r=0,u=[1,1],t;return i.size=function(n){return arguments.length?(u=n,i):u},i.radius=function(n){return arguments.length?(t=n==null||typeof n=="function"?n:+n,i):t},i.padding=function(n){return arguments.length?(r=+n,i):r},cu(i,f)};n.layout.tree=function(){function r(n,r){var p=e.call(this,n,r),c=p[0],v=o(c);if(ct(v,s),v.parent.m=-v.z,lu(v,h),u)lu(c,f);else{var l=c,a=c,y=c;lu(c,function(n){n.x<l.x&&(l=n);n.x>a.x&&(a=n);n.depth>y.depth&&(y=n)});var w=i(l,a)/2-l.x,b=t[0]/(a.x+i(a,l)/2+w),k=t[1]/(y.depth||1);lu(c,function(n){n.x=(n.x+w)*b;n.y=n.depth*k})}return p}function o(n){for(var f={A:null,children:[n]},e=[f],u;(u=e.pop())!=null;)for(var i=u.children,r,t=0,o=i.length;t<o;++t)e.push((i[t]=r={_:i[t],parent:u,children:(r=i[t].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:t}).a=r);return f.children[0]}function s(n){var r=n.children,f=n.parent.children,t=n.i?f[n.i-1]:null,u;r.length?(kit(n),u=(r[0].z+r[r.length-1].z)/2,t?(n.z=t.z+i(n._,t._),n.m=n.z-u):n.z=u):t&&(n.z=t.z+i(n._,t._));n.parent.A=c(n,t,n.parent.A||f[0])}function h(n){n._.x=n.z+n.parent.m;n.m+=n.parent.m}function c(n,t,r){if(t){for(var u=n,e=n,f=t,o=u.parent.children[0],h=u.m,c=e.m,l=f.m,a=o.m,s;f=lc(f),u=cc(u),f&&u;)o=cc(o),e=lc(e),e.a=n,s=f.z+l-u.z-h+i(f._,u._),s>0&&(bit(dit(f,n,r),n,s),h+=s,c+=s),l+=f.m,h+=u.m,a+=o.m,c+=e.m;f&&!lc(e)&&(e.t=f,e.m+=l-c);u&&!cc(o)&&(o.t=u,o.m+=h-a,r=n)}return r}function f(n){n.x*=t[0];n.y=n.depth*t[1]}var e=n.layout.hierarchy().sort(null).value(null),i=kw,t=[1,1],u=null;return r.separation=function(n){return arguments.length?(i=n,r):i},r.size=function(n){return arguments.length?(u=(t=n)==null?f:null,r):u?null:t},r.nodeSize=function(n){return arguments.length?(u=(t=n)==null?null:f,r):u?t:null},cu(r,e)};n.layout.cluster=function(){function i(n,i){var c=f.call(this,n,i),e=c[0],o,a=0;ct(e,function(n){var t=n.children;t&&t.length?(n.x=nrt(t),n.y=git(t)):(n.x=o?a+=r(n,o):0,n.y=0,o=n)});var s=dw(e),h=gw(e),l=s.x-r(s,h)/2,v=h.x+r(h,s)/2;return ct(e,u?function(n){n.x=(n.x-e.x)*t[0];n.y=(e.y-n.y)*t[1]}:function(n){n.x=(n.x-l)/(v-l)*t[0];n.y=(1-(e.y?n.y/e.y:1))*t[1]}),c}var f=n.layout.hierarchy().sort(null).value(null),r=kw,t=[1,1],u=!1;return i.separation=function(n){return arguments.length?(r=n,i):r},i.size=function(n){return arguments.length?(u=(t=n)==null,i):u?null:t},i.nodeSize=function(n){return arguments.length?(u=(t=n)!=null,i):u?t:null},cu(i,f)};n.layout.treemap=function(){function c(n,t){for(var r=-1,f=n.length,u,i;++r<f;)i=(u=n[r]).value*(t<0?0:t),u.area=isNaN(i)||i<=0?0:i}function v(n){var u=n.children;if(u&&u.length){var r=s(n),t=[],f=u.slice(),h,o=Infinity,a,e=i==="slice"?r.dx:i==="dice"?r.dy:i==="slice-dice"?n.depth&1?r.dy:r.dx:Math.min(r.dx,r.dy),y;for(c(f,r.dx*r.dy/n.value),t.area=0;(y=f.length)>0;)t.push(h=f[y-1]),t.area+=h.area,i!=="squarify"||(a=p(t,e))<=o?(f.pop(),o=a):(t.area-=t.pop().area,l(t,e,r,!1),e=Math.min(r.dx,r.dy),t.length=t.area=0,o=Infinity);t.length&&(l(t,e,r,!0),t.length=t.area=0);u.forEach(v)}}function y(n){var u=n.children;if(u&&u.length){var i=s(n),f=u.slice(),r,t=[];for(c(f,i.dx*i.dy/n.value),t.area=0;r=f.pop();)t.push(r),t.area+=r.area,r.z!=null&&(l(t,r.z?i.dx:i.dy,i,!f.length),t.length=t.area=0);u.forEach(y)}}function p(n,t){for(var i=n.area,r,u=0,f=Infinity,o=-1,s=n.length;++o<s;)(r=n[o].area)&&(r<f&&(f=r),r>u&&(u=r));return i*=i,t*=t,i?Math.max(t*u*e/i,i/(t*f*e)):Infinity}function l(n,t,i,u){var h=-1,c=n.length,o=i.x,s=i.y,e=t?r(n.area/t):0,f;if(t==i.dx){for((u||e>i.dy)&&(e=i.dy);++h<c;)f=n[h],f.x=o,f.y=s,f.dy=e,o+=f.dx=Math.min(i.x+i.dx-o,e?r(f.area/e):0);f.z=!0;f.dx+=i.x+i.dx-o;i.y+=e;i.dy-=e}else{for((u||e>i.dx)&&(e=i.dx);++h<c;)f=n[h],f.x=o,f.y=s,f.dx=e,s+=f.dy=Math.min(i.y+i.dy-s,e?r(f.area/e):0);f.z=!1;f.dy+=i.y+i.dy-s;i.x+=e;i.dx-=e}}function t(n){var i=u||o(n),t=i[0];return t.x=0,t.y=0,t.dx=f[0],t.dy=f[1],u&&o.revalue(t),c([t],t.dx*t.dy/t.value),(u?y:v)(t),h&&(u=i),i}var o=n.layout.hierarchy(),r=Math.round,f=[1,1],a=null,s=ac,h=!1,u,i="squarify",e=.5*(1+Math.sqrt(5));return t.size=function(n){return arguments.length?(f=n,t):f},t.padding=function(n){function u(i){var r=n.call(t,i,i.depth);return r==null?ac(i):nb(i,typeof r=="number"?[r,r,r,r]:r)}function i(t){return nb(t,n)}if(!arguments.length)return a;var r;return s=(a=n)==null?ac:(r=typeof n)=="function"?u:r==="number"?(n=[n,n,n,n],i):i,t},t.round=function(n){return arguments.length?(r=n?Math.round:Number,t):r!=Number},t.sticky=function(n){return arguments.length?(h=n,u=null,t):h},t.ratio=function(n){return arguments.length?(e=n,t):e},t.mode=function(n){return arguments.length?(i=n+"",t):i},cu(t,o)};n.random={normal:function(n,t){var i=arguments.length;return i<2&&(t=1),i<1&&(n=0),function(){var r,u,i;do r=Math.random()*2-1,u=Math.random()*2-1,i=r*r+u*u;while(!i||i>1);return n+t*r*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=n.random.normal.apply(n,arguments);return function(){return Math.exp(t())}},bates:function(t){var i=n.random.irwinHall(t);return function(){return i()/t}},irwinHall:function(n){return function(){for(var t=0,i=0;i<n;i++)t+=Math.random();return t}}};n.scale={};tb={floor:v,ceil:v};n.scale.linear=function(){return ib([0,1],[0,1],bi,!1)};ub={s:1,g:1,p:1,r:1,e:1};n.scale.log=function(){return fb(n.scale.linear().domain([0,1]),10,!0,[1,10])};bc=n.format(".0e");eb={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};n.scale.pow=function(){return ob(n.scale.linear(),1,[0,1])};n.scale.sqrt=function(){return n.scale.pow().exponent(.5)};n.scale.ordinal=function(){return sb([],{t:"range",a:[[]]})};n.scale.category10=function(){return n.scale.ordinal().range(frt)};n.scale.category20=function(){return n.scale.ordinal().range(ert)};n.scale.category20b=function(){return n.scale.ordinal().range(ort)};n.scale.category20c=function(){return n.scale.ordinal().range(srt)};var frt=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(sf),ert=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(sf),ort=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(sf),srt=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(sf);n.scale.quantile=function(){return hb([],[])};n.scale.quantize=function(){return cb(0,1,[0,1])};n.scale.threshold=function(){return lb([.5],[0,1])};n.scale.identity=function(){return ab([0,1])};n.svg={};n.svg.arc=function(){function n(){var n=Math.max(0,+t.apply(this,arguments)),o=Math.max(0,+i.apply(this,arguments)),g=u.apply(this,arguments)-h,nt=e.apply(this,arguments)-h,ei=Math.abs(nt-g),a=g>nt?0:1,wt,bt,kt,dt;if(o<n&&(et=o,o=n,n=et),ei>=td)return l(o,a)+(n?l(n,1-a):"")+"Z";var et,ot,yt,pt,st=0,rt=0,v,y,p,ut,b,k,d,ht,w=[];if((pt=(+c.apply(this,arguments)||0)/2)&&(yt=r===vu?Math.sqrt(n*n+o*o):+r.apply(this,arguments),a||(rt*=-1),o&&(rt=ti(yt/o*Math.sin(pt))),n&&(st=ti(yt/n*Math.sin(pt)))),o?(v=o*Math.cos(g+rt),y=o*Math.sin(g+rt),p=o*Math.cos(nt-rt),ut=o*Math.sin(nt-rt),wt=Math.abs(nt-g-2*rt)<=f?0:1,rt&&de(v,y,p,ut)===a^wt&&(bt=(g+nt)/2,v=o*Math.cos(bt),y=o*Math.sin(bt),p=ut=null)):v=y=0,n?(b=n*Math.cos(nt-st),k=n*Math.sin(nt-st),d=n*Math.cos(g+st),ht=n*Math.sin(g+st),kt=Math.abs(g-nt+2*st)<=f?0:1,st&&de(b,k,d,ht)===1-a^kt&&(dt=(g+nt)/2,b=n*Math.cos(dt),k=n*Math.sin(dt),d=ht=null)):b=k=0,(et=Math.min(Math.abs(o-n)/2,+s.apply(this,arguments)))>.001){ot=n<o^a?0:1;var ft=d==null?[b,k]:p==null?[v,y]:dh([v,y],[d,ht],[p,ut],[b,k]),gt=v-ft[0],ni=y-ft[1],ii=p-ft[0],ri=ut-ft[1],ui=1/Math.sin(Math.acos((gt*ii+ni*ri)/(Math.sqrt(gt*gt+ni*ni)*Math.sqrt(ii*ii+ri*ri)))/2),fi=Math.sqrt(ft[0]*ft[0]+ft[1]*ft[1]);if(p!=null){var tt=Math.min(et,(o-fi)/(ui+1)),ct=ge(d==null?[b,k]:[d,ht],[v,y],o,tt,a),lt=ge([p,ut],[b,k],o,tt,a);et===tt?w.push("M",ct[0],"A",tt,",",tt," 0 0,",ot," ",ct[1],"A",o,",",o," 0 ",1-a^de(ct[1][0],ct[1][1],lt[1][0],lt[1][1]),",",a," ",lt[1],"A",tt,",",tt," 0 0,",ot," ",lt[0]):w.push("M",ct[0],"A",tt,",",tt," 0 1,",ot," ",lt[0])}else w.push("M",v,",",y);if(d!=null){var it=Math.min(et,(n-fi)/(ui-1)),at=ge([v,y],[d,ht],n,-it,a),vt=ge([b,k],p==null?[v,y]:[p,ut],n,-it,a);et===it?w.push("L",vt[0],"A",it,",",it," 0 0,",ot," ",vt[1],"A",n,",",n," 0 ",a^de(vt[1][0],vt[1][1],at[1][0],at[1][1]),",",1-a," ",at[1],"A",it,",",it," 0 0,",ot," ",at[0]):w.push("L",vt[0],"A",it,",",it," 0 0,",ot," ",at[0])}else w.push("L",b,",",k)}else w.push("M",v,",",y),p!=null&&w.push("A",o,",",o," 0 ",wt,",",a," ",p,",",ut),w.push("L",b,",",k),d!=null&&w.push("A",n,",",n," 0 ",kt,",",1-a," ",d,",",ht);return w.push("Z"),w.join("")}function l(n,t){return"M0,"+n+"A"+n+","+n+" 0 1,"+t+" 0,"+-n+"A"+n+","+n+" 0 1,"+t+" 0,"+n}var t=crt,i=lrt,s=hrt,r=vu,u=vb,e=yb,c=art;return n.innerRadius=function(i){return arguments.length?(t=o(i),n):t},n.outerRadius=function(t){return arguments.length?(i=o(t),n):i},n.cornerRadius=function(t){return arguments.length?(s=o(t),n):s},n.padRadius=function(t){return arguments.length?(r=t==vu?vu:o(t),n):r},n.startAngle=function(t){return arguments.length?(u=o(t),n):u},n.endAngle=function(t){return arguments.length?(e=o(t),n):e},n.padAngle=function(t){return arguments.length?(c=o(t),n):c},n.centroid=function(){var n=(+t.apply(this,arguments)+ +i.apply(this,arguments))/2,r=(+u.apply(this,arguments)+ +e.apply(this,arguments))/2-h;return[Math.cos(r)*n,Math.sin(r)*n]},n};vu="auto";n.svg.line=function(){return pb(v)};no=n.map({linear:g,"linear-closed":vrt,step:yrt,"step-before":kc,"step-after":dc,basis:wb,"basis-open":krt,"basis-closed":drt,bundle:grt,cardinal:brt,"cardinal-open":prt,"cardinal-closed":wrt,monotone:iut});no.forEach(function(n,t){t.key=n;t.closed=/-closed$/.test(n)});var bb=[0,2/3,1/3,0],kb=[0,1/3,2/3,0],oi=[0,1/6,2/3,1/6];n.svg.line.radial=function(){var n=pb(db);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n};kc.reverse=dc;dc.reverse=kc;n.svg.area=function(){return gb(v)};n.svg.area.radial=function(){var n=gb(db);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n};n.svg.chord=function(){function n(n,r){var u=c(this,t,n,r),f=c(this,i,n,r);return"M"+u.p0+l(u.r,u.p1,u.a1-u.a0)+(a(u,f)?s(u.r,u.p1,u.r,u.p0):s(u.r,u.p1,f.r,f.p0)+l(f.r,f.p1,f.a1-f.a0)+s(f.r,f.p1,u.r,u.p0))+"Z"}function c(n,t,i,f){var s=t.call(n,i,f),o=r.call(n,s,f),c=u.call(n,s,f)-h,l=e.call(n,s,f)-h;return{r:o,a0:c,a1:l,p0:[o*Math.cos(c),o*Math.sin(c)],p1:[o*Math.cos(l),o*Math.sin(l)]}}function a(n,t){return n.a0==t.a0&&n.a1==t.a1}function l(n,t,i){return"A"+n+","+n+" 0 "+ +(i>f)+",1 "+t}function s(n,t,i,r){return"Q 0,0 "+r}var t=hh,i=ch,r=rut,u=vb,e=yb;return n.radius=function(t){return arguments.length?(r=o(t),n):r},n.source=function(i){return arguments.length?(t=o(i),n):t},n.target=function(t){return arguments.length?(i=o(t),n):i},n.startAngle=function(t){return arguments.length?(u=o(t),n):u},n.endAngle=function(t){return arguments.length?(e=o(t),n):e},n};n.svg.diagonal=function(){function n(n,u){var e=t.call(this,n,u),o=i.call(this,n,u),s=(e.y+o.y)/2,f=[e,{x:e.x,y:s},{x:o.x,y:s},o];return f=f.map(r),"M"+f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var t=hh,i=ch,r=nk;return n.source=function(i){return arguments.length?(t=o(i),n):t},n.target=function(t){return arguments.length?(i=o(t),n):i},n.projection=function(t){return arguments.length?(r=t,n):r},n};n.svg.diagonal.radial=function(){var t=n.svg.diagonal(),i=nk,r=t.projection;return t.projection=function(n){return arguments.length?r(uut(i=n)):i},t};n.svg.symbol=function(){function n(n,r){return(il.get(t.call(this,n,r))||tk)(i.call(this,n,r))}var t=eut,i=fut;return n.type=function(i){return arguments.length?(t=o(i),n):t},n.size=function(t){return arguments.length?(i=o(t),n):i},n};il=n.map({circle:tk,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*rl)),i=t*rl;return"M0,"+-t+"L"+i+",0 0,"+t+" "+-i+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/yu),i=t*yu/2;return"M0,"+i+"L"+t+","+-i+" "+-t+","+-i+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/yu),i=t*yu/2;return"M0,"+-i+"L"+t+","+i+" "+-t+","+i+"Z"}});n.svg.symbolTypes=il.keys();yu=Math.sqrt(3);rl=Math.tan(30*u);a=[];ul=0;a.call=e.call;a.empty=e.empty;a.node=e.node;a.size=e.size;n.transition=function(n){return arguments.length?ki?n.transition():n:bo.transition()};n.transition.prototype=a;a.select=function(n){var f=this.id,e=this.namespace,s=[],o,i,t,r,h;for(n=yo(n),r=-1,h=this.length;++r<h;){s.push(o=[]);for(var c=this[r],u=-1,l=c.length;++u<l;)(t=c[u])&&(i=n.call(t,t.__data__,u,r))?("__data__"in t&&(i.__data__=t.__data__),ro(i,u,e,f,t[e][f]),o.push(i)):o.push(null)}return pu(s,e,f)};a.selectAll=function(n){var u=this.id,f=this.namespace,h=[],c,e,t,o,l,i,a,r,y;for(n=fa(n),i=-1,a=this.length;++i<a;)for(var v=this[i],s=-1,p=v.length;++s<p;)if(t=v[s])for(l=t[f][u],e=n.call(t,t.__data__,s,i),h.push(c=[]),r=-1,y=e.length;++r<y;)(o=e[r])&&ro(o,r,f,u,l),c.push(o);return pu(h,f,u)};a.filter=function(n){var u=[],f,e,i,t,o;for(typeof n!="function"&&(n=ya(n)),t=0,o=this.length;t<o;t++){u.push(f=[]);for(var e=this[t],r=0,s=e.length;r<s;r++)(i=e[r])&&n.call(i,i.__data__,r,t)&&f.push(i)}return pu(u,this.namespace,this.id)};a.tween=function(n,t){var i=this.id,r=this.namespace;return arguments.length<2?this.node()[r][i].tween.get(n):vt(this,t==null?function(t){t[r][i].tween.remove(n)}:function(u){u[r][i].tween.set(n,t)})};a.attr=function(t,i){function f(){this.removeAttribute(r)}function e(){this.removeAttributeNS(r.space,r.local)}function o(n){return n==null?f:(n+="",function(){var t=this.getAttribute(r),i;return t!==n&&(i=u(t,n),function(n){this.setAttribute(r,i(n))})})}function s(n){return n==null?e:(n+="",function(){var t=this.getAttributeNS(r.space,r.local),i;return t!==n&&(i=u(t,n),function(n){this.setAttributeNS(r.space,r.local,i(n))})})}if(arguments.length<2){for(i in t)this.attr(i,t[i]);return this}var u=t=="transform"?ow:bi,r=n.ns.qualify(t);return fl(this,"attr."+t,i,r.local?s:o)};a.attrTween=function(t,i){function u(n,t){var u=i.call(this,n,t,this.getAttribute(r));return u&&function(n){this.setAttribute(r,u(n))}}function f(n,t){var u=i.call(this,n,t,this.getAttributeNS(r.space,r.local));return u&&function(n){this.setAttributeNS(r.space,r.local,u(n))}}var r=n.ns.qualify(t);return this.tween("attr."+t,r.local?f:u)};a.style=function(n,t,i){function u(){this.style.removeProperty(n)}function f(t){return t==null?u:(t+="",function(){var r=p.getComputedStyle(this,null).getPropertyValue(n),u;return r!==t&&(u=bi(r,t),function(t){this.style.setProperty(n,u(t),i)})})}var r=arguments.length;if(r<3){if(typeof n!="string"){r<2&&(t="");for(i in n)this.style(i,n[i],t);return this}i=""}return fl(this,"style."+n,t,f)};a.styleTween=function(n,t,i){function r(r,u){var f=t.call(this,r,u,p.getComputedStyle(this,null).getPropertyValue(n));return f&&function(t){this.style.setProperty(n,f(t),i)}}return arguments.length<3&&(i=""),this.tween("style."+n,r)};a.text=function(n){return fl(this,"text",n,out)};a.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})};a.ease=function(t){var i=this.id,r=this.namespace;return arguments.length<1?this.node()[r][i].ease:(typeof t!="function"&&(t=n.ease.apply(n,arguments)),vt(this,function(n){n[r][i].ease=t}))};a.delay=function(n){var t=this.id,i=this.namespace;return arguments.length<1?this.node()[i][t].delay:vt(this,typeof n=="function"?function(r,u,f){r[i][t].delay=+n.call(r,r.__data__,u,f)}:(n=+n,function(r){r[i][t].delay=n}))};a.duration=function(n){var t=this.id,i=this.namespace;return arguments.length<1?this.node()[i][t].duration:vt(this,typeof n=="function"?function(r,u,f){r[i][t].duration=Math.max(1,n.call(r,r.__data__,u,f))}:(n=Math.max(1,n),function(r){r[i][t].duration=n}))};a.each=function(t,i){var r=this.id,u=this.namespace,f,e;return arguments.length<2?(f=io,e=ki,ki=r,vt(this,function(n,i,f){io=n[u][r];t.call(n,n.__data__,i,f)}),io=f,ki=e):vt(this,function(f){var e=f[u][r];(e.event||(e.event=n.dispatch("start","end","interrupt"))).on(t,i)}),this};a.transition=function(){for(var h=this.id,f=++ul,r=this.namespace,e=[],o,s,t,n,u=0,c=this.length;u<c;u++){e.push(o=[]);for(var s=this[u],i=0,l=s.length;i<l;i++)(t=s[i])&&(n=t[r][h],ro(t,i,r,f,{time:n.time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration})),o.push(t)}return pu(e,r,f)};n.svg.axis=function(){function i(i){i.each(function(){var rt=n.select(this),a=this.__chart__||e,i=this.__chart__=e.copy(),ht=s==null?i.ticks?i.ticks.apply(i,o):i.domain():s,ct=h==null?i.tickFormat?i.tickFormat.apply(i,o):v:h,w=rt.selectAll(".tick").data(ht,i),y=w.enter().insert("g",".domain").attr("class","tick").style("opacity",t),lt=n.transition(w.exit()).style("opacity",t).remove(),g=n.transition(w.order()).style("opacity",1),ut=Math.max(r,0)+c,p,b=we(i),ft=rt.selectAll(".domain").data([0]),et=(ft.enter().append("path").attr("class","domain"),n.transition(ft)),it,st;y.append("line");y.append("text");var at=y.select("line"),vt=g.select("line"),ot=w.select("text").text(ct),yt=y.select("text"),pt=g.select("text"),l=f==="top"||f==="left"?-1:1,nt,tt,k,d;f==="bottom"||f==="top"?(p=sut,nt="x",k="y",tt="x2",d="y2",ot.attr("dy",l<0?"0em":".71em").style("text-anchor","middle"),et.attr("d","M"+b[0]+","+l*u+"V0H"+b[1]+"V"+l*u)):(p=hut,nt="y",k="x",tt="y2",d="x2",ot.attr("dy",".32em").style("text-anchor",l<0?"end":"start"),et.attr("d","M"+l*u+","+b[0]+"H0V"+b[1]+"H"+l*u));at.attr(d,l*r);yt.attr(k,l*ut);vt.attr(tt,0).attr(d,l*r);pt.attr(nt,0).attr(k,l*ut);i.rangeBand?(it=i,st=it.rangeBand()/2,a=i=function(n){return it(n)+st}):a.rangeBand?a=i:lt.call(p,i,a);y.call(p,a,i);g.call(p,i,i)})}var e=n.scale.linear(),f=el,r=6,u=6,c=3,o=[10],s=null,h;return i.scale=function(n){return arguments.length?(e=n,i):e},i.orient=function(n){return arguments.length?(f=n in rk?n+"":el,i):f},i.ticks=function(){return arguments.length?(o=arguments,i):o},i.tickValues=function(n){return arguments.length?(s=n,i):s},i.tickFormat=function(n){return arguments.length?(h=n,i):h},i.tickSize=function(n){var t=arguments.length;return t?(r=+n,u=+arguments[t-1],i):r},i.innerTickSize=function(n){return arguments.length?(r=+n,i):r},i.outerTickSize=function(n){return arguments.length?(u=+n,i):u},i.tickPadding=function(n){return arguments.length?(c=+n,i):c},i.tickSubdivide=function(){return arguments.length&&i},i};el="bottom";rk={top:1,right:1,bottom:1,left:1};n.svg.brush=function(){function f(t){t.each(function(){var i=n.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",b).on("touchstart.brush",b),h=i.selectAll(".background").data([0]),e,o,s,t;h.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");e=i.selectAll(".resize").data(l,v);e.exit().remove();e.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return cut[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");e.style("display",f.empty()?"none":null);o=n.transition(i);s=n.transition(h);r&&(t=we(r),s.attr("x",t[0]).attr("width",t[1]-t[0]),y(o));u&&(t=we(u),s.attr("y",t[0]).attr("height",t[1]-t[0]),w(o));a(o)})}function a(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+t[+/e$/.test(n)]+","+i[+/^s/.test(n)]+")"})}function y(n){n.select(".extent").attr("x",t[0]);n.selectAll(".extent,.n>rect,.s>rect").attr("width",t[1]-t[0])}function w(n){n.select(".extent").attr("y",i[0]);n.selectAll(".extent,.e>rect,.w>rect").attr("height",i[1]-i[0])}function b(){function at(){n.event.keyCode==32&&(v||(b=null,l[0]-=t[1],l[1]-=i[1],v=2),gt())}function vt(){n.event.keyCode==32&&v==2&&(l[0]+=t[1],l[1]+=i[1],v=0,gt())}function tt(){var f=n.mouse(g),e=!1;nt&&(f[0]+=nt[0],f[1]+=nt[1]);v||(n.event.altKey?(b||(b=[(t[0]+t[1])/2,(i[0]+i[1])/2]),l[0]=t[+(f[0]<b[0])],l[1]=i[+(f[1]<b[1])]):b=null);ht&&ot(f,r,0)&&(y(k),e=!0);ct&&ot(f,u,1)&&(w(k),e=!0);e&&(a(k),rt({type:"brush",mode:v?"move":"resize"}))}function ot(n,r,u){var k=we(r),p=k[0],w=k[1],c=l[u],a=u?i:t,d=a[1]-a[0],f,y;return v&&(p-=c,w-=d+c),f=(u?h:s)?Math.max(p,Math.min(w,n[u])):n[u],v?y=(f+=c)+d:(b&&(c=Math.max(p,Math.min(w,2*b[u]-f))),c<f?(y=f,f=c):y=c),a[0]!=f||a[1]!=y?(u?o=null:e=null,a[0]=f,a[1]=y,!0):void 0}function st(){tt();k.style("pointer-events","all").selectAll(".resize").style("display",f.empty()?"none":null);n.select("body").style("cursor",null);ut.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);lt();rt({type:"brushend"})}var g=this,it=n.select(n.event.target),rt=c.of(g,arguments),k=n.select(g),d=it.datum(),ht=!/^(n|s)$/.test(d)&&r,ct=!/^(e|w)$/.test(d)&&u,v=it.classed("extent"),lt=nf(),b,l=n.mouse(g),nt,ut=n.select(p).on("keydown.brush",at).on("keyup.brush",vt),ft,et;if(n.event.changedTouches)ut.on("touchmove.brush",tt).on("touchend.brush",st);else ut.on("mousemove.brush",tt).on("mouseup.brush",st);k.interrupt().selectAll("*").interrupt();v?(l[0]=t[0]-l[0],l[1]=i[0]-l[1]):d?(ft=+/w$/.test(d),et=+/^n/.test(d),nt=[t[1-ft]-l[0],i[1-et]-l[1]],l[0]=t[ft],l[1]=i[et]):n.event.altKey&&(b=l.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null);n.select("body").style("cursor",it.style("cursor"));rt({type:"brushstart"});tt()}var c=lo(f,"brushstart","brush","brushend"),r=null,u=null,t=[0,0],i=[0,0],e,o,s=!0,h=!0,l=ol[0];return f.event=function(r){r.each(function(){var u=c.of(this,arguments),r={x:t,y:i,i:e,j:o},f=this.__chart__||r;this.__chart__=r;ki?n.select(this).transition().each("start.brush",function(){e=f.i;o=f.j;t=f.x;i=f.y;u({type:"brushstart"})}).tween("brush:brush",function(){var n=pe(t,r.x),f=pe(i,r.y);return e=o=null,function(e){t=r.x=n(e);i=r.y=f(e);u({type:"brush",mode:"resize"})}}).each("end.brush",function(){e=r.i;o=r.j;u({type:"brush",mode:"resize"});u({type:"brushend"})}):(u({type:"brushstart"}),u({type:"brush",mode:"resize"}),u({type:"brushend"}))})},f.x=function(n){return arguments.length?(r=n,l=ol[!r<<1|!u],f):r},f.y=function(n){return arguments.length?(u=n,l=ol[!r<<1|!u],f):u},f.clamp=function(n){return arguments.length?(r&&u?(s=!!n[0],h=!!n[1]):r?s=!!n:u&&(h=!!n),f):r&&u?[s,h]:r?s:u?h:null},f.extent=function(n){var s,h,c,l,a;return arguments.length?(r&&(s=n[0],h=n[1],u&&(s=s[0],h=h[0]),e=[s,h],r.invert&&(s=r(s),h=r(h)),h<s&&(a=s,s=h,h=a),(s!=t[0]||h!=t[1])&&(t=[s,h])),u&&(c=n[0],l=n[1],r&&(c=c[1],l=l[1]),o=[c,l],u.invert&&(c=u(c),l=u(l)),l<c&&(a=c,c=l,l=a),(c!=i[0]||l!=i[1])&&(i=[c,l])),f):(r&&(e?(s=e[0],h=e[1]):(s=t[0],h=t[1],r.invert&&(s=r.invert(s),h=r.invert(h)),h<s&&(a=s,s=h,h=a))),u&&(o?(c=o[0],l=o[1]):(c=i[0],l=i[1],u.invert&&(c=u.invert(c),l=u.invert(l)),l<c&&(a=c,c=l,l=a))),r&&u?[[s,c],[h,l]]:r?[s,h]:u&&[c,l])},f.clear=function(){return f.empty()||(t=[0,0],i=[0,0],e=o=null),f},f.empty=function(){return!!r&&t[0]==t[1]||!!u&&i[0]==i[1]},n.rebind(f,c,"on")};var cut={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ol=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],sl=i.format=ws.timeFormat,uk=sl.utc,fk=uk("%Y-%m-%dT%H:%M:%S.%LZ");sl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?hl:fk;hl.parse=function(n){var t=new Date(n);return isNaN(t)?null:t};hl.toString=fk.toString;i.second=ci(function(n){return new y(Math.floor(n/1e3)*1e3)},function(n,t){n.setTime(n.getTime()+Math.floor(t)*1e3)},function(n){return n.getSeconds()});i.seconds=i.second.range;i.seconds.utc=i.second.utc.range;i.minute=ci(function(n){return new y(Math.floor(n/6e4)*6e4)},function(n,t){n.setTime(n.getTime()+Math.floor(t)*6e4)},function(n){return n.getMinutes()});i.minutes=i.minute.range;i.minutes.utc=i.minute.utc.range;i.hour=ci(function(n){var t=n.getTimezoneOffset()/60;return new y((Math.floor(n/36e5-t)+t)*36e5)},function(n,t){n.setTime(n.getTime()+Math.floor(t)*36e5)},function(n){return n.getHours()});i.hours=i.hour.range;i.hours.utc=i.hour.utc.range;i.month=ci(function(n){return n=i.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()});i.months=i.month.range;i.months.utc=i.month.utc.range;var uo=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ll=[[i.second,1],[i.second,5],[i.second,15],[i.second,30],[i.minute,1],[i.minute,5],[i.minute,15],[i.minute,30],[i.hour,1],[i.hour,3],[i.hour,6],[i.hour,12],[i.day,1],[i.day,2],[i.week,1],[i.month,1],[i.month,3],[i.year,1]],lut=sl.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&n.getDate()!=1}],["%b %d",function(n){return n.getDate()!=1}],["%B",function(n){return n.getMonth()}],["%Y",fr]]),aut={range:function(t,i,r){return n.range(Math.ceil(t/r)*r,+i,r).map(di)},floor:v,ceil:v};ll.year=i.year;i.scale=function(){return cl(n.scale.linear(),ll,lut)};al=ll.map(function(n){return[n[0].utc,n[1]]});ek=uk.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&n.getUTCDate()!=1}],["%b %d",function(n){return n.getUTCDate()!=1}],["%B",function(n){return n.getUTCMonth()}],["%Y",fr]]);al.year=i.year.utc;i.scale.utc=function(){return cl(n.scale.linear(),al,ek)};n.text=ls(function(n){return n.responseText});n.json=function(n,t){return hf(n,"application/json",vut,t)};n.html=function(n,t){return hf(n,"text/html",yut,t)};n.xml=ls(function(n){return n.responseXML});typeof define=="function"&&define.amd?define(n):typeof module=="object"&&module.exports&&(module.exports=n);this.d3=n}(),function(n){"use strict";function b(n){this.owner=n}function it(n,t){if(Object.create)t.prototype=Object.create(n.prototype);else{var i=function(){};i.prototype=n.prototype;t.prototype=new i}return t.prototype.constructor=t,t}function k(n){var t=this.internal=new d(this);t.loadConfig(n);t.init(),function i(n,t,r){Object.keys(n).forEach(function(u){t[u]=n[u].bind(r);Object.keys(n[u]).length>0&&i(n[u],t[u],r)})}(r,this,this)}function d(t){var i=this;i.d3=n.d3?n.d3:typeof require!="undefined"?require("d3"):undefined;i.api=t;i.config=i.getDefaultConfig();i.data={};i.cache={};i.axes={}}function u(n){b.call(this,n)}function nt(n,t){function y(n,t){n.attr("transform",function(n){return"translate("+Math.ceil(t(n)+e)+", 0)"})}function p(n,t){n.attr("transform",function(n){return"translate(0,"+Math.ceil(t(n))+")"})}function d(n){var t=n[0],i=n[n.length-1];return t<i?[t,i]:[i,t]}function g(n){var i,r,t=[];if(n.ticks)return n.ticks.apply(n,a);for(r=n.domain(),i=Math.ceil(r[0]);i<r[1];i++)t.push(i);return t.length>0&&t[0]>0&&t.unshift(t[0]-(t[1]-t[0])),t}function nt(){var i=r.copy(),n;return t.isCategory&&(n=r.domain(),i.domain([n[0],n[1]-1])),i}function l(n){var t=c?c(n):n;return typeof t!="undefined"?t:""}function tt(n){if(w)return w;var t={h:11.5,w:5.5};return n.select("text").text(l).each(function(n){var i=this.getBoundingClientRect(),r=l(n),u=i.height,f=r?i.width/r.length:undefined;u&&f&&(t.h=u,t.w=f)}).text(""),w=t,t}function b(i){return t.withoutTransition?i:n.transition(i)}function i(c){c.each(function(){function fi(n,i){function o(n,t){r=undefined;for(var u=1;u<t.length;u++)if(t.charAt(u)===" "&&(r=u),f=t.substr(0,u+1),e=kt.w*f.length,i<e)return o(n.concat(t.substr(0,r?r:u)),t.slice(r?r+1:u));return n.concat(t)}var u=l(n),f,r,e;return Object.prototype.toString.call(u)==="[object Array]"?u:((!i||i<=0)&&(i=ui?95:t.isCategory?Math.ceil(c(pt[1])-c(pt[0]))-12:110),o([],u+""))}function dt(n,t){var i=kt.h;return t===0&&(i=o==="left"||o==="right"?-((ti[n.index]-1)*(kt.h/2)-3):".71em"),i}function ei(n){var t=r(n)+(h?0:e);return a[0]<t&&t<a[1]?f:0}function oi(n){return n?n>0?"start":"end":"middle"}function si(n){return n?"rotate("+n+")":""}function hi(n){return n?8*Math.sin(Math.PI*(n/180)):0}function ci(n){return n?11.5-2.5*(n/15)*(n>0?1:-1):v}var yt=i.g=n.select(this),et=this.__chart__||r,c=this.__chart__=nt(),pt=s?s:g(c),ot=yt.selectAll(".tick").data(pt,c),rt=ot.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),ri=ot.exit().remove(),wt=b(ot).style("opacity",1),it,st,bt,a=r.rangeExtent?r.rangeExtent():d(r.range()),ni=yt.selectAll(".domain").data([0]),ht=(ni.enter().append("path").attr("class","domain"),b(ni)),ft,gt,ii;rt.append("line");rt.append("text");var ct=rt.select("line"),lt=wt.select("line"),at=rt.select("text"),vt=wt.select("text");t.isCategory?(e=Math.ceil((c(1)-c(0))/2),st=h?0:e,bt=h?e:0):e=st=0;var ut,w,kt=tt(yt.select(".tick")),ti=[],v=Math.max(f,0)+k,ui=o==="left"||o==="right";ut=ot.select("text");w=ut.selectAll("tspan").data(function(n,i){var r=t.tickMultiline?fi(n,t.tickWidth):[].concat(l(n));return ti[i]=r.length,r.map(function(n){return{index:i,splitted:n}})});w.enter().append("tspan");w.exit().remove();w.text(function(n){return n.splitted});ft=t.tickTextRotate;switch(o){case"bottom":it=y;ct.attr("y2",f);at.attr("y",v);lt.attr("x1",st).attr("x2",st).attr("y2",ei);vt.attr("x",0).attr("y",ci(ft)).style("text-anchor",oi(ft)).attr("transform",si(ft));w.attr("x",0).attr("dy",dt).attr("dx",hi(ft));ht.attr("d","M"+a[0]+","+u+"V0H"+a[1]+"V"+u);break;case"top":it=y;ct.attr("y2",-f);at.attr("y",-v);lt.attr("x2",0).attr("y2",-f);vt.attr("x",0).attr("y",-v);ut.style("text-anchor","middle");w.attr("x",0).attr("dy","0em");ht.attr("d","M"+a[0]+","+-u+"V0H"+a[1]+"V"+-u);break;case"left":it=p;ct.attr("x2",-f);at.attr("x",-v);lt.attr("x2",-f).attr("y1",bt).attr("y2",bt);vt.attr("x",-v).attr("y",e);ut.style("text-anchor","end");w.attr("x",-v).attr("dy",dt);ht.attr("d","M"+-u+","+a[0]+"H0V"+a[1]+"H"+-u);break;case"right":it=p;ct.attr("x2",f);at.attr("x",v);lt.attr("x2",f).attr("y2",0);vt.attr("x",v).attr("y",0);ut.style("text-anchor","start");w.attr("x",v).attr("dy",dt);ht.attr("d","M"+u+","+a[0]+"H0V"+a[1]+"H"+u)}c.rangeBand?(gt=c,ii=gt.rangeBand()/2,et=c=function(n){return gt(n)+ii}):et.rangeBand?et=c:ri.call(it,c);rt.call(it,et);wt.call(it,c)})}var r=n.scale.linear(),o="bottom",f=6,u,k=3,s=null,c,a,e=0,v=!0,h;return t=t||{},u=t.withOuterTick?6:0,i.scale=function(n){return arguments.length?(r=n,i):r},i.orient=function(n){return arguments.length?(o=n in{top:1,right:1,bottom:1,left:1}?n+"":"bottom",i):o},i.tickFormat=function(n){return arguments.length?(c=n,i):c},i.tickCentered=function(n){return arguments.length?(h=n,i):h},i.tickOffset=function(){return e},i.tickInterval=function(){var n,r;return t.isCategory?n=e*2:(r=i.g.select("path.domain").node().getTotalLength()-u*2,n=r/i.g.selectAll("line").size()),n===Infinity?0:n},i.ticks=function(){return arguments.length?(a=arguments,i):a},i.tickCulling=function(n){return arguments.length?(v=n,i):v},i.tickValues=function(n){if(typeof n=="function")s=function(){return n(r.domain())};else{if(!arguments.length)return s;s=n}return i},i}var l={version:"0.4.10"},r,t,tt,i,w;l.generate=function(n){return new k(n)};l.chart={fn:k.prototype,internal:{fn:d.prototype,axis:{fn:u.prototype}}};r=l.chart.fn;t=l.chart.internal.fn;tt=l.chart.internal.axis.fn;t.init=function(){var t=this,n=t.config;if(t.initParams(),n.data_url)t.convertUrlToData(n.data_url,n.data_mimeType,n.data_keys,t.initWithData);else if(n.data_json)t.initWithData(t.convertJsonToData(n.data_json,n.data_keys));else if(n.data_rows)t.initWithData(t.convertRowsToData(n.data_rows));else if(n.data_columns)t.initWithData(t.convertColumnsToData(n.data_columns));else throw Error("url or json or rows or columns is required.");};t.initParams=function(){var n=this,i=n.d3,t=n.config;n.clipId="c3-"+ +new Date+"-clip";n.clipIdForXAxis=n.clipId+"-xaxis";n.clipIdForYAxis=n.clipId+"-yaxis";n.clipIdForGrid=n.clipId+"-grid";n.clipIdForSubchart=n.clipId+"-subchart";n.clipPath=n.getClipPath(n.clipId);n.clipPathForXAxis=n.getClipPath(n.clipIdForXAxis);n.clipPathForYAxis=n.getClipPath(n.clipIdForYAxis);n.clipPathForGrid=n.getClipPath(n.clipIdForGrid);n.clipPathForSubchart=n.getClipPath(n.clipIdForSubchart);n.dragStart=null;n.dragging=!1;n.flowing=!1;n.cancelClick=!1;n.mouseover=!1;n.transiting=!1;n.color=n.generateColor();n.levelColor=n.generateLevelColor();n.dataTimeFormat=t.data_xLocaltime?i.time.format:i.time.format.utc;n.axisTimeFormat=t.axis_x_localtime?i.time.format:i.time.format.utc;n.defaultAxisTimeFormat=n.axisTimeFormat.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%-m/%-d",function(n){return n.getDay()&&n.getDate()!==1}],["%-m/%-d",function(n){return n.getDate()!==1}],["%-m/%-d",function(n){return n.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]);n.hiddenTargetIds=[];n.hiddenLegendIds=[];n.focusedTargetIds=[];n.defocusedTargetIds=[];n.xOrient=t.axis_rotated?"left":"bottom";n.yOrient=t.axis_rotated?t.axis_y_inner?"top":"bottom":t.axis_y_inner?"right":"left";n.y2Orient=t.axis_rotated?t.axis_y2_inner?"bottom":"top":t.axis_y2_inner?"left":"right";n.subXOrient=t.axis_rotated?"left":"bottom";n.isLegendRight=t.legend_position==="right";n.isLegendInset=t.legend_position==="inset";n.isLegendTop=t.legend_inset_anchor==="top-left"||t.legend_inset_anchor==="top-right";n.isLegendLeft=t.legend_inset_anchor==="top-left"||t.legend_inset_anchor==="bottom-left";n.legendStep=0;n.legendItemWidth=0;n.legendItemHeight=0;n.currentMaxTickWidths={x:0,y:0,y2:0};n.rotated_padding_left=30;n.rotated_padding_right=t.axis_rotated&&!t.axis_x_show?0:30;n.rotated_padding_top=5;n.withoutFadeIn={};n.intervalForObserveInserted=undefined;n.axes.subx=i.selectAll([])};t.initChartElements=function(){this.initBar&&this.initBar();this.initLine&&this.initLine();this.initArc&&this.initArc();this.initGauge&&this.initGauge();this.initText&&this.initText()};t.initWithData=function(t){var r=this,o=r.d3,f=r.config,e,s,h=!0;r.axis=new u(r);r.initPie&&r.initPie();r.initBrush&&r.initBrush();r.initZoom&&r.initZoom();r.selectChart=f.bindto?typeof f.bindto.node=="function"?f.bindto:o.select(f.bindto):o.selectAll([]);r.selectChart.empty()&&(r.selectChart=o.select(document.createElement("div")).style("opacity",0),r.observeInserted(r.selectChart),h=!1);r.selectChart.html("").classed("c3",!0);r.data.xs={};r.data.targets=r.convertDataToTargets(t);f.data_filter&&(r.data.targets=r.data.targets.filter(f.data_filter));f.data_hide&&r.addHiddenTargetIds(f.data_hide===!0?r.mapToIds(r.data.targets):f.data_hide);f.legend_hide&&r.addHiddenLegendIds(f.legend_hide===!0?r.mapToIds(r.data.targets):f.legend_hide);r.hasType("gauge")&&(f.legend_show=!1);r.updateSizes();r.updateScales();r.x.domain(o.extent(r.getXDomain(r.data.targets)));r.y.domain(r.getYDomain(r.data.targets,"y"));r.y2.domain(r.getYDomain(r.data.targets,"y2"));r.subX.domain(r.x.domain());r.subY.domain(r.y.domain());r.subY2.domain(r.y2.domain());r.orgXDomain=r.x.domain();r.brush&&r.brush.scale(r.subX);f.zoom_enabled&&r.zoom.scale(r.x);r.svg=r.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return f.onmouseover.call(r)}).on("mouseleave",function(){return f.onmouseout.call(r)});e=r.svg.append("defs");r.clipChart=r.appendClip(e,r.clipId);r.clipXAxis=r.appendClip(e,r.clipIdForXAxis);r.clipYAxis=r.appendClip(e,r.clipIdForYAxis);r.clipGrid=r.appendClip(e,r.clipIdForGrid);r.clipSubchart=r.appendClip(e,r.clipIdForSubchart);r.updateSvgSize();s=r.main=r.svg.append("g").attr("transform",r.getTranslate("main"));r.initSubchart&&r.initSubchart();r.initTooltip&&r.initTooltip();r.initLegend&&r.initLegend();s.append("text").attr("class",i.text+" "+i.empty).attr("text-anchor","middle").attr("dominant-baseline","middle");r.initRegion();r.initGrid();s.append("g").attr("clip-path",r.clipPath).attr("class",i.chart);f.grid_lines_front&&r.initGridLines();r.initEventRect();r.initChartElements();s.insert("rect",f.zoom_privileged?null:"g."+i.regions).attr("class",i.zoomRect).attr("width",r.width).attr("height",r.height).style("opacity",0).on("dblclick.zoom",null);f.axis_x_extent&&r.brush.extent(r.getDefaultExtent());r.axis.init();r.updateTargets(r.data.targets);h&&(r.updateDimension(),r.config.oninit.call(r),r.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1}));n.onresize==null&&(n.onresize=r.generateResize());n.onresize.add&&(n.onresize.add(function(){f.onresize.call(r)}),n.onresize.add(function(){r.api.flush()}),n.onresize.add(function(){f.onresized.call(r)}));r.api.element=r.selectChart.node()};t.smoothLines=function(n,t){var i=this;t==="grid"&&n.each(function(){var n=i.d3.select(this),t=n.attr("x1"),r=n.attr("x2"),u=n.attr("y1"),f=n.attr("y2");n.attr({x1:Math.ceil(t),x2:Math.ceil(r),y1:Math.ceil(u),y2:Math.ceil(f)})})};t.updateSizes=function(){var n=this,t=n.config,e=n.legend?n.getLegendHeight():0,o=n.legend?n.getLegendWidth():0,r=n.isLegendRight||n.isLegendInset?0:e,i=n.hasArcType(),u=t.axis_rotated||i?0:n.getHorizontalAxisHeight("x"),f=t.subchart_show&&!i?t.subchart_size_height+u:0;n.currentWidth=n.getCurrentWidth();n.currentHeight=n.getCurrentHeight();n.margin=t.axis_rotated?{top:n.getHorizontalAxisHeight("y2")+n.getCurrentPaddingTop(),right:i?0:n.getCurrentPaddingRight(),bottom:n.getHorizontalAxisHeight("y")+r+n.getCurrentPaddingBottom(),left:f+(i?0:n.getCurrentPaddingLeft())}:{top:4+n.getCurrentPaddingTop(),right:i?0:n.getCurrentPaddingRight(),bottom:u+f+r+n.getCurrentPaddingBottom(),left:i?0:n.getCurrentPaddingLeft()};n.margin2=t.axis_rotated?{top:n.margin.top,right:NaN,bottom:20+r,left:n.rotated_padding_left}:{top:n.currentHeight-f-r,right:NaN,bottom:u+r,left:n.margin.left};n.margin3={top:0,right:NaN,bottom:0,left:0};n.updateSizeForLegend&&n.updateSizeForLegend(e,o);n.width=n.currentWidth-n.margin.left-n.margin.right;n.height=n.currentHeight-n.margin.top-n.margin.bottom;n.width<0&&(n.width=0);n.height<0&&(n.height=0);n.width2=t.axis_rotated?n.margin.left-n.rotated_padding_left-n.rotated_padding_right:n.width;n.height2=t.axis_rotated?n.height:n.currentHeight-n.margin2.top-n.margin2.bottom;n.width2<0&&(n.width2=0);n.height2<0&&(n.height2=0);n.arcWidth=n.width-(n.isLegendRight?o+10:0);n.arcHeight=n.height-(n.isLegendRight?0:10);n.hasType("gauge")&&(n.arcHeight+=n.height-n.getGaugeLabelHeight());n.updateRadius&&n.updateRadius();n.isLegendRight&&i&&(n.margin3.left=n.arcWidth/2+n.radiusExpanded*1.1)};t.updateTargets=function(n){var t=this;t.updateTargetsForText(n);t.updateTargetsForBar(n);t.updateTargetsForLine(n);t.hasArcType()&&t.updateTargetsForArc&&t.updateTargetsForArc(n);t.updateTargetsForSubchart&&t.updateTargetsForSubchart(n);t.showTargets()};t.showTargets=function(){var n=this;n.svg.selectAll("."+i.target).filter(function(t){return n.isTargetToShow(t.id)}).transition().duration(n.config.transition_duration).style("opacity",1)};t.redraw=function(n,t){var r=this,ft=r.main,et=r.d3,u=r.config,a=r.getShapeIndices(r.isAreaType),v=r.getShapeIndices(r.isBarType),y=r.getShapeIndices(r.isLineType),ot,st,h,ht,ct,lt,p,at,vt,yt,pt,wt,bt,gt=r.hasArcType(),w,b,k,d,g,o,s,kt,rt,nt,f=r.filterTargetsToShow(r.data.targets),c,l,dt,ut,ni=r.xv.bind(r),tt,it;if(n=n||{},ot=e(n,"withY",!0),st=e(n,"withSubchart",!0),h=e(n,"withTransition",!0),lt=e(n,"withTransform",!1),p=e(n,"withUpdateXDomain",!1),at=e(n,"withUpdateOrgXDomain",!1),vt=e(n,"withTrimXDomain",!0),bt=e(n,"withUpdateXAxis",p),yt=e(n,"withLegend",!1),pt=e(n,"withEventRect",!0),wt=e(n,"withDimension",!0),ht=e(n,"withTransitionForExit",h),ct=e(n,"withTransitionForAxis",h),o=h?u.transition_duration:0,s=ht?o:0,kt=ct?o:0,t=t||r.axis.generateTransitions(kt),yt&&u.legend_show?r.updateLegend(r.mapToIds(r.data.targets),n,t):wt&&r.updateDimension(!0),r.isCategorized()&&f.length===0&&r.x.domain([0,r.axes.x.selectAll(".tick").size()]),f.length?(r.updateXDomain(f,p,at,vt),u.axis_x_tick_values||(c=r.axis.updateXAxisTickValues(f))):(r.xAxis.tickValues([]),r.subXAxis.tickValues([])),u.zoom_rescale&&!n.flow&&(ut=r.x.orgDomain()),r.y.domain(r.getYDomain(f,"y",ut)),r.y2.domain(r.getYDomain(f,"y2",ut)),!u.axis_y_tick_values&&u.axis_y_tick_count&&r.yAxis.tickValues(r.axis.generateTickValues(r.y.domain(),u.axis_y_tick_count)),!u.axis_y2_tick_values&&u.axis_y2_tick_count&&r.y2Axis.tickValues(r.axis.generateTickValues(r.y2.domain(),u.axis_y2_tick_count)),r.axis.redraw(t,gt),r.axis.updateLabels(h),(p||bt)&&f.length)if(u.axis_x_tick_culling&&c){for(l=1;l<c.length;l++)if(c.length/l<u.axis_x_tick_culling_max){dt=l;break}r.svg.selectAll("."+i.axisX+" .tick text").each(function(n){var t=c.indexOf(n);t>=0&&et.select(this).style("display",t%dt?"none":"block")})}else r.svg.selectAll("."+i.axisX+" .tick text").style("display","block");w=r.generateDrawArea?r.generateDrawArea(a,!1):undefined;b=r.generateDrawBar?r.generateDrawBar(v):undefined;k=r.generateDrawLine?r.generateDrawLine(y,!1):undefined;d=r.generateXYForText(a,v,y,!0);g=r.generateXYForText(a,v,y,!1);ot&&(r.subY.domain(r.getYDomain(f,"y")),r.subY2.domain(r.getYDomain(f,"y2")));r.tooltip.style("display","none");r.updateXgridFocus();ft.select("text."+i.text+"."+i.empty).attr("x",r.width/2).attr("y",r.height/2).text(u.data_empty_label_text).transition().style("opacity",f.length?0:1);r.updateGrid(o);r.updateRegion(o);r.updateBar(s);r.updateLine(s);r.updateArea(s);r.updateCircle();r.hasDataLabel()&&r.updateText(s);r.redrawArc&&r.redrawArc(o,s,lt);r.redrawSubchart&&r.redrawSubchart(st,t,o,s,a,v,y);ft.selectAll("."+i.selectedCircles).filter(r.isBarType.bind(r)).selectAll("circle").remove();u.interaction_enabled&&!n.flow&&pt&&(r.redrawEventRect(),r.updateZoom&&r.updateZoom());r.updateCircleY();tt=(r.config.axis_rotated?r.circleY:r.circleX).bind(r);it=(r.config.axis_rotated?r.circleX:r.circleY).bind(r);n.flow&&(nt=r.generateFlow({targets:f,flow:n.flow,duration:n.flow.duration,drawBar:b,drawLine:k,drawArea:w,cx:tt,cy:it,xv:ni,xForText:d,yForText:g}));(o||nt)&&r.isTabVisible()?et.transition().duration(o).each(function(){var t=[];[r.redrawBar(b,!0),r.redrawLine(k,!0),r.redrawArea(w,!0),r.redrawCircle(tt,it,!0),r.redrawText(d,g,n.flow,!0),r.redrawRegion(!0),r.redrawGrid(!0),].forEach(function(n){n.forEach(function(n){t.push(n)})});rt=r.generateWait();t.forEach(function(n){rt.add(n)})}).call(rt,function(){nt&&nt();u.onrendered&&u.onrendered.call(r)}):(r.redrawBar(b),r.redrawLine(k),r.redrawArea(w),r.redrawCircle(tt,it),r.redrawText(d,g,n.flow),r.redrawRegion(),r.redrawGrid(),u.onrendered&&u.onrendered.call(r));r.mapToIds(r.data.targets).forEach(function(n){r.withoutFadeIn[n]=!0})};t.updateAndRedraw=function(n){var t=this,r=t.config,i;n=n||{};n.withTransition=e(n,"withTransition",!0);n.withTransform=e(n,"withTransform",!1);n.withLegend=e(n,"withLegend",!1);n.withUpdateXDomain=!0;n.withUpdateOrgXDomain=!0;n.withTransitionForExit=!1;n.withTransitionForTransform=e(n,"withTransitionForTransform",n.withTransition);t.updateSizes();n.withLegend&&r.legend_show||(i=t.axis.generateTransitions(n.withTransitionForAxis?r.transition_duration:0),t.updateScales(),t.updateSvgSize(),t.transformAll(n.withTransitionForTransform,i));t.redraw(n,i)};t.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})};t.isTimeSeries=function(){return this.config.axis_x_type==="timeseries"};t.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0};t.isCustomX=function(){var n=this,t=n.config;return!n.isTimeSeries()&&(t.data_x||h(t.data_xs))};t.isTimeSeriesY=function(){return this.config.axis_y_type==="timeseries"};t.getTranslate=function(n){var t=this,u=t.config,i,r;return n==="main"?(i=y(t.margin.left),r=y(t.margin.top)):n==="context"?(i=y(t.margin2.left),r=y(t.margin2.top)):n==="legend"?(i=t.margin3.left,r=t.margin3.top):n==="x"?(i=0,r=u.axis_rotated?0:t.height):n==="y"?(i=0,r=u.axis_rotated?t.height:0):n==="y2"?(i=u.axis_rotated?0:t.width,r=u.axis_rotated?1:0):n==="subx"?(i=0,r=u.axis_rotated?0:t.height2):n==="arc"&&(i=t.arcWidth/2,r=t.arcHeight/2),"translate("+i+","+r+")"};t.initialOpacity=function(n){return n.value!==null&&this.withoutFadeIn[n.id]?1:0};t.initialOpacityForCircle=function(n){return n.value!==null&&this.withoutFadeIn[n.id]?this.opacityForCircle(n):0};t.opacityForCircle=function(n){var t=this.config.point_show?1:0;return f(n.value)?this.isScatterType(n)?.5:t:0};t.opacityForText=function(){return this.hasDataLabel()?1:0};t.xx=function(n){return n?this.x(n.x):null};t.xv=function(n){var t=this,i=n.value;return t.isTimeSeries()?i=t.parseDate(n.value):t.isCategorized()&&typeof n.value=="string"&&(i=t.config.axis_x_categories.indexOf(n.value)),Math.ceil(t.x(i))};t.yv=function(n){var t=this,i=n.axis&&n.axis==="y2"?t.y2:t.y;return Math.ceil(i(n.value))};t.subxx=function(n){return n?this.subX(n.x):null};t.transformMain=function(n,t){var r=this,u,f,e;t&&t.axisX?u=t.axisX:(u=r.main.select("."+i.axisX),n&&(u=u.transition()));t&&t.axisY?f=t.axisY:(f=r.main.select("."+i.axisY),n&&(f=f.transition()));t&&t.axisY2?e=t.axisY2:(e=r.main.select("."+i.axisY2),n&&(e=e.transition()));(n?r.main.transition():r.main).attr("transform",r.getTranslate("main"));u.attr("transform",r.getTranslate("x"));f.attr("transform",r.getTranslate("y"));e.attr("transform",r.getTranslate("y2"));r.main.select("."+i.chartArcs).attr("transform",r.getTranslate("arc"))};t.transformAll=function(n,t){var i=this;i.transformMain(n,t);i.config.subchart_show&&i.transformContext(n,t);i.legend&&i.transformLegend(n)};t.updateSvgSize=function(){var n=this,t=n.svg.select(".c3-brush .background");n.svg.attr("width",n.currentWidth).attr("height",n.currentHeight);n.svg.selectAll(["#"+n.clipId,"#"+n.clipIdForGrid]).select("rect").attr("width",n.width).attr("height",n.height);n.svg.select("#"+n.clipIdForXAxis).select("rect").attr("x",n.getXAxisClipX.bind(n)).attr("y",n.getXAxisClipY.bind(n)).attr("width",n.getXAxisClipWidth.bind(n)).attr("height",n.getXAxisClipHeight.bind(n));n.svg.select("#"+n.clipIdForYAxis).select("rect").attr("x",n.getYAxisClipX.bind(n)).attr("y",n.getYAxisClipY.bind(n)).attr("width",n.getYAxisClipWidth.bind(n)).attr("height",n.getYAxisClipHeight.bind(n));n.svg.select("#"+n.clipIdForSubchart).select("rect").attr("width",n.width).attr("height",t.size()?t.attr("height"):0);n.svg.select("."+i.zoomRect).attr("width",n.width).attr("height",n.height);n.selectChart.style("max-height",n.currentHeight+"px")};t.updateDimension=function(n){var t=this;n||(t.config.axis_rotated?(t.axes.x.call(t.xAxis),t.axes.subx.call(t.subXAxis)):(t.axes.y.call(t.yAxis),t.axes.y2.call(t.y2Axis)));t.updateSizes();t.updateScales();t.updateSvgSize();t.transformAll(!1)};t.observeInserted=function(t){var i=this,r;if(typeof MutationObserver=="undefined"){n.console.error("MutationObserver not defined.");return}r=new MutationObserver(function(u){u.forEach(function(u){u.type==="childList"&&u.previousSibling&&(r.disconnect(),i.intervalForObserveInserted=n.setInterval(function(){t.node().parentNode&&(n.clearInterval(i.intervalForObserveInserted),i.updateDimension(),i.config.oninit.call(i),i.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),t.transition().style("opacity",1))},10))})});r.observe(t.node(),{attributes:!0,childList:!0,characterData:!0})};t.generateResize=function(){function t(){n.forEach(function(n){n()})}var n=[];return t.add=function(t){n.push(t)},t};t.endall=function(n,t){var i=0;n.each(function(){++i}).each("end",function(){--i||t.apply(this,arguments)})};t.generateWait=function(){var n=[],t=function(t,i){var r=setInterval(function(){var t=0;n.forEach(function(n){if(n.empty()){t+=1;return}try{n.transition()}catch(i){t+=1}});t===n.length&&(clearInterval(r),i&&i())},10)};return t.add=function(t){n.push(t)},t};t.parseDate=function(t){var r=this,i;return t instanceof Date?i=t:typeof t=="string"?i=r.dataTimeFormat(r.config.data_xFormat).parse(t):typeof t!="number"&&isNaN(t)||(i=new Date(+t)),(!i||isNaN(+i))&&n.console.error("Failed to parse x '"+t+"' to Date object"),i};t.isTabVisible=function(){var n;return typeof document.hidden!="undefined"?n="hidden":typeof document.mozHidden!="undefined"?n="mozHidden":typeof document.msHidden!="undefined"?n="msHidden":typeof document.webkitHidden!="undefined"&&(n="webkitHidden"),document[n]?!1:!0};t.getDefaultConfig=function(){var n={bindto:"#chart",size_width:undefined,size_height:undefined,padding_left:undefined,padding_right:undefined,padding_top:undefined,padding_bottom:undefined,zoom_enabled:!1,zoom_extent:undefined,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:undefined,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(n){return n},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:undefined,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:undefined,data_colors:{},data_hide:!1,data_filter:undefined,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:undefined,data_json:undefined,data_rows:undefined,data_columns:undefined,data_mimeType:undefined,data_keys:undefined,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:undefined,legend_item_onclick:undefined,legend_item_onmouseover:undefined,legend_item_onmouseout:undefined,legend_equally:!1,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:undefined,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:undefined,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:undefined,axis_x_min:undefined,axis_x_padding:{},axis_x_height:undefined,axis_x_extent:undefined,axis_x_label:{},axis_y_show:!0,axis_y_type:undefined,axis_y_max:undefined,axis_y_min:undefined,axis_y_inverted:!1,axis_y_center:undefined,axis_y_inner:undefined,axis_y_label:{},axis_y_tick_format:undefined,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_count:undefined,axis_y_tick_time_value:undefined,axis_y_tick_time_interval:undefined,axis_y_padding:{},axis_y_default:undefined,axis_y2_show:!1,axis_y2_max:undefined,axis_y2_min:undefined,axis_y2_inverted:!1,axis_y2_center:undefined,axis_y2_inner:undefined,axis_y2_label:{},axis_y2_tick_format:undefined,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:undefined,axis_y2_padding:{},axis_y2_default:undefined,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_focus_expand_enabled:!0,point_focus_expand_r:undefined,point_select_r:undefined,line_connectNull:!1,line_step_type:"step",bar_width:undefined,bar_width_ratio:.6,bar_width_max:undefined,bar_zerobased:!0,area_zerobased:!0,pie_label_show:!0,pie_label_format:undefined,pie_label_threshold:.05,pie_expand:!0,gauge_label_show:!0,gauge_label_format:undefined,gauge_expand:!0,gauge_min:0,gauge_max:100,gauge_units:undefined,gauge_width:undefined,donut_label_show:!0,donut_label_format:undefined,donut_label_threshold:.05,donut_width:undefined,donut_expand:!0,donut_title:"",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:undefined,tooltip_format_name:undefined,tooltip_format_value:undefined,tooltip_position:undefined,tooltip_contents:function(n,t,i,r){return this.getTooltipContent?this.getTooltipContent(n,t,i,r):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"}};return Object.keys(this.additionalConfig).forEach(function(t){n[t]=this.additionalConfig[t]},this),n};t.additionalConfig={};t.loadConfig=function(n){function f(){var n=u.shift();return n&&t&&typeof t=="object"&&n in t?(t=t[n],f()):n?undefined:t}var r=this.config,t,u,i;Object.keys(r).forEach(function(e){t=n;u=e.split("_");i=f();s(i)&&(r[e]=i)})};t.getScale=function(n,t,i){return(i?this.d3.time.scale():this.d3.scale.linear()).range([n,t])};t.getX=function(n,t,i,r){var e=this,u=e.getScale(n,t,e.isTimeSeries()),f=i?u.domain(i):u,o;e.isCategorized()?(r=r||function(){return 0},u=function(n,t){var i=f(n)+r(n);return t?i:Math.ceil(i)}):u=function(n,t){var i=f(n);return t?i:Math.ceil(i)};for(o in f)u[o]=f[o];return u.orgDomain=function(){return f.domain()},e.isCategorized()&&(u.domain=function(n){return arguments.length?(f.domain(n),u):(n=this.orgDomain(),[n[0],n[1]+1])}),u};t.getY=function(n,t,i){var r=this.getScale(n,t,this.isTimeSeriesY());return i&&r.domain(i),r};t.getYScale=function(n){return this.axis.getId(n)==="y2"?this.y2:this.y};t.getSubYScale=function(n){return this.axis.getId(n)==="y2"?this.subY2:this.subY};t.updateScales=function(){var n=this,t=n.config,i=!n.x;n.xMin=t.axis_rotated?1:0;n.xMax=t.axis_rotated?n.height:n.width;n.yMin=t.axis_rotated?0:n.height;n.yMax=t.axis_rotated?n.width:1;n.subXMin=n.xMin;n.subXMax=n.xMax;n.subYMin=t.axis_rotated?0:n.height2;n.subYMax=t.axis_rotated?n.width2:1;n.x=n.getX(n.xMin,n.xMax,i?undefined:n.x.orgDomain(),function(){return n.xAxis.tickOffset()});n.y=n.getY(n.yMin,n.yMax,i?t.axis_y_default:n.y.domain());n.y2=n.getY(n.yMin,n.yMax,i?t.axis_y2_default:n.y2.domain());n.subX=n.getX(n.xMin,n.xMax,n.orgXDomain,function(t){return t%1?0:n.subXAxis.tickOffset()});n.subY=n.getY(n.subYMin,n.subYMax,i?t.axis_y_default:n.subY.domain());n.subY2=n.getY(n.subYMin,n.subYMax,i?t.axis_y2_default:n.subY2.domain());n.xAxisTickFormat=n.axis.getXAxisTickFormat();n.xAxisTickValues=n.axis.getXAxisTickValues();n.yAxisTickValues=n.axis.getYAxisTickValues();n.y2AxisTickValues=n.axis.getY2AxisTickValues();n.xAxis=n.axis.getXAxis(n.x,n.xOrient,n.xAxisTickFormat,n.xAxisTickValues,t.axis_x_tick_outer);n.subXAxis=n.axis.getXAxis(n.subX,n.subXOrient,n.xAxisTickFormat,n.xAxisTickValues,t.axis_x_tick_outer);n.yAxis=n.axis.getYAxis(n.y,n.yOrient,t.axis_y_tick_format,n.yAxisTickValues,t.axis_y_tick_outer);n.y2Axis=n.axis.getYAxis(n.y2,n.y2Orient,t.axis_y2_tick_format,n.y2AxisTickValues,t.axis_y2_tick_outer);i||(n.brush&&n.brush.scale(n.subX),t.zoom_enabled&&n.zoom.scale(n.x));n.updateArc&&n.updateArc()};t.getYDomainMin=function(n){var i=this,s=i.config,c=i.mapToIds(n),t=i.getValuesAsIdKeyed(n),f,e,r,u,o,h;if(s.data_groups.length>0)for(h=i.hasNegativeValueInTargets(n),f=0;f<s.data_groups.length;f++)if(u=s.data_groups[f].filter(function(n){return c.indexOf(n)>=0}),u.length!==0)for(r=u[0],h&&t[r]&&t[r].forEach(function(n,i){t[r][i]=n<0?n:0}),e=1;e<u.length;e++)(o=u[e],t[o])&&t[o].forEach(function(n,u){i.axis.getId(o)!==i.axis.getId(r)||!t[r]||h&&+n>0||(t[r][u]+=+n)});return i.d3.min(Object.keys(t).map(function(n){return i.d3.min(t[n])}))};t.getYDomainMax=function(n){var i=this,s=i.config,c=i.mapToIds(n),t=i.getValuesAsIdKeyed(n),f,e,r,u,o,h;if(s.data_groups.length>0)for(h=i.hasPositiveValueInTargets(n),f=0;f<s.data_groups.length;f++)if(u=s.data_groups[f].filter(function(n){return c.indexOf(n)>=0}),u.length!==0)for(r=u[0],h&&t[r]&&t[r].forEach(function(n,i){t[r][i]=n>0?n:0}),e=1;e<u.length;e++)(o=u[e],t[o])&&t[o].forEach(function(n,u){i.axis.getId(o)!==i.axis.getId(r)||!t[r]||h&&+n<0||(t[r][u]+=+n)});return i.d3.max(Object.keys(t).map(function(n){return i.d3.max(t[n])}))};t.getYDomain=function(n,t,i){var r=this,e=r.config,ut=n.filter(function(n){return r.axis.getId(n.id)===t}),b=i?r.filterByXDomain(ut,i):ut,y=t==="y2"?e.axis_y2_min:e.axis_y_min,p=t==="y2"?e.axis_y2_max:e.axis_y_max,u=r.getYDomainMin(b),o=r.getYDomainMax(b),g,s,ft,c,l,nt=t==="y2"?e.axis_y2_center:e.axis_y_center,tt,w,it,a,k,d,rt=r.hasType("bar",b)&&e.bar_zerobased||r.hasType("area",b)&&e.area_zerobased,et=t==="y2"?e.axis_y2_inverted:e.axis_y_inverted,ot=r.hasDataLabel()&&e.axis_rotated,st=r.hasDataLabel()&&!e.axis_rotated;return(u=f(y)?y:f(p)?u<p?u:p-10:u,o=f(p)?p:f(y)?y<o?o:y+10:o,b.length===0)?t==="y2"?r.y2.domain():r.y.domain():(isNaN(u)&&(u=0),isNaN(o)&&(o=u),u===o&&(u<0?o=0:u=0),k=u>=0&&o>=0,d=u<=0&&o<=0,(f(y)&&k||f(p)&&d)&&(rt=!1),rt&&(k&&(u=0),d&&(o=0)),s=Math.abs(o-u),ft=c=l=s*.1,typeof nt!="undefined"&&(tt=Math.max(Math.abs(u),Math.abs(o)),o=nt+tt,u=nt-tt),ot?(w=r.getDataLabelLength(u,o,"width"),it=v(r.y.range()),a=[w[0]/it,w[1]/it],c+=s*(a[1]/(1-a[0]-a[1])),l+=s*(a[0]/(1-a[0]-a[1]))):st&&(w=r.getDataLabelLength(u,o,"height"),c+=r.axis.convertPixelsToAxisPadding(w[1],s),l+=r.axis.convertPixelsToAxisPadding(w[0],s)),t==="y"&&h(e.axis_y_padding)&&(c=r.axis.getPadding(e.axis_y_padding,"top",c,s),l=r.axis.getPadding(e.axis_y_padding,"bottom",l,s)),t==="y2"&&h(e.axis_y2_padding)&&(c=r.axis.getPadding(e.axis_y2_padding,"top",c,s),l=r.axis.getPadding(e.axis_y2_padding,"bottom",l,s)),rt&&(k&&(l=u),d&&(c=-o)),g=[u-l,o+c],et?g.reverse():g)};t.getXDomainMin=function(n){var t=this,i=t.config;return s(i.axis_x_min)?t.isTimeSeries()?this.parseDate(i.axis_x_min):i.axis_x_min:t.d3.min(n,function(n){return t.d3.min(n.values,function(n){return n.x})})};t.getXDomainMax=function(n){var t=this,i=t.config;return s(i.axis_x_max)?t.isTimeSeries()?this.parseDate(i.axis_x_max):i.axis_x_max:t.d3.max(n,function(n){return t.d3.max(n.values,function(n){return n.x})})};t.getXDomainPadding=function(n){var r=this,t=r.config,s=n[1]-n[0],e,i,o,u;return r.isCategorized()?i=0:r.hasType("bar")?(e=r.getMaxDataCount(),i=e>1?s/(e-1)/2:.5):i=s*.01,typeof t.axis_x_padding=="object"&&h(t.axis_x_padding)?(o=f(t.axis_x_padding.left)?t.axis_x_padding.left:i,u=f(t.axis_x_padding.right)?t.axis_x_padding.right:i):o=typeof t.axis_x_padding=="number"?u=t.axis_x_padding:u=i,{left:o,right:u}};t.getXDomain=function(n){var r=this,f=[r.getXDomainMin(n),r.getXDomainMax(n)],t=f[0],i=f[1],u=r.getXDomainPadding(f),e=0,o=0;return t-i!=0||r.isCategorized()||(r.isTimeSeries()?(t=new Date(t.getTime()*.5),i=new Date(i.getTime()*1.5)):(t=t===0?1:t*.5,i=i===0?-1:i*1.5)),(t||t===0)&&(e=r.isTimeSeries()?new Date(t.getTime()-u.left):t-u.left),(i||i===0)&&(o=r.isTimeSeries()?new Date(i.getTime()+u.right):i+u.right),[e,o]};t.updateXDomain=function(n,t,i,r,u){var f=this,e=f.config;return i&&(f.x.domain(u?u:f.d3.extent(f.getXDomain(n))),f.orgXDomain=f.x.domain(),e.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent(),f.subX.domain(f.x.domain()),f.brush&&f.brush.scale(f.subX)),t&&(f.x.domain(u?u:!f.brush||f.brush.empty()?f.orgXDomain:f.brush.extent()),e.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent()),r&&f.x.domain(f.trimXDomain(f.x.orgDomain())),f.x.domain()};t.trimXDomain=function(n){var t=this;return n[0]<=t.orgXDomain[0]&&(n[1]=+n[1]+(t.orgXDomain[0]-n[0]),n[0]=t.orgXDomain[0]),t.orgXDomain[1]<=n[1]&&(n[0]=+n[0]-(n[1]-t.orgXDomain[1]),n[1]=t.orgXDomain[1]),n};t.isX=function(n){var i=this,t=i.config;return t.data_x&&n===t.data_x||h(t.data_xs)&&rt(t.data_xs,n)};t.isNotX=function(n){return!this.isX(n)};t.getXKey=function(n){var i=this,t=i.config;return t.data_x?t.data_x:h(t.data_xs)?t.data_xs[n]:null};t.getXValuesOfXKey=function(n,t){var i=this,r,u=t&&h(t)?i.mapToIds(t):[];return u.forEach(function(t){i.getXKey(t)===n&&(r=i.data.xs[t])}),r};t.getIndexByX=function(n){var t=this,i=t.filterByX(t.data.targets,n);return i.length?i[0].index:null};t.getXValue=function(n,t){var i=this;return n in i.data.xs&&i.data.xs[n]&&f(i.data.xs[n][t])?i.data.xs[n][t]:t};t.getOtherTargetXs=function(){var n=this,t=Object.keys(n.data.xs);return t.length?n.data.xs[t[0]]:null};t.getOtherTargetX=function(n){var t=this.getOtherTargetXs();return t&&n<t.length?t[n]:null};t.addXs=function(n){var t=this;Object.keys(n).forEach(function(i){t.config.data_xs[i]=n[i]})};t.hasMultipleX=function(n){return this.d3.set(Object.keys(n).map(function(t){return n[t]})).size()>1};t.isMultipleX=function(){return h(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")};t.addName=function(n){var i=this,t;return n&&(t=i.config.data_names[n.id],n.name=t?t:n.id),n};t.getValueOnIndex=function(n,t){var i=n.filter(function(n){return n.index===t});return i.length?i[0]:null};t.updateTargetX=function(n,t){var i=this;n.forEach(function(n){n.values.forEach(function(r,u){r.x=i.generateTargetX(t[u],n.id,u)});i.data.xs[n.id]=t})};t.updateTargetXs=function(n,t){var i=this;n.forEach(function(n){t[n.id]&&i.updateTargetX([n],t[n.id])})};t.generateTargetX=function(n,t,i){var r=this;return r.isTimeSeries()?n?r.parseDate(n):r.parseDate(r.getXValue(t,i)):r.isCustomX()&&!r.isCategorized()?f(n)?+n:r.getXValue(t,i):i};t.cloneTarget=function(n){return{id:n.id,id_org:n.id_org,values:n.values.map(function(n){return{x:n.x,value:n.value,id:n.id}})}};t.updateXs=function(){var n=this;n.data.targets.length&&(n.xs=[],n.data.targets[0].values.forEach(function(t){n.xs[t.index]=t.x}))};t.getPrevX=function(n){var t=this.xs[n-1];return typeof t!="undefined"?t:null};t.getNextX=function(n){var t=this.xs[n+1];return typeof t!="undefined"?t:null};t.getMaxDataCount=function(){var n=this;return n.d3.max(n.data.targets,function(n){return n.values.length})};t.getMaxDataCountTarget=function(n){var i=n.length,r=0,t;return i>1?n.forEach(function(n){n.values.length>r&&(t=n,r=n.values.length)}):t=i?n[0]:null,t};t.getEdgeX=function(n){var t=this;return n.length?[t.d3.min(n,function(n){return n.values[0].x}),t.d3.max(n,function(n){return n.values[n.values.length-1].x})]:[0,0]};t.mapToIds=function(n){return n.map(function(n){return n.id})};t.mapToTargetIds=function(n){var t=this;return n?o(n)?[n]:n:t.mapToIds(t.data.targets)};t.hasTarget=function(n,t){for(var r=this.mapToIds(n),i=0;i<r.length;i++)if(r[i]===t)return!0;return!1};t.isTargetToShow=function(n){return this.hiddenTargetIds.indexOf(n)<0};t.isLegendToShow=function(n){return this.hiddenLegendIds.indexOf(n)<0};t.filterTargetsToShow=function(n){var t=this;return n.filter(function(n){return t.isTargetToShow(n.id)})};t.mapTargetsToUniqueXs=function(n){var t=this,i=t.d3.set(t.d3.merge(n.map(function(n){return n.values.map(function(n){return+n.x})}))).values();return t.isTimeSeries()?i.map(function(n){return new Date(+n)}):i.map(function(n){return+n})};t.addHiddenTargetIds=function(n){this.hiddenTargetIds=this.hiddenTargetIds.concat(n)};t.removeHiddenTargetIds=function(n){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return n.indexOf(t)<0})};t.addHiddenLegendIds=function(n){this.hiddenLegendIds=this.hiddenLegendIds.concat(n)};t.removeHiddenLegendIds=function(n){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return n.indexOf(t)<0})};t.getValuesAsIdKeyed=function(n){var t={};return n.forEach(function(n){t[n.id]=[];n.values.forEach(function(i){t[n.id].push(i.value)})}),t};t.checkValueInTargets=function(n,t){for(var f=Object.keys(n),r,u,i=0;i<f.length;i++)for(u=n[f[i]].values,r=0;r<u.length;r++)if(t(u[r].value))return!0;return!1};t.hasNegativeValueInTargets=function(n){return this.checkValueInTargets(n,function(n){return n<0})};t.hasPositiveValueInTargets=function(n){return this.checkValueInTargets(n,function(n){return n>0})};t.isOrderDesc=function(){var n=this.config;return typeof n.data_order=="string"&&n.data_order.toLowerCase()==="desc"};t.isOrderAsc=function(){var n=this.config;return typeof n.data_order=="string"&&n.data_order.toLowerCase()==="asc"};t.orderTargets=function(n){var t=this,i=t.config,r=t.isOrderAsc(),u=t.isOrderDesc();return r||u?n.sort(function(n,t){var i=function(n,t){return n+Math.abs(t.value)},u=n.values.reduce(i,0),f=t.values.reduce(i,0);return r?f-u:u-f}):a(i.data_order)&&n.sort(i.data_order),n};t.filterByX=function(n,t){return this.d3.merge(n.map(function(n){return n.values})).filter(function(n){return n.x-t==0})};t.filterRemoveNull=function(n){return n.filter(function(n){return f(n.value)})};t.filterByXDomain=function(n,t){return n.map(function(n){return{id:n.id,id_org:n.id_org,values:n.values.filter(function(n){return t[0]<=n.x&&n.x<=t[1]})}})};t.hasDataLabel=function(){var n=this.config;return typeof n.data_labels=="boolean"&&n.data_labels?!0:typeof n.data_labels=="object"&&h(n.data_labels)?!0:!1};t.getDataLabelLength=function(n,t,i){var r=this,u=[0,0],f=1.3;return r.selectChart.select("svg").selectAll(".dummy").data([n,t]).enter().append("text").text(function(n){return r.dataLabelFormat(n.id)(n)}).each(function(n,t){u[t]=this.getBoundingClientRect()[i]*f}).remove(),u};t.isNoneArc=function(n){return this.hasTarget(this.data.targets,n.id)};t.isArc=function(n){return"data"in n&&this.hasTarget(this.data.targets,n.data.id)};t.findSameXOfValues=function(n,t){for(var u=n[t].x,r=[],i=t-1;i>=0;i--){if(u!==n[i].x)break;r.push(n[i])}for(i=t;i<n.length;i++){if(u!==n[i].x)break;r.push(n[i])}return r};t.findClosestFromTargets=function(n,t){var i=this,r;return r=n.map(function(n){return i.findClosest(n.values,t)}),i.findClosest(r,t)};t.findClosest=function(n,t){var r=this,f=100,u;return n.filter(function(n){return n&&r.isBarType(n.id)}).forEach(function(n){var t=r.main.select("."+i.bars+r.getTargetSelectorSuffix(n.id)+" ."+i.bar+"-"+n.index).node();!u&&r.isWithinBar(t)&&(u=n)}),n.filter(function(n){return n&&!r.isBarType(n.id)}).forEach(function(n){var i=r.dist(n,t);i<f&&(f=i,u=n)}),u};t.dist=function(n,t){var i=this,r=i.config,u=r.axis_rotated?1:0,f=r.axis_rotated?0:1,e=i.circleY(n,n.index),o=i.x(n.x);return Math.pow(o-t[u],2)+Math.pow(e-t[f],2)};t.convertValuesToStep=function(n){var t=[].concat(n),i;if(!this.isCategorized())return n;for(i=n.length+1;0<i;i--)t[i]=t[i-1];return t[0]={x:t[0].x-1,value:t[0].value,id:t[0].id},t[n.length+1]={x:t[n.length].x+1,value:t[n.length].value,id:t[n.length].id},t};t.updateDataAttributes=function(n,t){var r=this,u=r.config,i=u["data_"+n];return typeof t=="undefined"?i:(Object.keys(t).forEach(function(n){i[n]=t[n]}),r.redraw({withLegend:!0}),i)};t.convertUrlToData=function(n,t,i,r){var u=this,f=t?t:"csv";u.d3.xhr(n,function(n,t){var e;if(!t)throw new Error(n.responseURL+" "+n.status+" ("+n.statusText+")");e=f==="json"?u.convertJsonToData(JSON.parse(t.response),i):f==="tsv"?u.convertTsvToData(t.response):u.convertCsvToData(t.response);r.call(u,e)})};t.convertXsvToData=function(n,t){var r=t.parseRows(n),i;return r.length===1?(i=[{}],r[0].forEach(function(n){i[0][n]=null})):i=t.parse(n),i};t.convertCsvToData=function(n){return this.convertXsvToData(n,this.d3.csv)};t.convertTsvToData=function(n){return this.convertXsvToData(n,this.d3.tsv)};t.convertJsonToData=function(n,t){var u=this,i=[],r,f;return t?(t.x?(r=t.value.concat(t.x),u.config.data_x=t.x):r=t.value,i.push(r),n.forEach(function(n){var t=[];r.forEach(function(i){var r=c(n[i])?null:n[i];t.push(r)});i.push(t)}),f=u.convertRowsToData(i)):(Object.keys(n).forEach(function(t){i.push([t].concat(n[t]))}),f=u.convertColumnsToData(i)),f};t.convertRowsToData=function(n){for(var f=n[0],r={},u=[],i,t=1;t<n.length;t++){for(r={},i=0;i<n[t].length;i++){if(c(n[t][i]))throw new Error("Source data is missing a component at ("+t+","+i+")!");r[f[i]]=n[t][i]}u.push(r)}return u};t.convertColumnsToData=function(n){for(var r=[],t,u,i=0;i<n.length;i++)for(u=n[i][0],t=1;t<n[i].length;t++){if(c(r[t-1])&&(r[t-1]={}),c(n[i][t]))throw new Error("Source data is missing a component at ("+i+","+t+")!");r[t-1][u]=n[i][t]}return r};t.convertDataToTargets=function(n,t){var i=this,r=i.config,e=i.d3.keys(n[0]).filter(i.isNotX,i),o=i.d3.keys(n[0]).filter(i.isX,i),u;return e.forEach(function(u){var e=i.getXKey(u);i.isCustomX()||i.isTimeSeries()?o.indexOf(e)>=0?i.data.xs[u]=(t&&i.data.xs[u]?i.data.xs[u]:[]).concat(n.map(function(n){return n[e]}).filter(f).map(function(n,t){return i.generateTargetX(n,u,t)})):r.data_x?i.data.xs[u]=i.getOtherTargetXs():h(r.data_xs)&&(i.data.xs[u]=i.getXValuesOfXKey(e,i.data.targets)):i.data.xs[u]=n.map(function(n,t){return t})}),e.forEach(function(n){if(!i.data.xs[n])throw new Error('x is not defined for id = "'+n+'".');}),u=e.map(function(t,u){var f=r.data_idConverter(t);return{id:f,id_org:t,values:n.map(function(n,e){var h=i.getXKey(t),o=n[h],s=i.generateTargetX(o,t,e);return i.isCustomX()&&i.isCategorized()&&u===0&&o&&(e===0&&(r.axis_x_categories=[]),r.axis_x_categories.push(o)),(c(n[t])||i.data.xs[t].length<=e)&&(s=undefined),{x:s,value:n[t]!==null&&!isNaN(n[t])?+n[t]:null,id:f}}).filter(function(n){return s(n.x)})}}),u.forEach(function(n){var t;r.data_xSort&&(n.values=n.values.sort(function(n,t){var i=n.x||n.x===0?n.x:Infinity,r=t.x||t.x===0?t.x:Infinity;return i-r}));t=0;n.values.forEach(function(n){n.index=t++});i.data.xs[n.id].sort(function(n,t){return n-t})}),r.data_type&&i.setTargetType(i.mapToIds(u).filter(function(n){return!(n in r.data_types)}),r.data_type),u.forEach(function(n){i.addCache(n.id_org,n)}),u};t.load=function(n,t){var i=this;n&&(t.filter&&(n=n.filter(t.filter)),(t.type||t.types)&&n.forEach(function(n){var r=t.types&&t.types[n.id]?t.types[n.id]:t.type;i.setTargetType(n.id,r)}),i.data.targets.forEach(function(t){for(var i=0;i<n.length;i++)if(t.id===n[i].id){t.values=n[i].values;n.splice(i,1);break}}),i.data.targets=i.data.targets.concat(n));i.updateTargets(i.data.targets);i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0});t.done&&t.done()};t.loadFromArgs=function(n){var t=this;n.data?t.load(t.convertDataToTargets(n.data),n):n.url?t.convertUrlToData(n.url,n.mimeType,n.keys,function(i){t.load(t.convertDataToTargets(i),n)}):n.json?t.load(t.convertDataToTargets(t.convertJsonToData(n.json,n.keys)),n):n.rows?t.load(t.convertDataToTargets(t.convertRowsToData(n.rows)),n):n.columns?t.load(t.convertDataToTargets(t.convertColumnsToData(n.columns)),n):t.load(null,n)};t.unload=function(n,t){var r=this;if(t||(t=function(){}),n=n.filter(function(n){return r.hasTarget(r.data.targets,n)}),!n||n.length===0){t();return}r.svg.selectAll(n.map(function(n){return r.selectorTarget(n)})).transition().style("opacity",0).remove().call(r.endall,t);n.forEach(function(n){r.withoutFadeIn[n]=!1;r.legend&&r.legend.selectAll("."+i.legendItem+r.getTargetSelectorSuffix(n)).remove();r.data.targets=r.data.targets.filter(function(t){return t.id!==n})})};t.categoryName=function(n){var t=this.config;return n<t.axis_x_categories.length?t.axis_x_categories[n]:n};t.initEventRect=function(){var n=this;n.main.select("."+i.chart).append("g").attr("class",i.eventRects).style("fill-opacity",0)};t.redrawEventRect=function(){var n=this,e=n.config,t,u,f=n.isMultipleX(),r=n.main.select("."+i.eventRects).style("cursor",e.zoom_enabled?e.axis_rotated?"ns-resize":"ew-resize":null).classed(i.eventRectsMultiple,f).classed(i.eventRectsSingle,!f);r.selectAll("."+i.eventRect).remove();n.eventRect=r.selectAll("."+i.eventRect);f?(t=n.eventRect.data([0]),n.generateEventRectsForMultipleXs(t.enter()),n.updateEventRect(t)):(u=n.getMaxDataCountTarget(n.data.targets),r.datum(u?u.values:[]),n.eventRect=r.selectAll("."+i.eventRect),t=n.eventRect.data(function(n){return n}),n.generateEventRectsForSingleX(t.enter()),n.updateEventRect(t),t.exit().remove())};t.updateEventRect=function(n){var t=this,i=t.config,f,e,o,s,r,u;n=n||t.eventRect.data(function(n){return n});t.isMultipleX()?(f=0,e=0,o=t.width,s=t.height):((t.isCustomX()||t.isTimeSeries())&&!t.isCategorized()?(t.updateXs(),r=function(n){var r=t.getPrevX(n.index),u=t.getNextX(n.index);return r===null&&u===null?i.axis_rotated?t.height:t.width:(r===null&&(r=t.x.domain()[0]),u===null&&(u=t.x.domain()[1]),Math.max(0,(t.x(u)-t.x(r))/2))},u=function(n){var i=t.getPrevX(n.index),r=t.getNextX(n.index),u=t.data.xs[n.id][n.index];return i===null&&r===null?0:(i===null&&(i=t.x.domain()[0]),(t.x(u)+t.x(i))/2)}):(r=t.getEventRectWidth(),u=function(n){return t.x(n.x)-r/2}),f=i.axis_rotated?0:u,e=i.axis_rotated?u:0,o=i.axis_rotated?t.width:r,s=i.axis_rotated?r:t.height);n.attr("class",t.classEvent.bind(t)).attr("x",f).attr("y",e).attr("width",o).attr("height",s)};t.generateEventRectsForSingleX=function(n){var t=this,u=t.d3,r=t.config;n.append("rect").attr("class",t.classEvent.bind(t)).style("cursor",r.data_selection_enabled&&r.data_selection_grouped?"pointer":null).on("mouseover",function(n){var u=n.index;t.dragging||t.flowing||t.hasArcType()||(r.point_focus_expand_enabled&&t.expandCircles(u,null,!0),t.expandBars(u,null,!0),t.main.selectAll("."+i.shape+"-"+u).each(function(n){r.data_onmouseover.call(t.api,n)}))}).on("mouseout",function(n){var u=n.index;t.config&&(t.hasArcType()||(t.hideXGridFocus(),t.hideTooltip(),t.unexpandCircles(),t.unexpandBars(),t.main.selectAll("."+i.shape+"-"+u).each(function(n){r.data_onmouseout.call(t.api,n)})))}).on("mousemove",function(n){var e,f=n.index,o=t.svg.select("."+i.eventRect+"-"+f);t.dragging||t.flowing||t.hasArcType()||(t.isStepType(n)&&t.config.line_step_type==="step-after"&&u.mouse(this)[0]<t.x(t.getXValue(n.id,f))&&(f-=1),e=t.filterTargetsToShow(t.data.targets).map(function(n){return t.addName(t.getValueOnIndex(n.values,f))}),r.tooltip_grouped&&(t.showTooltip(e,this),t.showXGridFocus(e)),r.tooltip_grouped&&(!r.data_selection_enabled||r.data_selection_grouped))||t.main.selectAll("."+i.shape+"-"+f).each(function(){u.select(this).classed(i.EXPANDED,!0);r.data_selection_enabled&&o.style("cursor",r.data_selection_grouped?"pointer":null);r.tooltip_grouped||(t.hideXGridFocus(),t.hideTooltip(),r.data_selection_grouped||(t.unexpandCircles(f),t.unexpandBars(f)))}).filter(function(n){return t.isWithinShape(this,n)}).each(function(n){r.data_selection_enabled&&(r.data_selection_grouped||r.data_selection_isselectable(n))&&o.style("cursor","pointer");r.tooltip_grouped||(t.showTooltip([n],this),t.showXGridFocus([n]),r.point_focus_expand_enabled&&t.expandCircles(f,n.id,!0),t.expandBars(f,n.id,!0))})}).on("click",function(n){var f=n.index;if(!t.hasArcType()&&t.toggleShape){if(t.cancelClick){t.cancelClick=!1;return}t.isStepType(n)&&r.line_step_type==="step-after"&&u.mouse(this)[0]<t.x(t.getXValue(n.id,f))&&(f-=1);t.main.selectAll("."+i.shape+"-"+f).each(function(n){(r.data_selection_grouped||t.isWithinShape(this,n))&&(t.toggleShape(this,n,f),t.config.data_onclick.call(t.api,n,this))})}}).call(r.data_selection_draggable&&t.drag?u.behavior.drag().origin(Object).on("drag",function(){t.drag(u.mouse(this))}).on("dragstart",function(){t.dragstart(u.mouse(this))}).on("dragend",function(){t.dragend()}):function(){})};t.generateEventRectsForMultipleXs=function(n){function f(){t.svg.select("."+i.eventRect).style("cursor",null);t.hideXGridFocus();t.hideTooltip();t.unexpandCircles();t.unexpandBars()}var t=this,u=t.d3,r=t.config;n.append("rect").attr("x",0).attr("y",0).attr("width",t.width).attr("height",t.height).attr("class",i.eventRect).on("mouseout",function(){t.config&&(t.hasArcType()||f())}).on("mousemove",function(){var e=t.filterTargetsToShow(t.data.targets),o,n,h,s;if(!t.dragging&&!t.hasArcType(e)){if(o=u.mouse(this),n=t.findClosestFromTargets(e,o),t.mouseover&&(!n||n.id!==t.mouseover.id)&&(r.data_onmouseout.call(t.api,t.mouseover),t.mouseover=undefined),!n){f();return}h=t.isScatterType(n)||!r.tooltip_grouped?[n]:t.filterByX(e,n.x);s=h.map(function(n){return t.addName(n)});t.showTooltip(s,this);r.point_focus_expand_enabled&&t.expandCircles(n.index,n.id,!0);t.expandBars(n.index,n.id,!0);t.showXGridFocus(s);(t.isBarType(n.id)||t.dist(n,o)<100)&&(t.svg.select("."+i.eventRect).style("cursor","pointer"),t.mouseover||(r.data_onmouseover.call(t.api,n),t.mouseover=n))}}).on("click",function(){var e=t.filterTargetsToShow(t.data.targets),f,n;t.hasArcType(e)||(f=u.mouse(this),n=t.findClosestFromTargets(e,f),n)&&(t.isBarType(n.id)||t.dist(n,f)<100)&&t.main.selectAll("."+i.shapes+t.getTargetSelectorSuffix(n.id)).selectAll("."+i.shape+"-"+n.index).each(function(){(r.data_selection_grouped||t.isWithinShape(this,n))&&(t.toggleShape(this,n,n.index),t.config.data_onclick.call(t.api,n,this))})}).call(r.data_selection_draggable&&t.drag?u.behavior.drag().origin(Object).on("drag",function(){t.drag(u.mouse(this))}).on("dragstart",function(){t.dragstart(u.mouse(this))}).on("dragend",function(){t.dragend()}):function(){})};t.dispatchEvent=function(t,r,u){var f=this,l="."+i.eventRect+(f.isMultipleX()?"":"-"+r),e=f.main.select(l).node(),o=e.getBoundingClientRect(),s=o.left+(u?u[0]:0),h=o.top+(u?u[1]:0),c=document.createEvent("MouseEvents");c.initMouseEvent(t,!0,!0,n,0,s,h,s,h,!1,!1,!1,!1,0,null);e.dispatchEvent(c)};t.getCurrentWidth=function(){var n=this,t=n.config;return t.size_width?t.size_width:n.getParentWidth()};t.getCurrentHeight=function(){var n=this,t=n.config,i=t.size_height?t.size_height:n.getParentHeight();return i>0?i:320/(n.hasType("gauge")?2:1)};t.getCurrentPaddingTop=function(){var n=this.config;return f(n.padding_top)?n.padding_top:0};t.getCurrentPaddingBottom=function(){var n=this.config;return f(n.padding_bottom)?n.padding_bottom:0};t.getCurrentPaddingLeft=function(n){var i=this,t=i.config;return f(t.padding_left)?t.padding_left:t.axis_rotated?t.axis_x_show?Math.max(p(i.getAxisWidthByAxisId("x",n)),40):1:!t.axis_y_show||t.axis_y_inner?i.axis.getYAxisLabelPosition().isOuter?30:1:p(i.getAxisWidthByAxisId("y",n))};t.getCurrentPaddingRight=function(){var n=this,t=n.config,i=n.isLegendRight?n.getLegendWidth()+20:0;return f(t.padding_right)?t.padding_right+1:t.axis_rotated?10+i:!t.axis_y2_show||t.axis_y2_inner?2+i+(n.axis.getY2AxisLabelPosition().isOuter?20:0):p(n.getAxisWidthByAxisId("y2"))+i};t.getParentRectValue=function(n){for(var t=this.selectChart.node(),i;t&&t.tagName!=="BODY";){try{i=t.getBoundingClientRect()[n]}catch(r){n==="width"&&(i=t.offsetWidth)}if(i)break;t=t.parentNode}return i};t.getParentWidth=function(){return this.getParentRectValue("width")};t.getParentHeight=function(){var n=this.selectChart.style("height");return n.indexOf("px")>0?+n.replace("px",""):0};t.getSvgLeft=function(n){var t=this,r=t.config,e=r.axis_rotated||!r.axis_rotated&&!r.axis_y_inner,o=r.axis_rotated?i.axisX:i.axisY,u=t.main.select("."+o).node(),s=u&&e?u.getBoundingClientRect():{right:0},h=t.selectChart.node().getBoundingClientRect(),c=t.hasArcType(),f=s.right-h.left-(c?0:t.getCurrentPaddingLeft(n));return f>0?f:0};t.getAxisWidthByAxisId=function(n,t){var i=this,r=i.axis.getLabelPositionById(n);return i.axis.getMaxTickWidth(n,t)+(r.isInner?20:40)};t.getHorizontalAxisHeight=function(n){var i=this,t=i.config,r=30;return n==="x"&&!t.axis_x_show?8:n==="x"&&t.axis_x_height?t.axis_x_height:n==="y"&&!t.axis_y_show?t.legend_show&&!i.isLegendRight&&!i.isLegendInset?10:1:n==="y2"&&!t.axis_y2_show?i.rotated_padding_top:(n==="x"&&!t.axis_rotated&&t.axis_x_tick_rotate&&(r=30+i.axis.getMaxTickWidth(n)*Math.cos(Math.PI*(90-t.axis_x_tick_rotate)/180)),r+(i.axis.getLabelPositionById(n).isInner?0:10)+(n==="y2"?-10:0))};t.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())};t.getShapeIndices=function(n){var f=this,r=f.config,t={},e=0,i,u;return f.filterTargetsToShow(f.data.targets.filter(n,f)).forEach(function(n){for(i=0;i<r.data_groups.length;i++)if(!(r.data_groups[i].indexOf(n.id)<0))for(u=0;u<r.data_groups[i].length;u++)if(r.data_groups[i][u]in t){t[n.id]=t[r.data_groups[i][u]];break}c(t[n.id])&&(t[n.id]=e++)}),t.__max__=e-1,t};t.getShapeX=function(n,t,i,r){var u=this,f=r?u.subX:u.x;return function(r){var u=r.id in i?i[r.id]:0;return r.x||r.x===0?f(r.x)-n*(t/2-u):0}};t.getShapeY=function(n){var t=this;return function(i){var r=n?t.getSubYScale(i.id):t.getYScale(i.id);return r(i.value)}};t.getShapeOffset=function(n,t,i){var r=this,u=r.orderTargets(r.filterTargetsToShow(r.data.targets.filter(n,r))),f=u.map(function(n){return n.id});return function(n,e){var o=i?r.getSubYScale(n.id):r.getYScale(n.id),s=o(0),h=s;return u.forEach(function(i){var u=r.isStepType(n)?r.convertValuesToStep(i.values):i.values;i.id!==n.id&&t[i.id]===t[n.id]&&f.indexOf(i.id)<f.indexOf(n.id)&&u[e].value*n.value>=0&&(h+=o(u[e].value)-s)}),h}};t.isWithinShape=function(n,t){var r=this,f=r.d3.select(n),u;return r.isTargetToShow(t.id)?n.nodeName==="circle"?u=r.isStepType(t)?r.isWithinStep(n,r.getYScale(t.id)(t.value)):r.isWithinCircle(n,r.pointSelectR(t)*1.5):n.nodeName==="path"&&(u=f.classed(i.bar)?r.isWithinBar(n):!0):u=!1,u};t.getInterpolate=function(n){var t=this;return t.isSplineType(n)?"cardinal":t.isStepType(n)?t.config.line_step_type:"linear"};t.initLine=function(){var n=this;n.main.select("."+i.chart).append("g").attr("class",i.chartLines)};t.updateTargetsForLine=function(n){var t=this,e=t.config,u,r,f=t.classChartLine.bind(t),o=t.classLines.bind(t),s=t.classAreas.bind(t),h=t.classCircles.bind(t),c=t.classFocus.bind(t);u=t.main.select("."+i.chartLines).selectAll("."+i.chartLine).data(n).attr("class",function(n){return f(n)+c(n)});r=u.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none");r.append("g").attr("class",o);r.append("g").attr("class",s);r.append("g").attr("class",function(n){return t.generateClass(i.selectedCircles,n.id)});r.append("g").attr("class",h).style("cursor",function(n){return e.data_selection_isselectable(n)?"pointer":null});n.forEach(function(n){t.main.selectAll("."+i.selectedCircles+t.getTargetSelectorSuffix(n.id)).selectAll("."+i.selectedCircle).each(function(t){t.value=n.values[t.index].value})})};t.updateLine=function(n){var t=this;t.mainLine=t.main.selectAll("."+i.lines).selectAll("."+i.line).data(t.lineData.bind(t));t.mainLine.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color);t.mainLine.style("opacity",t.initialOpacity.bind(t)).style("shape-rendering",function(n){return t.isStepType(n)?"crispEdges":""}).attr("transform",null);t.mainLine.exit().transition().duration(n).style("opacity",0).remove()};t.redrawLine=function(n,t){return[(t?this.mainLine.transition():this.mainLine).attr("d",n).style("stroke",this.color).style("opacity",1)]};t.generateDrawLine=function(n,t){var i=this,r=i.config,u=i.d3.svg.line(),s=i.generateGetLinePoints(n,t),f=t?i.getSubYScale:i.getYScale,e=function(n){return(t?i.subxx:i.xx).call(i,n)},o=function(n,t){return r.data_groups.length>0?s(n,t)[0][1]:f.call(i,n.id)(n.value)};return u=r.axis_rotated?u.x(o).y(e):u.x(e).y(o),r.line_connectNull||(u=u.defined(function(n){return n.value!=null})),function(n){var e=r.line_connectNull?i.filterRemoveNull(n.values):n.values,c=t?i.x:i.subX,l=f.call(i,n.id),s=0,h=0,o;return i.isLineType(n)?r.data_regions[n.id]?o=i.lineWithRegions(e,c,l,r.data_regions[n.id]):(i.isStepType(n)&&(e=i.convertValuesToStep(e)),o=u.interpolate(i.getInterpolate(n))(e)):(e[0]&&(s=c(e[0].x),h=l(e[0].value)),o=r.axis_rotated?"M "+h+" "+s:"M "+s+" "+h),o?o:"M 0 0"}};t.generateGetLinePoints=function(n,t){var i=this,r=i.config,u=n.__max__+1,f=i.getShapeX(0,u,n,!!t),e=i.getShapeY(!!t),o=i.getShapeOffset(i.isLineType,n,!!t),s=t?i.getSubYScale:i.getYScale;return function(n,t){var u=s.call(i,n.id)(0),c=o(n,t)||u,l=f(n),h=e(n);return r.axis_rotated&&(0<n.value&&h<u||n.value<0&&u<h)&&(h=u),[[l,h-(u-c)],[l,h-(u-c)],[l,h-(u-c)],[l,h-(u-c)]]}};t.lineWithRegions=function(n,t,i,r){function ut(n,t){for(var i=0;i<t.length;i++)if(t[i].start<n&&n<=t[i].end)return!0;return!1}function it(n){return"M"+n[0][0]+" "+n[0][1]+" "+n[1][0]+" "+n[1][1]}var f=this,l=f.config,rt=-1,u,a,y="M",p,o,e,w,b,k,v,d,g=f.isCategorized()?.5:0,nt,tt,h=[];if(s(r))for(u=0;u<r.length;u++)h[u]={},h[u].start=c(r[u].start)?n[0].x:f.isTimeSeries()?f.parseDate(r[u].start):r[u].start,h[u].end=c(r[u].end)?n[n.length-1].x:f.isTimeSeries()?f.parseDate(r[u].end):r[u].end;for(nt=l.axis_rotated?function(n){return i(n.value)}:function(n){return t(n.x)},tt=l.axis_rotated?function(n){return t(n.x)}:function(n){return i(n.value)},p=f.isTimeSeries()?function(n,r,u,f){var o=n.x.getTime(),s=r.x-n.x,h=new Date(o+s*u),c=new Date(o+s*(u+f)),a;return a=l.axis_rotated?[[i(e(u)),t(h)],[i(e(u+f)),t(c)]]:[[t(h),i(e(u))],[t(c),i(e(u+f))]],it(a)}:function(n,r,u,f){var s;return s=l.axis_rotated?[[i(e(u),!0),t(o(u))],[i(e(u+f),!0),t(o(u+f))]]:[[t(o(u),!0),i(e(u))],[t(o(u+f),!0),i(e(u+f))]],it(s)},u=0;u<n.length;u++){if(c(h)||!ut(n[u].x,h))y+=" "+nt(n[u])+" "+tt(n[u]);else for(o=f.getScale(n[u-1].x+g,n[u].x+g,f.isTimeSeries()),e=f.getScale(n[u-1].value,n[u].value),w=t(n[u].x)-t(n[u-1].x),b=i(n[u].value)-i(n[u-1].value),k=Math.sqrt(Math.pow(w,2)+Math.pow(b,2)),v=2/k,d=v*2,a=v;a<=1;a+=d)y+=p(n[u-1],n[u],a,v);rt=n[u].x}return y};t.updateArea=function(n){var t=this,r=t.d3;t.mainArea=t.main.selectAll("."+i.areas).selectAll("."+i.area).data(t.lineData.bind(t));t.mainArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+r.select(this).style("opacity"),0});t.mainArea.style("opacity",t.orgAreaOpacity);t.mainArea.exit().transition().duration(n).style("opacity",0).remove()};t.redrawArea=function(n,t){return[(t?this.mainArea.transition():this.mainArea).attr("d",n).style("fill",this.color).style("opacity",this.orgAreaOpacity)]};t.generateDrawArea=function(n,t){var i=this,r=i.config,u=i.d3.svg.area(),f=i.generateGetAreaPoints(n,t),e=t?i.getSubYScale:i.getYScale,o=function(n){return(t?i.subxx:i.xx).call(i,n)},s=function(n,t){return r.data_groups.length>0?f(n,t)[0][1]:e.call(i,n.id)(i.getAreaBaseValue(n.id))},h=function(n,t){return r.data_groups.length>0?f(n,t)[1][1]:e.call(i,n.id)(n.value)};return u=r.axis_rotated?u.x0(s).x1(h).y(o):u.x(o).y0(s).y1(h),r.line_connectNull||(u=u.defined(function(n){return n.value!==null})),function(n){var t=r.line_connectNull?i.filterRemoveNull(n.values):n.values,e=0,o=0,f;return i.isAreaType(n)?(i.isStepType(n)&&(t=i.convertValuesToStep(t)),f=u.interpolate(i.getInterpolate(n))(t)):(t[0]&&(e=i.x(t[0].x),o=i.getYScale(n.id)(t[0].value)),f=r.axis_rotated?"M "+o+" "+e:"M "+e+" "+o),f?f:"M 0 0"}};t.getAreaBaseValue=function(){return 0};t.generateGetAreaPoints=function(n,t){var i=this,r=i.config,u=n.__max__+1,f=i.getShapeX(0,u,n,!!t),e=i.getShapeY(!!t),o=i.getShapeOffset(i.isAreaType,n,!!t),s=t?i.getSubYScale:i.getYScale;return function(n,t){var u=s.call(i,n.id)(0),c=o(n,t)||u,l=f(n),h=e(n);return r.axis_rotated&&(0<n.value&&h<u||n.value<0&&u<h)&&(h=u),[[l,c],[l,h-(u-c)],[l,h-(u-c)],[l,c]]}};t.updateCircle=function(){var n=this;n.mainCircle=n.main.selectAll("."+i.circles).selectAll("."+i.circle).data(n.lineOrScatterData.bind(n));n.mainCircle.enter().append("circle").attr("class",n.classCircle.bind(n)).attr("r",n.pointR.bind(n)).style("fill",n.color);n.mainCircle.style("opacity",n.initialOpacityForCircle.bind(n));n.mainCircle.exit().remove()};t.redrawCircle=function(n,t,r){var u=this.main.selectAll("."+i.selectedCircle);return[(r?this.mainCircle.transition():this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",n).attr("cy",t),(r?u.transition():u).attr("cx",n).attr("cy",t)]};t.circleX=function(n){return n.x||n.x===0?this.x(n.x):null};t.updateCircleY=function(){var n=this,t,i;n.config.data_groups.length>0?(t=n.getShapeIndices(n.isLineType),i=n.generateGetLinePoints(t),n.circleY=function(n,t){return i(n,t)[0][1]}):n.circleY=function(t){return n.getYScale(t.id)(t.value)}};t.getCircles=function(n,t){var r=this;return(t?r.main.selectAll("."+i.circles+r.getTargetSelectorSuffix(t)):r.main).selectAll("."+i.circle+(f(n)?"-"+n:""))};t.expandCircles=function(n,t,r){var u=this,f=u.pointExpandedR.bind(u);r&&u.unexpandCircles();u.getCircles(n,t).classed(i.EXPANDED,!0).attr("r",f)};t.unexpandCircles=function(n){var t=this,r=t.pointR.bind(t);t.getCircles(n).filter(function(){return t.d3.select(this).classed(i.EXPANDED)}).classed(i.EXPANDED,!1).attr("r",r)};t.pointR=function(n){var i=this,t=i.config;return i.isStepType(n)?0:a(t.point_r)?t.point_r(n):t.point_r};t.pointExpandedR=function(n){var t=this,i=t.config;return i.point_focus_expand_enabled?i.point_focus_expand_r?i.point_focus_expand_r:t.pointR(n)*1.75:t.pointR(n)};t.pointSelectR=function(n){var t=this,i=t.config;return i.point_select_r?i.point_select_r:t.pointR(n)*4};t.isWithinCircle=function(n,t){var i=this.d3,r=i.mouse(n),u=i.select(n),f=+u.attr("cx"),e=+u.attr("cy");return Math.sqrt(Math.pow(f-r[0],2)+Math.pow(e-r[1],2))<t};t.isWithinStep=function(n,t){return Math.abs(t-this.d3.mouse(n)[1])<30};t.initBar=function(){var n=this;n.main.select("."+i.chart).append("g").attr("class",i.chartBars)};t.updateTargetsForBar=function(n){var t=this,e=t.config,r,u,f=t.classChartBar.bind(t),o=t.classBars.bind(t),s=t.classFocus.bind(t);r=t.main.select("."+i.chartBars).selectAll("."+i.chartBar).data(n).attr("class",function(n){return f(n)+s(n)});u=r.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none");u.append("g").attr("class",o).style("cursor",function(n){return e.data_selection_isselectable(n)?"pointer":null})};t.updateBar=function(n){var t=this,u=t.barData.bind(t),f=t.classBar.bind(t),e=t.initialOpacity.bind(t),r=function(n){return t.color(n.id)};t.mainBar=t.main.selectAll("."+i.bars).selectAll("."+i.bar).data(u);t.mainBar.enter().append("path").attr("class",f).style("stroke",r).style("fill",r);t.mainBar.style("opacity",e);t.mainBar.exit().transition().duration(n).style("opacity",0).remove()};t.redrawBar=function(n,t){return[(t?this.mainBar.transition():this.mainBar).attr("d",n).style("fill",this.color).style("opacity",1)]};t.getBarW=function(n,t){var u=this,i=u.config,r=typeof i.bar_width=="number"?i.bar_width:t?n.tickInterval()*i.bar_width_ratio/t:0;return i.bar_width_max&&r>i.bar_width_max?i.bar_width_max:r};t.getBars=function(n,t){var r=this;return(t?r.main.selectAll("."+i.bars+r.getTargetSelectorSuffix(t)):r.main).selectAll("."+i.bar+(f(n)?"-"+n:""))};t.expandBars=function(n,t,r){var u=this;r&&u.unexpandBars();u.getBars(n,t).classed(i.EXPANDED,!0)};t.unexpandBars=function(n){var t=this;t.getBars(n).classed(i.EXPANDED,!1)};t.generateDrawBar=function(n,t){var i=this,r=i.config,u=i.generateGetBarPoints(n,t);return function(n,t){var i=u(n,t),f=r.axis_rotated?1:0,e=r.axis_rotated?0:1;return"M "+i[0][f]+","+i[0][e]+" L"+i[1][f]+","+i[1][e]+" L"+i[2][f]+","+i[2][e]+" L"+i[3][f]+","+i[3][e]+" z"}};t.generateGetBarPoints=function(n,t){var i=this,f=t?i.subXAxis:i.xAxis,u=n.__max__+1,r=i.getBarW(f,u),e=i.getShapeX(r,u,n,!!t),o=i.getShapeY(!!t),s=i.getShapeOffset(i.isBarType,n,!!t),h=t?i.getSubYScale:i.getYScale;return function(n,t){var u=h.call(i,n.id)(0),c=s(n,t)||u,l=e(n),f=o(n);return i.config.axis_rotated&&(0<n.value&&f<u||n.value<0&&u<f)&&(f=u),[[l,c],[l,f-(u-c)],[l+r,f-(u-c)],[l+r,c]]}};t.isWithinBar=function(n){var t=this.d3.mouse(n),r=n.getBoundingClientRect(),u=n.pathSegList.getItem(0),f=n.pathSegList.getItem(1),e=Math.min(u.x,f.x),o=Math.min(u.y,f.y),s=r.width,h=r.height,i=2,c=e-i,l=e+s+i,a=o+h+i,v=o-i;return c<t[0]&&t[0]<l&&v<t[1]&&t[1]<a};t.initText=function(){var n=this;n.main.select("."+i.chart).append("g").attr("class",i.chartTexts);n.mainText=n.d3.selectAll([])};t.updateTargetsForText=function(n){var t=this,r,u,f=t.classChartText.bind(t),e=t.classTexts.bind(t),o=t.classFocus.bind(t);r=t.main.select("."+i.chartTexts).selectAll("."+i.chartText).data(n).attr("class",function(n){return f(n)+o(n)});u=r.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none");u.append("g").attr("class",e)};t.updateText=function(n){var t=this,r=t.config,u=t.barOrLineData.bind(t),f=t.classText.bind(t);t.mainText=t.main.selectAll("."+i.texts).selectAll("."+i.text).data(u);t.mainText.enter().append("text").attr("class",f).attr("text-anchor",function(n){return r.axis_rotated?n.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(n){return t.color(n)}).style("fill-opacity",0);t.mainText.text(function(n,i,r){return t.dataLabelFormat(n.id)(n.value,n.id,i,r)});t.mainText.exit().transition().duration(n).style("fill-opacity",0).remove()};t.redrawText=function(n,t,i,r){return[(r?this.mainText.transition():this.mainText).attr("x",n).attr("y",t).style("fill",this.color).style("fill-opacity",i?0:this.opacityForText.bind(this))]};t.getTextRect=function(n,t){var i=this.d3.select("body").append("div").classed("c3",!0),u=i.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),r;return u.selectAll(".dummy").data([n]).enter().append("text").classed(t?t:"",!0).text(n).each(function(){r=this.getBoundingClientRect()}),i.remove(),r};t.generateXYForText=function(n,t,i,r){var u=this,f=u.generateGetAreaPoints(n,!1),e=u.generateGetBarPoints(t,!1),o=u.generateGetLinePoints(i,!1),s=r?u.getXForText:u.getYForText;return function(n,t){var i=u.isAreaType(n)?f:u.isBarType(n)?e:o;return s.call(u,i(n,t),n,this)}};t.getXForText=function(n,t,i){var u=this,e=i.getBoundingClientRect(),r,f;return u.config.axis_rotated?(f=u.isBarType(t)?4:6,r=n[2][1]+f*(t.value<0?-1:1)):r=u.hasType("bar")?(n[2][0]+n[0][0])/2:n[0][0],t.value===null&&(r>u.width?r=u.width-e.width:r<0&&(r=4)),r};t.getYForText=function(n,t,i){var u=this,f=i.getBoundingClientRect(),r;return u.config.axis_rotated?r=(n[0][0]+n[2][0]+f.height*.6)/2:(r=n[2][1],t.value<0?(r+=f.height,u.isBarType(t)&&u.isSafari()?r-=3:!u.isBarType(t)&&u.isChrome()&&(r+=3)):r+=u.isBarType(t)?-3:-6),t.value!==null||u.config.axis_rotated||(r<f.height?r=f.height:r>this.height&&(r=this.height-4)),r};t.setTargetType=function(n,t){var i=this,r=i.config;i.mapToTargetIds(n).forEach(function(n){i.withoutFadeIn[n]=t===r.data_types[n];r.data_types[n]=t});n||(r.data_type=t)};t.hasType=function(n,t){var u=this,i=u.config.data_types,r=!1;return t=t||u.data.targets,t&&t.length?t.forEach(function(t){var u=i[t.id];(u&&u.indexOf(n)>=0||!u&&n==="line")&&(r=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(t){i[t]===n&&(r=!0)}):r=u.config.data_type===n,r};t.hasArcType=function(n){return this.hasType("pie",n)||this.hasType("donut",n)||this.hasType("gauge",n)};t.isLineType=function(n){var t=this.config,i=o(n)?n:n.id;return!t.data_types[i]||["line","spline","area","area-spline","step","area-step"].indexOf(t.data_types[i])>=0};t.isStepType=function(n){var t=o(n)?n:n.id;return["step","area-step"].indexOf(this.config.data_types[t])>=0};t.isSplineType=function(n){var t=o(n)?n:n.id;return["spline","area-spline"].indexOf(this.config.data_types[t])>=0};t.isAreaType=function(n){var t=o(n)?n:n.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[t])>=0};t.isBarType=function(n){var t=o(n)?n:n.id;return this.config.data_types[t]==="bar"};t.isScatterType=function(n){var t=o(n)?n:n.id;return this.config.data_types[t]==="scatter"};t.isPieType=function(n){var t=o(n)?n:n.id;return this.config.data_types[t]==="pie"};t.isGaugeType=function(n){var t=o(n)?n:n.id;return this.config.data_types[t]==="gauge"};t.isDonutType=function(n){var t=o(n)?n:n.id;return this.config.data_types[t]==="donut"};t.isArcType=function(n){return this.isPieType(n)||this.isDonutType(n)||this.isGaugeType(n)};t.lineData=function(n){return this.isLineType(n)?[n]:[]};t.arcData=function(n){return this.isArcType(n.data)?[n]:[]};t.barData=function(n){return this.isBarType(n)?n.values:[]};t.lineOrScatterData=function(n){return this.isLineType(n)||this.isScatterType(n)?n.values:[]};t.barOrLineData=function(n){return this.isBarType(n)||this.isLineType(n)?n.values:[]};t.initGrid=function(){var n=this,t=n.config,r=n.d3;n.grid=n.main.append("g").attr("clip-path",n.clipPathForGrid).attr("class",i.grid);t.grid_x_show&&n.grid.append("g").attr("class",i.xgrids);t.grid_y_show&&n.grid.append("g").attr("class",i.ygrids);t.grid_focus_show&&n.grid.append("g").attr("class",i.xgridFocus).append("line").attr("class",i.xgridFocus);n.xgrid=r.selectAll([]);t.grid_lines_front||n.initGridLines()};t.initGridLines=function(){var n=this,t=n.d3;n.gridLines=n.main.append("g").attr("clip-path",n.clipPathForGrid).attr("class",i.grid+" "+i.gridLines);n.gridLines.append("g").attr("class",i.xgridLines);n.gridLines.append("g").attr("class",i.ygridLines);n.xgridLines=t.selectAll([])};t.updateXGrid=function(n){var t=this,r=t.config,f=t.d3,e=t.generateGridData(r.grid_x_type,t.x),u=t.isCategorized()?t.xAxis.tickOffset():0;t.xgridAttr=r.axis_rotated?{x1:0,x2:t.width,y1:function(n){return t.x(n)-u},y2:function(n){return t.x(n)-u}}:{x1:function(n){return t.x(n)+u},x2:function(n){return t.x(n)+u},y1:0,y2:t.height};t.xgrid=t.main.select("."+i.xgrids).selectAll("."+i.xgrid).data(e);t.xgrid.enter().append("line").attr("class",i.xgrid);n||t.xgrid.attr(t.xgridAttr).style("opacity",function(){return+f.select(this).attr(r.axis_rotated?"y1":"x1")===(r.axis_rotated?t.height:0)?0:1});t.xgrid.exit().remove()};t.updateYGrid=function(){var n=this,t=n.config,r=n.yAxis.tickValues()||n.y.ticks(t.grid_y_ticks);n.ygrid=n.main.select("."+i.ygrids).selectAll("."+i.ygrid).data(r);n.ygrid.enter().append("line").attr("class",i.ygrid);n.ygrid.attr("x1",t.axis_rotated?n.y:0).attr("x2",t.axis_rotated?n.y:n.width).attr("y1",t.axis_rotated?0:n.y).attr("y2",t.axis_rotated?n.height:n.y);n.ygrid.exit().remove();n.smoothLines(n.ygrid,"grid")};t.gridTextAnchor=function(n){return n.position?n.position:"end"};t.gridTextDx=function(n){return n.position==="start"?4:n.position==="middle"?0:-4};t.xGridTextX=function(n){return n.position==="start"?-this.height:n.position==="middle"?-this.height/2:0};t.yGridTextX=function(n){return n.position==="start"?0:n.position==="middle"?this.width/2:this.width};t.updateGrid=function(n){var t=this,f=t.main,r=t.config,e,o,u;t.grid.style("visibility",t.hasArcType()?"hidden":"visible");f.select("line."+i.xgridFocus).style("visibility","hidden");r.grid_x_show&&t.updateXGrid();t.xgridLines=f.select("."+i.xgridLines).selectAll("."+i.xgridLine).data(r.grid_x_lines);e=t.xgridLines.enter().append("g").attr("class",function(n){return i.xgridLine+(n["class"]?" "+n["class"]:"")});e.append("line").style("opacity",0);e.append("text").attr("text-anchor",t.gridTextAnchor).attr("transform",r.axis_rotated?"":"rotate(-90)").attr("dx",t.gridTextDx).attr("dy",-5).style("opacity",0);t.xgridLines.exit().transition().duration(n).style("opacity",0).remove();r.grid_y_show&&t.updateYGrid();t.ygridLines=f.select("."+i.ygridLines).selectAll("."+i.ygridLine).data(r.grid_y_lines);o=t.ygridLines.enter().append("g").attr("class",function(n){return i.ygridLine+(n["class"]?" "+n["class"]:"")});o.append("line").style("opacity",0);o.append("text").attr("text-anchor",t.gridTextAnchor).attr("transform",r.axis_rotated?"rotate(-90)":"").attr("dx",t.gridTextDx).attr("dy",-5).style("opacity",0);u=t.yv.bind(t);t.ygridLines.select("line").transition().duration(n).attr("x1",r.axis_rotated?u:0).attr("x2",r.axis_rotated?u:t.width).attr("y1",r.axis_rotated?0:u).attr("y2",r.axis_rotated?t.height:u).style("opacity",1);t.ygridLines.select("text").transition().duration(n).attr("x",r.axis_rotated?t.xGridTextX.bind(t):t.yGridTextX.bind(t)).attr("y",u).text(function(n){return n.text}).style("opacity",1);t.ygridLines.exit().transition().duration(n).style("opacity",0).remove()};t.redrawGrid=function(n){var t=this,i=t.config,r=t.xv.bind(t),u=t.xgridLines.select("line"),f=t.xgridLines.select("text");return[(n?u.transition():u).attr("x1",i.axis_rotated?0:r).attr("x2",i.axis_rotated?t.width:r).attr("y1",i.axis_rotated?r:0).attr("y2",i.axis_rotated?r:t.height).style("opacity",1),(n?f.transition():f).attr("x",i.axis_rotated?t.yGridTextX.bind(t):t.xGridTextX.bind(t)).attr("y",r).text(function(n){return n.text}).style("opacity",1)]};t.showXGridFocus=function(n){var t=this,r=t.config,o=n.filter(function(n){return n&&f(n.value)}),u=t.main.selectAll("line."+i.xgridFocus),e=t.xx.bind(t);r.tooltip_show&&(t.hasType("scatter")||t.hasArcType()||(u.style("visibility","visible").data([o[0]]).attr(r.axis_rotated?"y1":"x1",e).attr(r.axis_rotated?"y2":"x2",e),t.smoothLines(u,"grid")))};t.hideXGridFocus=function(){this.main.select("line."+i.xgridFocus).style("visibility","hidden")};t.updateXgridFocus=function(){var n=this,t=n.config;n.main.select("line."+i.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?n.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:n.height)};t.generateGridData=function(n,t){var e=this,r=[],f,o,s,u,h=e.main.select("."+i.axisX).selectAll(".tick").size();if(n==="year")for(f=e.getXDomain(),o=f[0].getFullYear(),s=f[1].getFullYear(),u=o;u<=s;u++)r.push(new Date(u+"-01-01 00:00:00"));else r=t.ticks(10),r.length>h&&(r=r.filter(function(n){return(""+n).indexOf(".")<0}));return r};t.getGridFilterToRemove=function(n){return n?function(t){var i=!1;return[].concat(n).forEach(function(n){("value"in n&&t.value===n.value||"class"in n&&t["class"]===n["class"])&&(i=!0)}),i}:function(){return!0}};t.removeGridLines=function(n,t){var u=this,r=u.config,f=u.getGridFilterToRemove(n),e=function(n){return!f(n)},o=t?i.xgridLines:i.ygridLines,s=t?i.xgridLine:i.ygridLine;u.main.select("."+o).selectAll("."+s).filter(f).transition().duration(r.transition_duration).style("opacity",0).remove();t?r.grid_x_lines=r.grid_x_lines.filter(e):r.grid_y_lines=r.grid_y_lines.filter(e)};t.initTooltip=function(){var n=this,t=n.config,r;if(n.tooltip=n.selectChart.style("position","relative").append("div").attr("class",i.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),t.tooltip_init_show){if(n.isTimeSeries()&&o(t.tooltip_init_x)){for(t.tooltip_init_x=n.parseDate(t.tooltip_init_x),r=0;r<n.data.targets[0].values.length;r++)if(n.data.targets[0].values[r].x-t.tooltip_init_x==0)break;t.tooltip_init_x=r}n.tooltip.html(t.tooltip_contents.call(n,n.data.targets.map(function(i){return n.addName(i.values[t.tooltip_init_x])}),n.axis.getXAxisTickFormat(),n.getYFormat(n.hasArcType()),n.color));n.tooltip.style("top",t.tooltip_init_position.top).style("left",t.tooltip_init_position.left).style("display","block")}};t.getTooltipContent=function(n,t,r,u){for(var s=this,h=s.config,l=h.tooltip_format_title||t,y=h.tooltip_format_name||function(n){return n},p=h.tooltip_format_value||r,e,o,c,a,v,f=0;f<n.length;f++)n[f]&&(n[f].value||n[f].value===0)&&(e||(o=l?l(n[f].x):n[f].x,e="<table class='"+i.tooltip+"'>"+(o||o===0?"<tr><th colspan='2'>"+o+"<\/th><\/tr>":"")),c=p(n[f].value,n[f].ratio,n[f].id,n[f].index),c!==undefined&&(a=y(n[f].name,n[f].ratio,n[f].id,n[f].index),v=s.levelColor?s.levelColor(n[f].value):u(n[f].id),e+="<tr class='"+i.tooltipName+"-"+n[f].id+"'>",e+="<td class='name'><span style='background-color:"+v+"'><\/span>"+a+"<\/td>",e+="<td class='value'>"+c+"<\/td>",e+="<\/tr>"));return e+"<\/table>"};t.tooltipPosition=function(n,t,i,r){var u=this,l=u.config,a=u.d3,o,e,s,f,h,v=u.hasArcType(),c=a.mouse(r);return v?(e=(u.width-(u.isLegendRight?u.getLegendWidth():0))/2+c[0],f=u.height/2+c[1]+20):(o=u.getSvgLeft(!0),l.axis_rotated?(e=o+c[0]+100,s=e+t,h=u.currentWidth-u.getCurrentPaddingRight(),f=u.x(n[0].x)+20):(e=o+u.getCurrentPaddingLeft(!0)+u.x(n[0].x)+20,s=e+t,h=o+u.currentWidth-u.getCurrentPaddingRight(),f=c[1]+15),s>h&&(e-=s-h+20),f+i>u.currentHeight&&(f-=i+30)),f<0&&(f=0),{top:f,left:e}};t.showTooltip=function(n,i){var r=this,u=r.config,o,s,e,c=r.hasArcType(),h=n.filter(function(n){return n&&f(n.value)}),l=u.tooltip_position||t.tooltipPosition;h.length!==0&&u.tooltip_show&&(r.tooltip.html(u.tooltip_contents.call(r,n,r.axis.getXAxisTickFormat(),r.getYFormat(c),r.color)).style("display","block"),o=r.tooltip.property("offsetWidth"),s=r.tooltip.property("offsetHeight"),e=l.call(this,h,o,s,i),r.tooltip.style("top",e.top+"px").style("left",e.left+"px"))};t.hideTooltip=function(){this.tooltip.style("display","none")};t.initLegend=function(){var n=this;if(n.legendItemTextBox={},n.legendHasRendered=!1,n.legend=n.svg.append("g").attr("transform",n.getTranslate("legend")),!n.config.legend_show){n.legend.style("visibility","hidden");n.hiddenLegendIds=n.mapToIds(n.data.targets);return}n.updateLegendWithDefaults()};t.updateLegendWithDefaults=function(){var n=this;n.updateLegend(n.mapToIds(n.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})};t.updateSizeForLegend=function(n,t){var i=this,r=i.config,u={top:i.isLegendTop?i.getCurrentPaddingTop()+r.legend_inset_y+5.5:i.currentHeight-n-i.getCurrentPaddingBottom()-r.legend_inset_y,left:i.isLegendLeft?i.getCurrentPaddingLeft()+r.legend_inset_x+.5:i.currentWidth-t-i.getCurrentPaddingRight()-r.legend_inset_x+.5};i.margin3={top:i.isLegendRight?0:i.isLegendInset?u.top:i.currentHeight-n,right:NaN,bottom:0,left:i.isLegendRight?i.currentWidth-t:i.isLegendInset?u.left:0}};t.transformLegend=function(n){var t=this;(n?t.legend.transition():t.legend).attr("transform",t.getTranslate("legend"))};t.updateLegendStep=function(n){this.legendStep=n};t.updateLegendItemWidth=function(n){this.legendItemWidth=n};t.updateLegendItemHeight=function(n){this.legendItemHeight=n};t.getLegendWidth=function(){var n=this;return n.config.legend_show?n.isLegendRight||n.isLegendInset?n.legendItemWidth*(n.legendStep+1):n.currentWidth:0};t.getLegendHeight=function(){var n=this,t=0;return n.config.legend_show&&(t=n.isLegendRight?n.currentHeight:Math.max(20,n.legendItemHeight)*(n.legendStep+1)),t};t.opacityForLegend=function(n){return n.classed(i.legendItemHidden)?null:1};t.opacityForUnfocusedLegend=function(n){return n.classed(i.legendItemHidden)?null:.3};t.toggleFocusLegend=function(n,t){var r=this;n=r.mapToTargetIds(n);r.legend.selectAll("."+i.legendItem).filter(function(t){return n.indexOf(t)>=0}).classed(i.legendItemFocused,t).transition().duration(100).style("opacity",function(){var n=t?r.opacityForLegend:r.opacityForUnfocusedLegend;return n.call(r,r.d3.select(this))})};t.revertLegend=function(){var n=this,t=n.d3;n.legend.selectAll("."+i.legendItem).classed(i.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return n.opacityForLegend(t.select(this))})};t.showLegend=function(n){var t=this,i=t.config;i.legend_show||(i.legend_show=!0,t.legend.style("visibility","visible"),t.legendHasRendered||t.updateLegendWithDefaults());t.removeHiddenLegendIds(n);t.legend.selectAll(t.selectorLegends(n)).style("visibility","visible").transition().style("opacity",function(){return t.opacityForLegend(t.d3.select(this))})};t.hideLegend=function(n){var t=this,i=t.config;i.legend_show&&g(n)&&(i.legend_show=!1,t.legend.style("visibility","hidden"));t.addHiddenLegendIds(n);t.legend.selectAll(t.selectorLegends(n)).style("opacity",0).style("visibility","hidden")};t.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}};t.updateLegend=function(n,t,r){function yt(n,t){return u.legendItemTextBox[t]||(u.legendItemTextBox[t]=u.getTextRect(n.textContent,i.legendItem)),u.legendItemTextBox[t]}function ct(t,i,r){function d(n,t){t||(e=(p-y-v)/2,e<st&&(e=(p-v)/2,y=0,h++));l[n]=h;tt[h]=u.isLegendInset?10:e;w[n]=y;y+=v}var it=r===0,rt=r===n.length-1,g=yt(t,i),s=g.width+vt+(rt&&!(u.isLegendRight||u.isLegendInset)?0:at),a=g.height+lt,v=u.isLegendRight||u.isLegendInset?a:s,p=u.isLegendRight||u.isLegendInset?u.getLegendHeight():u.getLegendWidth(),e,nt;if(it&&(y=0,h=0,o=0,c=0),f.legend_show&&!u.isLegendToShow(i)){b[i]=k[i]=l[i]=w[i]=0;return}b[i]=s;k[i]=a;(!o||s>=o)&&(o=s);(!c||a>=c)&&(c=a);nt=u.isLegendRight||u.isLegendInset?c:o;f.legend_equally?(Object.keys(b).forEach(function(n){b[n]=o}),Object.keys(k).forEach(function(n){k[n]=c}),e=(p-nt*n.length)/2,e<st?(y=0,h=0,n.forEach(function(n){d(n)})):d(i,!0)):d(i)}var u=this,f=u.config,v,g,it,a,rt,ut,lt=4,at=10,o=0,c=0,st=10,vt=15,nt,y=0,w={},b={},k={},tt=[0],l={},h=0,d,ht,ft,et,ot,p;t=t||{};d=e(t,"withTransition",!0);ht=e(t,"withTransitionForTransform",!0);u.isLegendInset&&(h=f.legend_inset_step?f.legend_inset_step:n.length,u.updateLegendStep(h));u.isLegendRight?(v=function(n){return o*l[n]},a=function(n){return tt[l[n]]+w[n]}):u.isLegendInset?(v=function(n){return o*l[n]+10},a=function(n){return tt[l[n]]+w[n]}):(v=function(n){return tt[l[n]]+w[n]},a=function(n){return c*l[n]});g=function(n,t){return v(n,t)+14};rt=function(n,t){return a(n,t)+9};it=function(n,t){return v(n,t)};ut=function(n,t){return a(n,t)-5};nt=u.legend.selectAll("."+i.legendItem).data(n).enter().append("g").attr("class",function(n){return u.generateClass(i.legendItem,n)}).style("visibility",function(n){return u.isLegendToShow(n)?"visible":"hidden"}).style("cursor","pointer").on("click",function(n){f.legend_item_onclick?f.legend_item_onclick.call(u,n):u.d3.event.altKey?(u.api.hide(),u.api.show(n)):(u.api.toggle(n),u.isTargetToShow(n)?u.api.focus(n):u.api.revert())}).on("mouseover",function(n){u.d3.select(this).classed(i.legendItemFocused,!0);!u.transiting&&u.isTargetToShow(n)&&u.api.focus(n);f.legend_item_onmouseover&&f.legend_item_onmouseover.call(u,n)}).on("mouseout",function(n){u.d3.select(this).classed(i.legendItemFocused,!1);u.api.revert();f.legend_item_onmouseout&&f.legend_item_onmouseout.call(u,n)});nt.append("text").text(function(n){return s(f.data_names[n])?f.data_names[n]:n}).each(function(n,t){ct(this,n,t)}).style("pointer-events","none").attr("x",u.isLegendRight||u.isLegendInset?g:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:rt);nt.append("rect").attr("class",i.legendItemEvent).style("fill-opacity",0).attr("x",u.isLegendRight||u.isLegendInset?it:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:ut);nt.append("rect").attr("class",i.legendItemTile).style("pointer-events","none").style("fill",u.color).attr("x",u.isLegendRight||u.isLegendInset?g:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:a).attr("width",10).attr("height",10);p=u.legend.select("."+i.legendBackground+" rect");u.isLegendInset&&o>0&&p.size()===0&&(p=u.legend.insert("g","."+i.legendItem).attr("class",i.legendBackground).append("rect"));ft=u.legend.selectAll("text").data(n).text(function(n){return s(f.data_names[n])?f.data_names[n]:n}).each(function(n,t){ct(this,n,t)});(d?ft.transition():ft).attr("x",g).attr("y",rt);et=u.legend.selectAll("rect."+i.legendItemEvent).data(n);(d?et.transition():et).attr("width",function(n){return b[n]}).attr("height",function(n){return k[n]}).attr("x",it).attr("y",ut);ot=u.legend.selectAll("rect."+i.legendItemTile).data(n);(d?ot.transition():ot).style("fill",u.color).attr("x",v).attr("y",a);p&&(d?p.transition():p).attr("height",u.getLegendHeight()-12).attr("width",o*(h+1)+10);u.legend.selectAll("."+i.legendItem).classed(i.legendItemHidden,function(n){return!u.isTargetToShow(n)});u.updateLegendItemWidth(o);u.updateLegendItemHeight(c);u.updateLegendStep(h);u.updateSizes();u.updateScales();u.updateSvgSize();u.transformAll(ht,r);u.legendHasRendered=!0};it(b,u);u.prototype.init=function(){var n=this.owner,t=n.config,r=n.main;n.axes.x=r.append("g").attr("class",i.axis+" "+i.axisX).attr("clip-path",n.clipPathForXAxis).attr("transform",n.getTranslate("x")).style("visibility",t.axis_x_show?"visible":"hidden");n.axes.x.append("text").attr("class",i.axisXLabel).attr("transform",t.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this));n.axes.y=r.append("g").attr("class",i.axis+" "+i.axisY).attr("clip-path",t.axis_y_inner?"":n.clipPathForYAxis).attr("transform",n.getTranslate("y")).style("visibility",t.axis_y_show?"visible":"hidden");n.axes.y.append("text").attr("class",i.axisYLabel).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this));n.axes.y2=r.append("g").attr("class",i.axis+" "+i.axisY2).attr("transform",n.getTranslate("y2")).style("visibility",t.axis_y2_show?"visible":"hidden");n.axes.y2.append("text").attr("class",i.axisY2Label).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))};u.prototype.getXAxis=function(n,t,i,r,u,f,e){var o=this.owner,s=o.config,c={isCategory:o.isCategorized(),withOuterTick:u,tickMultiline:s.axis_x_tick_multiline,tickWidth:s.axis_x_tick_width,tickTextRotate:e?0:s.axis_x_tick_rotate,withoutTransition:f},h=nt(o.d3,c).scale(n).orient(t);return o.isTimeSeries()&&r&&(r=r.map(function(n){return o.parseDate(n)})),h.tickFormat(i).tickValues(r),o.isCategorized()&&(h.tickCentered(s.axis_x_tick_centered),g(s.axis_x_tick_culling)&&(s.axis_x_tick_culling=!1)),h};u.prototype.updateXAxisTickValues=function(n,t){var i=this.owner,u=i.config,r;return(u.axis_x_tick_fit||u.axis_x_tick_count)&&(r=this.generateTickValues(i.mapTargetsToUniqueXs(n),u.axis_x_tick_count,i.isTimeSeries())),t?t.tickValues(r):(i.xAxis.tickValues(r),i.subXAxis.tickValues(r)),r};u.prototype.getYAxis=function(n,t,i,r,u,f){var c={withOuterTick:u,withoutTransition:f},e=this.owner,s=e.d3,h=e.config,o=nt(s,c).scale(n).orient(t).tickFormat(i);return e.isTimeSeriesY()?o.ticks(s.time[h.axis_y_tick_time_value],h.axis_y_tick_time_interval):o.tickValues(r),o};u.prototype.getId=function(n){var t=this.owner.config;return n in t.data_axes?t.data_axes[n]:"y"};u.prototype.getXAxisTickFormat=function(){var n=this.owner,i=n.config,t=n.isTimeSeries()?n.defaultAxisTimeFormat:n.isCategorized()?n.categoryName:function(n){return n<0?n.toFixed(0):n};return i.axis_x_tick_format&&(a(i.axis_x_tick_format)?t=i.axis_x_tick_format:n.isTimeSeries()&&(t=function(t){return t?n.axisTimeFormat(i.axis_x_tick_format)(t):""})),a(t)?function(i){return t.call(n,i)}:t};u.prototype.getTickValues=function(n,t){return n?n:t?t.tickValues():undefined};u.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)};u.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)};u.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)};u.prototype.getLabelOptionByAxisId=function(n){var r=this.owner,i=r.config,t;return n==="y"?t=i.axis_y_label:n==="y2"?t=i.axis_y2_label:n==="x"&&(t=i.axis_x_label),t};u.prototype.getLabelText=function(n){var t=this.getLabelOptionByAxisId(n);return o(t)?t:t?t.text:null};u.prototype.setLabelText=function(n,t){var u=this.owner,i=u.config,r=this.getLabelOptionByAxisId(n);o(r)?n==="y"?i.axis_y_label=t:n==="y2"?i.axis_y2_label=t:n==="x"&&(i.axis_x_label=t):r&&(r.text=t)};u.prototype.getLabelPosition=function(n,t){var r=this.getLabelOptionByAxisId(n),i=r&&typeof r=="object"&&r.position?r.position:t;return{isInner:i.indexOf("inner")>=0,isOuter:i.indexOf("outer")>=0,isLeft:i.indexOf("left")>=0,isCenter:i.indexOf("center")>=0,isRight:i.indexOf("right")>=0,isTop:i.indexOf("top")>=0,isMiddle:i.indexOf("middle")>=0,isBottom:i.indexOf("bottom")>=0}};u.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")};u.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")};u.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")};u.prototype.getLabelPositionById=function(n){return n==="y2"?this.getY2AxisLabelPosition():n==="y"?this.getYAxisLabelPosition():this.getXAxisLabelPosition()};u.prototype.textForXAxisLabel=function(){return this.getLabelText("x")};u.prototype.textForYAxisLabel=function(){return this.getLabelText("y")};u.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")};u.prototype.xForAxisLabel=function(n,t){var i=this.owner;return n?t.isLeft?0:t.isCenter?i.width/2:i.width:t.isBottom?-i.height:t.isMiddle?-i.height/2:0};u.prototype.dxForAxisLabel=function(n,t){return n?t.isLeft?"0.5em":t.isRight?"-0.5em":"0":t.isTop?"-0.5em":t.isBottom?"0.5em":"0"};u.prototype.textAnchorForAxisLabel=function(n,t){return n?t.isLeft?"start":t.isCenter?"middle":"end":t.isBottom?"start":t.isMiddle?"middle":"end"};u.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};u.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};u.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};u.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};u.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};u.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};u.prototype.dyForXAxisLabel=function(){var i=this.owner,n=i.config,t=this.getXAxisLabelPosition();return n.axis_rotated?t.isInner?"1.2em":-25-this.getMaxTickWidth("x"):t.isInner?"-0.5em":n.axis_x_height?n.axis_x_height-10:"3em"};u.prototype.dyForYAxisLabel=function(){var n=this.owner,t=this.getYAxisLabelPosition();return n.config.axis_rotated?t.isInner?"-0.5em":"3em":t.isInner?"1.2em":-10-(n.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)};u.prototype.dyForY2AxisLabel=function(){var n=this.owner,t=this.getY2AxisLabelPosition();return n.config.axis_rotated?t.isInner?"1.2em":"-2.2em":t.isInner?"-0.5em":15+(n.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)};u.prototype.textAnchorForXAxisLabel=function(){var n=this.owner;return this.textAnchorForAxisLabel(!n.config.axis_rotated,this.getXAxisLabelPosition())};u.prototype.textAnchorForYAxisLabel=function(){var n=this.owner;return this.textAnchorForAxisLabel(n.config.axis_rotated,this.getYAxisLabelPosition())};u.prototype.textAnchorForY2AxisLabel=function(){var n=this.owner;return this.textAnchorForAxisLabel(n.config.axis_rotated,this.getY2AxisLabelPosition())};u.prototype.getMaxTickWidth=function(n,t){var i=this.owner,s=i.config,e=0,u,r,f,o,h;return t&&i.currentMaxTickWidths[n]?i.currentMaxTickWidths[n]:(i.svg&&(u=i.filterTargetsToShow(i.data.targets),n==="y"?(r=i.y.copy().domain(i.getYDomain(u,"y")),f=this.getYAxis(r,i.yOrient,s.axis_y_tick_format,i.yAxisTickValues,!1,!0)):n==="y2"?(r=i.y2.copy().domain(i.getYDomain(u,"y2")),f=this.getYAxis(r,i.y2Orient,s.axis_y2_tick_format,i.y2AxisTickValues,!1,!0)):(r=i.x.copy().domain(i.getXDomain(u)),f=this.getXAxis(r,i.xOrient,i.xAxisTickFormat,i.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(u,f)),o=i.d3.select("body").append("div").classed("c3",!0),h=o.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),h.append("g").call(f).each(function(){i.d3.select(this).selectAll("text").each(function(){var n=this.getBoundingClientRect();e<n.width&&(e=n.width)});o.remove()})),i.currentMaxTickWidths[n]=e<=0?i.currentMaxTickWidths[n]:e,i.currentMaxTickWidths[n])};u.prototype.updateLabels=function(n){var t=this.owner,r=t.main.select("."+i.axisX+" ."+i.axisXLabel),u=t.main.select("."+i.axisY+" ."+i.axisYLabel),f=t.main.select("."+i.axisY2+" ."+i.axisY2Label);(n?r.transition():r).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this));(n?u.transition():u).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this));(n?f.transition():f).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))};u.prototype.getPadding=function(n,t,i,r){return f(n[t])?n.unit==="ratio"?n[t]*r:this.convertPixelsToAxisPadding(n[t],r):i};u.prototype.convertPixelsToAxisPadding=function(n,t){var i=this.owner,r=i.config.axis_rotated?i.width:i.height;return t*(n/r)};u.prototype.generateTickValues=function(n,t,i){var r=n,u,f,o,s,c,e,h;if(t)if(u=a(t)?t():t,u===1)r=[n[0]];else if(u===2)r=[n[0],n[n.length-1]];else if(u>2){for(s=u-2,f=n[0],o=n[n.length-1],c=(o-f)/(s+1),r=[f],e=0;e<s;e++)h=+f+c*(e+1),r.push(i?new Date(h):h);r.push(o)}return i||(r=r.sort(function(n,t){return n-t})),r};u.prototype.generateTransitions=function(n){var i=this.owner,t=i.axes;return{axisX:n?t.x.transition().duration(n):t.x,axisY:n?t.y.transition().duration(n):t.y,axisY2:n?t.y2.transition().duration(n):t.y2,axisSubX:n?t.subx.transition().duration(n):t.subx}};u.prototype.redraw=function(n,t){var i=this.owner;i.axes.x.style("opacity",t?0:1);i.axes.y.style("opacity",t?0:1);i.axes.y2.style("opacity",t?0:1);i.axes.subx.style("opacity",t?0:1);n.axisX.call(i.xAxis);n.axisY.call(i.yAxis);n.axisY2.call(i.y2Axis);n.axisSubX.call(i.subXAxis)};t.getClipPath=function(t){var i=n.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(i?"":document.URL.split("#")[0])+"#"+t+")"};t.appendClip=function(n,t){return n.append("clipPath").attr("id",t).append("rect")};t.getAxisClipX=function(n){var t=Math.max(30,this.margin.left);return n?-(1+t):-(t-1)};t.getAxisClipY=function(n){return n?-20:-this.margin.top};t.getXAxisClipX=function(){var n=this;return n.getAxisClipX(!n.config.axis_rotated)};t.getXAxisClipY=function(){var n=this;return n.getAxisClipY(!n.config.axis_rotated)};t.getYAxisClipX=function(){var n=this;return n.config.axis_y_inner?-1:n.getAxisClipX(n.config.axis_rotated)};t.getYAxisClipY=function(){var n=this;return n.getAxisClipY(n.config.axis_rotated)};t.getAxisClipWidth=function(n){var t=this,i=Math.max(30,t.margin.left),r=Math.max(30,t.margin.right);return n?t.width+2+i+r:t.margin.left+20};t.getAxisClipHeight=function(n){return(n?this.margin.bottom:this.margin.top+this.height)+20};t.getXAxisClipWidth=function(){var n=this;return n.getAxisClipWidth(!n.config.axis_rotated)};t.getXAxisClipHeight=function(){var n=this;return n.getAxisClipHeight(!n.config.axis_rotated)};t.getYAxisClipWidth=function(){var n=this;return n.getAxisClipWidth(n.config.axis_rotated)+(n.config.axis_y_inner?20:0)};t.getYAxisClipHeight=function(){var n=this;return n.getAxisClipHeight(n.config.axis_rotated)};t.initPie=function(){var n=this,t=n.d3,i=n.config;n.pie=t.layout.pie().value(function(n){return n.values.reduce(function(n,t){return n+t.value},0)});i.data_order||n.pie.sort(null)};t.updateRadius=function(){var n=this,t=n.config,i=t.gauge_width||t.donut_width;n.radiusExpanded=Math.min(n.arcWidth,n.arcHeight)/2;n.radius=n.radiusExpanded*.95;n.innerRadiusRatio=i?(n.radius-i)/n.radius:.6;n.innerRadius=n.hasType("donut")||n.hasType("gauge")?n.radius*n.innerRadiusRatio:0};t.updateArc=function(){var n=this;n.svgArc=n.getSvgArc();n.svgArcExpanded=n.getSvgArcExpanded();n.svgArcExpandedSub=n.getSvgArcExpanded(.98)};t.updateAngle=function(n){var t=this,f=t.config,r=!1,e=0,i=f.gauge_min,u=f.gauge_max,o,s;return t.pie(t.filterTargetsToShow(t.data.targets)).forEach(function(t){r||t.data.id!==n.data.id||(r=!0,n=t,n.index=e);e++}),isNaN(n.startAngle)&&(n.startAngle=0),isNaN(n.endAngle)&&(n.endAngle=n.startAngle),t.isGaugeType(n.data)&&(o=Math.PI/(u-i),s=n.value<i?0:n.value<u?n.value-i:u-i,n.startAngle=Math.PI/-2,n.endAngle=n.startAngle+o*s),r?n:null};t.getSvgArc=function(){var n=this,t=n.d3.svg.arc().outerRadius(n.radius).innerRadius(n.innerRadius),i=function(i,r){var u;return r?t(i):(u=n.updateAngle(i),u?t(u):"M 0 0")};return i.centroid=t.centroid,i};t.getSvgArcExpanded=function(n){var t=this,i=t.d3.svg.arc().outerRadius(t.radiusExpanded*(n?n:1)).innerRadius(t.innerRadius);return function(n){var r=t.updateAngle(n);return r?i(r):"M 0 0"}};t.getArc=function(n,t,i){return i||this.isArcType(n.data)?this.svgArc(n,t):"M 0 0"};t.transformForArcLabel=function(n){var t=this,o=t.updateAngle(n),i,r,u,f,e,s="";return o&&!t.hasType("gauge")&&(i=this.svgArc.centroid(o),r=isNaN(i[0])?0:i[0],u=isNaN(i[1])?0:i[1],f=Math.sqrt(r*r+u*u),e=t.radius&&f?(36/t.radius>.375?1.175-36/t.radius:.8)*t.radius/f:0,s="translate("+r*e+","+u*e+")"),s};t.getArcRatio=function(n){var t=this,i=t.hasType("gauge")?Math.PI:Math.PI*2;return n?(n.endAngle-n.startAngle)/i:null};t.convertToArcData=function(n){return this.addName({id:n.data.id,value:n.value,ratio:this.getArcRatio(n),index:n.index})};t.textForArcLabel=function(n){var t=this,i,u,r,e,f;return t.shouldShowArcLabel()?(i=t.updateAngle(n),u=i?i.value:null,r=t.getArcRatio(i),e=n.data.id,!t.hasType("gauge")&&!t.meetsArcLabelThreshold(r))?"":(f=t.getArcLabelFormat(),f?f(u,r,e):t.defaultArcValueFormat(u,r)):""};t.expandArc=function(t){var r=this,u;if(r.transiting){u=n.setInterval(function(){r.transiting||(n.clearInterval(u),r.legend.selectAll(".c3-legend-item-focused").size()>0&&r.expandArc(t))},10);return}t=r.mapToTargetIds(t);r.svg.selectAll(r.selectorTargets(t,"."+i.chartArc)).each(function(n){r.shouldExpand(n.data.id)&&r.d3.select(this).selectAll("path").transition().duration(50).attr("d",r.svgArcExpanded).transition().duration(100).attr("d",r.svgArcExpandedSub).each(function(n){r.isDonutType(n.data)})})};t.unexpandArc=function(n){var t=this;t.transiting||(n=t.mapToTargetIds(n),t.svg.selectAll(t.selectorTargets(n,"."+i.chartArc)).selectAll("path").transition().duration(50).attr("d",t.svgArc),t.svg.selectAll("."+i.arc).style("opacity",1))};t.shouldExpand=function(n){var t=this,i=t.config;return t.isDonutType(n)&&i.donut_expand||t.isGaugeType(n)&&i.gauge_expand||t.isPieType(n)&&i.pie_expand};t.shouldShowArcLabel=function(){var n=this,i=n.config,t=!0;return n.hasType("donut")?t=i.donut_label_show:n.hasType("pie")&&(t=i.pie_label_show),t};t.meetsArcLabelThreshold=function(n){var t=this,i=t.config,r=t.hasType("donut")?i.donut_label_threshold:i.pie_label_threshold;return n>=r};t.getArcLabelFormat=function(){var n=this,t=n.config,i=t.pie_label_format;return n.hasType("gauge")?i=t.gauge_label_format:n.hasType("donut")&&(i=t.donut_label_format),i};t.getArcTitle=function(){var n=this;return n.hasType("donut")?n.config.donut_title:""};t.updateTargetsForArc=function(n){var t=this,e=t.main,u,r,f=t.classChartArc.bind(t),o=t.classArcs.bind(t),s=t.classFocus.bind(t);u=e.select("."+i.chartArcs).selectAll("."+i.chartArc).data(t.pie(n)).attr("class",function(n){return f(n)+s(n.data)});r=u.enter().append("g").attr("class",f);r.append("g").attr("class",o);r.append("text").attr("dy",t.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")};t.initArc=function(){var n=this;n.arcs=n.main.select("."+i.chart).append("g").attr("class",i.chartArcs).attr("transform",n.getTranslate("arc"));n.arcs.append("text").attr("class",i.chartArcsTitle).style("text-anchor","middle").text(n.getArcTitle())};t.redrawArc=function(n,t,r){var u=this,s=u.d3,f=u.config,o=u.main,e;e=o.selectAll("."+i.arcs).selectAll("."+i.arc).data(u.arcData.bind(u));e.enter().append("path").attr("class",u.classArc.bind(u)).style("fill",function(n){return u.color(n.data)}).style("cursor",function(n){return f.interaction_enabled&&f.data_selection_isselectable(n)?"pointer":null}).style("opacity",0).each(function(n){u.isGaugeType(n.data)&&(n.startAngle=n.endAngle=Math.PI/-2);this._current=n});e.attr("transform",function(n){return!u.isGaugeType(n.data)&&r?"scale(0)":""}).style("opacity",function(n){return n===this._current?0:1}).on("mouseover",f.interaction_enabled?function(n){var t,i;u.transiting||(t=u.updateAngle(n),i=u.convertToArcData(t),u.expandArc(t.data.id),u.api.focus(t.data.id),u.toggleFocusLegend(t.data.id,!0),u.config.data_onmouseover(i,this))}:null).on("mousemove",f.interaction_enabled?function(n){var t=u.updateAngle(n),i=u.convertToArcData(t),r=[i];u.showTooltip(r,this)}:null).on("mouseout",f.interaction_enabled?function(n){var t,i;u.transiting||(t=u.updateAngle(n),i=u.convertToArcData(t),u.unexpandArc(t.data.id),u.api.revert(),u.revertLegend(),u.hideTooltip(),u.config.data_onmouseout(i,this))}:null).on("click",f.interaction_enabled?function(n,t){var r=u.updateAngle(n),i=u.convertToArcData(r);u.toggleShape&&u.toggleShape(this,i,t);u.config.data_onclick.call(u.api,i,this)}:null).each(function(){u.transiting=!0}).transition().duration(n).attrTween("d",function(n){var i=u.updateAngle(n),t;return i?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),t=s.interpolate(this._current,i),this._current=t(0),function(i){var r=t(i);return r.data=n.data,u.getArc(r,!0)}):function(){return"M 0 0"}}).attr("transform",r?"scale(1)":"").style("fill",function(n){return u.levelColor?u.levelColor(n.data.values[0].value):u.color(n.data.id)}).style("opacity",1).call(u.endall,function(){u.transiting=!1});e.exit().transition().duration(t).style("opacity",0).remove();o.selectAll("."+i.chartArc).select("text").style("opacity",0).attr("class",function(n){return u.isGaugeType(n.data)?i.gaugeValue:""}).text(u.textForArcLabel.bind(u)).attr("transform",u.transformForArcLabel.bind(u)).style("font-size",function(n){return u.isGaugeType(n.data)?Math.round(u.radius/5)+"px":""}).transition().duration(n).style("opacity",function(n){return u.isTargetToShow(n.data.id)&&u.isArcType(n.data)?1:0});o.select("."+i.chartArcsTitle).style("opacity",u.hasType("donut")||u.hasType("gauge")?1:0);u.hasType("gauge")&&(u.arcs.select("."+i.chartArcsBackground).attr("d",function(){var n={data:[{value:f.gauge_max}],startAngle:Math.PI/-2,endAngle:Math.PI/2};return u.getArc(n,!0,!0)}),u.arcs.select("."+i.chartArcsGaugeUnit).attr("dy",".75em").text(f.gauge_label_show?f.gauge_units:""),u.arcs.select("."+i.chartArcsGaugeMin).attr("dx",-1*(u.innerRadius+(u.radius-u.innerRadius)/2)+"px").attr("dy","1.2em").text(f.gauge_label_show?f.gauge_min:""),u.arcs.select("."+i.chartArcsGaugeMax).attr("dx",u.innerRadius+(u.radius-u.innerRadius)/2+"px").attr("dy","1.2em").text(f.gauge_label_show?f.gauge_max:""))};t.initGauge=function(){var n=this.arcs;this.hasType("gauge")&&(n.append("path").attr("class",i.chartArcsBackground),n.append("text").attr("class",i.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),n.append("text").attr("class",i.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),n.append("text").attr("class",i.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))};t.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0};t.initRegion=function(){var n=this;n.region=n.main.append("g").attr("clip-path",n.clipPath).attr("class",i.regions)};t.updateRegion=function(n){var t=this,r=t.config;t.region.style("visibility",t.hasArcType()?"hidden":"visible");t.mainRegion=t.main.select("."+i.regions).selectAll("."+i.region).data(r.regions);t.mainRegion.enter().append("g").attr("class",t.classRegion.bind(t)).append("rect").style("fill-opacity",0);t.mainRegion.exit().transition().duration(n).style("opacity",0).remove()};t.redrawRegion=function(n){var t=this,i=t.mainRegion.selectAll("rect"),r=t.regionX.bind(t),u=t.regionY.bind(t),e=t.regionWidth.bind(t),o=t.regionHeight.bind(t);return[(n?i.transition():i).attr("x",r).attr("y",u).attr("width",e).attr("height",o).style("fill-opacity",function(n){return f(n.opacity)?n.opacity:.1})]};t.regionX=function(n){var t=this,i=t.config,r=n.axis==="y"?t.y:t.y2;return n.axis==="y"||n.axis==="y2"?i.axis_rotated?"start"in n?r(n.start):0:0:i.axis_rotated?0:"start"in n?t.x(t.isTimeSeries()?t.parseDate(n.start):n.start):0};t.regionY=function(n){var t=this,i=t.config,r=n.axis==="y"?t.y:t.y2;return n.axis==="y"||n.axis==="y2"?i.axis_rotated?0:"end"in n?r(n.end):0:i.axis_rotated?"start"in n?t.x(t.isTimeSeries()?t.parseDate(n.start):n.start):0:0};t.regionWidth=function(n){var t=this,r=t.config,u=t.regionX(n),i,f=n.axis==="y"?t.y:t.y2;return i=n.axis==="y"||n.axis==="y2"?r.axis_rotated?"end"in n?f(n.end):t.width:t.width:r.axis_rotated?t.width:"end"in n?t.x(t.isTimeSeries()?t.parseDate(n.end):n.end):t.width,i<u?0:i-u};t.regionHeight=function(n){var t=this,r=t.config,u=this.regionY(n),i,f=n.axis==="y"?t.y:t.y2;return i=n.axis==="y"||n.axis==="y2"?r.axis_rotated?t.height:"start"in n?f(n.start):t.height:r.axis_rotated?"end"in n?t.x(t.isTimeSeries()?t.parseDate(n.end):n.end):t.height:t.height,i<u?0:i-u};t.isRegionOnX=function(n){return!n.axis||n.axis==="x"};t.drag=function(n){var t=this,r=t.config,a=t.main,v=t.d3,s,h,c,l,u,e,f,o;t.hasArcType()||r.data_selection_enabled&&(!r.zoom_enabled||t.zoom.altDomain)&&r.data_selection_multiple&&(s=t.dragStart[0],h=t.dragStart[1],c=n[0],l=n[1],u=Math.min(s,c),e=Math.max(s,c),f=r.data_selection_grouped?t.margin.top:Math.min(h,l),o=r.data_selection_grouped?t.height:Math.max(h,l),a.select("."+i.dragarea).attr("x",u).attr("y",f).attr("width",e-u).attr("height",o-f),a.selectAll("."+i.shapes).selectAll("."+i.shape).filter(function(n){return r.data_selection_isselectable(n)}).each(function(n,r){var s=v.select(this),p=s.classed(i.SELECTED),w=s.classed(i.INCLUDED),h,c,b,k,a,y=!1,l;if(s.classed(i.circle))h=s.attr("cx")*1,c=s.attr("cy")*1,a=t.togglePoint,y=u<h&&h<e&&f<c&&c<o;else if(s.classed(i.bar))l=ut(this),h=l.x,c=l.y,b=l.width,k=l.height,a=t.togglePath,y=!(e<h||h+b<u)&&!(o<c||c+k<f);else return;y^w&&(s.classed(i.INCLUDED,!w),s.classed(i.SELECTED,!p),a.call(t,!p,s,n,r))}))};t.dragstart=function(n){var t=this,r=t.config;t.hasArcType()||r.data_selection_enabled&&(t.dragStart=n,t.main.select("."+i.chart).append("rect").attr("class",i.dragarea).style("opacity",.1),t.dragging=!0)};t.dragend=function(){var n=this,t=n.config;n.hasArcType()||t.data_selection_enabled&&(n.main.select("."+i.dragarea).transition().duration(100).style("opacity",0).remove(),n.main.selectAll("."+i.shape).classed(i.INCLUDED,!1),n.dragging=!1)};t.selectPoint=function(n,t,r){var u=this,f=u.config,e=(f.axis_rotated?u.circleY:u.circleX).bind(u),o=(f.axis_rotated?u.circleX:u.circleY).bind(u),s=u.pointSelectR.bind(u);f.data_onselected.call(u.api,t,n.node());u.main.select("."+i.selectedCircles+u.getTargetSelectorSuffix(t.id)).selectAll("."+i.selectedCircle+"-"+r).data([t]).enter().append("circle").attr("class",function(){return u.generateClass(i.selectedCircle,r)}).attr("cx",e).attr("cy",o).attr("stroke",function(){return u.color(t)}).attr("r",function(n){return u.pointSelectR(n)*1.4}).transition().duration(100).attr("r",s)};t.unselectPoint=function(n,t,r){var u=this;u.config.data_onunselected(t,n.node());u.main.select("."+i.selectedCircles+u.getTargetSelectorSuffix(t.id)).selectAll("."+i.selectedCircle+"-"+r).transition().duration(100).attr("r",0).remove()};t.togglePoint=function(n,t,i,r){n?this.selectPoint(t,i,r):this.unselectPoint(t,i,r)};t.selectPath=function(n,t){var i=this;i.config.data_onselected.call(i,t,n.node());n.transition().duration(100).style("fill",function(){return i.d3.rgb(i.color(t)).brighter(.75)})};t.unselectPath=function(n,t){var i=this;i.config.data_onunselected.call(i,t,n.node());n.transition().duration(100).style("fill",function(){return i.color(t)})};t.togglePath=function(n,t,i,r){n?this.selectPath(t,i,r):this.unselectPath(t,i,r)};t.getToggle=function(n,t){var i=this,r;return n.nodeName==="circle"?r=i.isStepType(t)?function(){}:i.togglePoint:n.nodeName==="path"&&(r=i.togglePath),r};t.toggleShape=function(n,t,r){var u=this,o=u.d3,f=u.config,e=o.select(n),s=e.classed(i.SELECTED),h=u.getToggle(n,t).bind(u);f.data_selection_enabled&&f.data_selection_isselectable(t)&&(f.data_selection_multiple||u.main.selectAll("."+i.shapes+(f.data_selection_grouped?u.getTargetSelectorSuffix(t.id):"")).selectAll("."+i.shape).each(function(n,t){var r=o.select(this);r.classed(i.SELECTED)&&h(!1,r.classed(i.SELECTED,!1),n,t)}),e.classed(i.SELECTED,!s),h(!s,e,t,r))};t.initBrush=function(){var n=this,t=n.d3;n.brush=t.svg.brush().on("brush",function(){n.redrawForBrush()});n.brush.update=function(){return n.context&&n.context.select("."+i.brush).call(this),this};n.brush.scale=function(t){return n.config.axis_rotated?this.y(t):this.x(t)}};t.initSubchart=function(){var n=this,r=n.config,t=n.context=n.svg.append("g").attr("transform",n.getTranslate("context"));t.style("visibility",r.subchart_show?"visible":"hidden");t.append("g").attr("clip-path",n.clipPathForSubchart).attr("class",i.chart);t.select("."+i.chart).append("g").attr("class",i.chartBars);t.select("."+i.chart).append("g").attr("class",i.chartLines);t.append("g").attr("clip-path",n.clipPath).attr("class",i.brush).call(n.brush);n.axes.subx=t.append("g").attr("class",i.axisX).attr("transform",n.getTranslate("subx")).attr("clip-path",r.axis_rotated?"":n.clipPathForXAxis)};t.updateTargetsForSubchart=function(n){var t=this,r=t.context,u=t.config,f,e,o,s,h=t.classChartBar.bind(t),l=t.classBars.bind(t),c=t.classChartLine.bind(t),a=t.classLines.bind(t),v=t.classAreas.bind(t);u.subchart_show&&(s=r.select("."+i.chartBars).selectAll("."+i.chartBar).data(n).attr("class",h),o=s.enter().append("g").style("opacity",0).attr("class",h),o.append("g").attr("class",l),e=r.select("."+i.chartLines).selectAll("."+i.chartLine).data(n).attr("class",c),f=e.enter().append("g").style("opacity",0).attr("class",c),f.append("g").attr("class",a),f.append("g").attr("class",v),r.selectAll("."+i.brush+" rect").attr(u.axis_rotated?"width":"height",u.axis_rotated?t.width2:t.height2))};t.updateBarForSubchart=function(n){var t=this;t.contextBar=t.context.selectAll("."+i.bars).selectAll("."+i.bar).data(t.barData.bind(t));t.contextBar.enter().append("path").attr("class",t.classBar.bind(t)).style("stroke","none").style("fill",t.color);t.contextBar.style("opacity",t.initialOpacity.bind(t));t.contextBar.exit().transition().duration(n).style("opacity",0).remove()};t.redrawBarForSubchart=function(n,t,i){(t?this.contextBar.transition().duration(i):this.contextBar).attr("d",n).style("opacity",1)};t.updateLineForSubchart=function(n){var t=this;t.contextLine=t.context.selectAll("."+i.lines).selectAll("."+i.line).data(t.lineData.bind(t));t.contextLine.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color);t.contextLine.style("opacity",t.initialOpacity.bind(t));t.contextLine.exit().transition().duration(n).style("opacity",0).remove()};t.redrawLineForSubchart=function(n,t,i){(t?this.contextLine.transition().duration(i):this.contextLine).attr("d",n).style("opacity",1)};t.updateAreaForSubchart=function(n){var t=this,r=t.d3;t.contextArea=t.context.selectAll("."+i.areas).selectAll("."+i.area).data(t.lineData.bind(t));t.contextArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+r.select(this).style("opacity"),0});t.contextArea.style("opacity",0);t.contextArea.exit().transition().duration(n).style("opacity",0).remove()};t.redrawAreaForSubchart=function(n,t,i){(t?this.contextArea.transition().duration(i):this.contextArea).attr("d",n).style("fill",this.color).style("opacity",this.orgAreaOpacity)};t.redrawSubchart=function(n,t,i,r,u,f,e){var o=this,s=o.d3,h=o.config,c,l,a;o.context.style("visibility",h.subchart_show?"visible":"hidden");h.subchart_show&&(s.event&&s.event.type==="zoom"&&o.brush.extent(o.x.orgDomain()).update(),n&&(o.brush.empty()||o.brush.extent(o.x.orgDomain()).update(),c=o.generateDrawArea(u,!0),l=o.generateDrawBar(f,!0),a=o.generateDrawLine(e,!0),o.updateBarForSubchart(i),o.updateLineForSubchart(i),o.updateAreaForSubchart(i),o.redrawBarForSubchart(l,i,i),o.redrawLineForSubchart(a,i,i),o.redrawAreaForSubchart(c,i,i)))};t.redrawForBrush=function(){var n=this,t=n.x;n.redraw({withTransition:!1,withY:n.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1});n.config.subchart_onbrush.call(n.api,t.orgDomain())};t.transformContext=function(n,t){var u=this,r;t&&t.axisSubX?r=t.axisSubX:(r=u.context.select("."+i.axisX),n&&(r=r.transition()));u.context.attr("transform",u.getTranslate("context"));r.attr("transform",u.getTranslate("subx"))};t.getDefaultExtent=function(){var n=this,i=n.config,t=a(i.axis_x_extent)?i.axis_x_extent(n.getXDomain(n.data.targets)):i.axis_x_extent;return n.isTimeSeries()&&(t=[n.parseDate(t[0]),n.parseDate(t[1])]),t};t.initZoom=function(){var n=this,t=n.d3,i=n.config,r;n.zoom=t.behavior.zoom().on("zoomstart",function(){r=t.event.sourceEvent;n.zoom.altDomain=t.event.sourceEvent.altKey?n.x.orgDomain():null;i.zoom_onzoomstart.call(n.api,t.event.sourceEvent)}).on("zoom",function(){n.redrawForZoom.call(n)}).on("zoomend",function(){var u=t.event.sourceEvent;u&&r.clientX===u.clientX&&r.clientY===u.clientY||(n.redrawEventRect(),n.updateZoom(),i.zoom_onzoomend.call(n.api,n.x.orgDomain()))});n.zoom.scale=function(n){return i.axis_rotated?this.y(n):this.x(n)};n.zoom.orgScaleExtent=function(){var t=i.zoom_extent?i.zoom_extent:[1,10];return[t[0],Math.max(n.getMaxDataCount()/t[1],t[1])]};n.zoom.updateScaleExtent=function(){var t=v(n.x.orgDomain())/v(n.orgXDomain),i=this.orgScaleExtent();return this.scaleExtent([i[0]*t,i[1]*t]),this}};t.updateZoom=function(){var n=this,t=n.config.zoom_enabled?n.zoom:function(){};n.main.select("."+i.zoomRect).call(t).on("dblclick.zoom",null);n.main.selectAll("."+i.eventRect).call(t).on("dblclick.zoom",null)};t.redrawForZoom=function(){var n=this,u=n.d3,i=n.config,r=n.zoom,t=n.x;if(i.zoom_enabled&&n.filterTargetsToShow(n.data.targets).length!==0){if(u.event.sourceEvent.type==="mousemove"&&r.altDomain){t.domain(r.altDomain);r.scale(t).updateScaleExtent();return}n.isCategorized()&&t.orgDomain()[0]===n.orgXDomain[0]&&t.domain([n.orgXDomain[0]-1e-10,t.orgDomain()[1]]);n.redraw({withTransition:!1,withY:i.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1});u.event.sourceEvent.type==="mousemove"&&(n.cancelClick=!0);i.zoom_onzoom.call(n.api,t.orgDomain())}};t.generateColor=function(){var r=this,t=r.config,e=r.d3,n=t.data_colors,u=h(t.color_pattern)?t.color_pattern:e.scale.category10().range(),f=t.data_color,i=[];return function(t){var r=t.id||t.data&&t.data.id||t,e;return n[r]instanceof Function?e=n[r](t):n[r]?e=n[r]:(i.indexOf(r)<0&&i.push(r),e=u[i.indexOf(r)%u.length],n[r]=e),f instanceof Function?f(e,t):e}};t.generateLevelColor=function(){var u=this,t=u.config,i=t.color_pattern,n=t.color_threshold,f=n.unit==="value",r=n.values&&n.values.length?n.values:[],e=n.max||100;return h(t.color_threshold)?function(n){for(var u,o=i[i.length-1],t=0;t<r.length;t++)if(u=f?n:n*100/e,u<r[t]){o=i[t];break}return o}:null};t.getYFormat=function(n){var t=this,i=n&&!t.hasType("gauge")?t.defaultArcValueFormat:t.yFormat,r=n&&!t.hasType("gauge")?t.defaultArcValueFormat:t.y2Format;return function(n,u,f){var e=t.axis.getId(f)==="y2"?r:i;return e.call(t,n,u)}};t.yFormat=function(n){var t=this,i=t.config,r=i.axis_y_tick_format?i.axis_y_tick_format:t.defaultValueFormat;return r(n)};t.y2Format=function(n){var t=this,i=t.config,r=i.axis_y2_tick_format?i.axis_y2_tick_format:t.defaultValueFormat;return r(n)};t.defaultValueFormat=function(n){return f(n)?+n:""};t.defaultArcValueFormat=function(n,t){return(t*100).toFixed(1)+"%"};t.dataLabelFormat=function(n){var r=this,t=r.config.data_labels,i=function(n){return f(n)?+n:""};return typeof t.format=="function"?t.format:typeof t.format=="object"?t.format[n]?t.format[n]===!0?i:t.format[n]:function(){return""}:i};t.hasCaches=function(n){for(var t=0;t<n.length;t++)if(!(n[t]in this.cache))return!1;return!0};t.addCache=function(n,t){this.cache[n]=this.cloneTarget(t)};t.getCaches=function(n){for(var i=[],t=0;t<n.length;t++)n[t]in this.cache&&i.push(this.cloneTarget(this.cache[n[t]]));return i};i=t.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};t.generateClass=function(n,t){return" "+n+" "+n+this.getTargetSelectorSuffix(t)};t.classText=function(n){return this.generateClass(i.text,n.index)};t.classTexts=function(n){return this.generateClass(i.texts,n.id)};t.classShape=function(n){return this.generateClass(i.shape,n.index)};t.classShapes=function(n){return this.generateClass(i.shapes,n.id)};t.classLine=function(n){return this.classShape(n)+this.generateClass(i.line,n.id)};t.classLines=function(n){return this.classShapes(n)+this.generateClass(i.lines,n.id)};t.classCircle=function(n){return this.classShape(n)+this.generateClass(i.circle,n.index)};t.classCircles=function(n){return this.classShapes(n)+this.generateClass(i.circles,n.id)};t.classBar=function(n){return this.classShape(n)+this.generateClass(i.bar,n.index)};t.classBars=function(n){return this.classShapes(n)+this.generateClass(i.bars,n.id)};t.classArc=function(n){return this.classShape(n.data)+this.generateClass(i.arc,n.data.id)};t.classArcs=function(n){return this.classShapes(n.data)+this.generateClass(i.arcs,n.data.id)};t.classArea=function(n){return this.classShape(n)+this.generateClass(i.area,n.id)};t.classAreas=function(n){return this.classShapes(n)+this.generateClass(i.areas,n.id)};t.classRegion=function(n,t){return this.generateClass(i.region,t)+" "+("class"in n?n["class"]:"")};t.classEvent=function(n){return this.generateClass(i.eventRect,n.index)};t.classTarget=function(n){var t=this,r=t.config.data_classes[n],u="";return r&&(u=" "+i.target+"-"+r),t.generateClass(i.target,n)+u};t.classFocus=function(n){return this.classFocused(n)+this.classDefocused(n)};t.classFocused=function(n){return" "+(this.focusedTargetIds.indexOf(n.id)>=0?i.focused:"")};t.classDefocused=function(n){return" "+(this.defocusedTargetIds.indexOf(n.id)>=0?i.defocused:"")};t.classChartText=function(n){return i.chartText+this.classTarget(n.id)};t.classChartLine=function(n){return i.chartLine+this.classTarget(n.id)};t.classChartBar=function(n){return i.chartBar+this.classTarget(n.id)};t.classChartArc=function(n){return i.chartArc+this.classTarget(n.data.id)};t.getTargetSelectorSuffix=function(n){return n||n===0?("-"+n).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""};t.selectorTarget=function(n,t){return(t||"")+"."+i.target+this.getTargetSelectorSuffix(n)};t.selectorTargets=function(n,t){var i=this;return n=n||[],n.length?n.map(function(n){return i.selectorTarget(n,t)}):null};t.selectorLegend=function(n){return"."+i.legendItem+this.getTargetSelectorSuffix(n)};t.selectorLegends=function(n){var t=this;return n&&n.length?n.map(function(n){return t.selectorLegend(n)}):null};var f=t.isValue=function(n){return n||n===0},a=t.isFunction=function(n){return typeof n=="function"},o=t.isString=function(n){return typeof n=="string"},c=t.isUndefined=function(n){return typeof n=="undefined"},s=t.isDefined=function(n){return typeof n!="undefined"},p=t.ceil10=function(n){return Math.ceil(n/10)*10},y=t.asHalfPixel=function(n){return Math.ceil(n)+.5},v=t.diffDomain=function(n){return n[1]-n[0]},g=t.isEmpty=function(n){return!n||o(n)&&n.length===0||typeof n=="object"&&Object.keys(n).length===0},h=t.notEmpty=function(n){return Object.keys(n).length>0},e=t.getOption=function(n,t,i){return s(n[t])?n[t]:i},rt=t.hasValue=function(n,t){var i=!1;return Object.keys(n).forEach(function(r){n[r]===t&&(i=!0)}),i},ut=t.getPathBox=function(n){var i=n.getBoundingClientRect(),t=[n.pathSegList.getItem(0),n.pathSegList.getItem(1)],r=t[0].x,u=Math.min(t[0].y,t[1].y);return{x:r,y:u,width:i.width,height:i.height}};r.focus=function(n){var t=this.internal,r;n=t.mapToTargetIds(n);r=t.svg.selectAll(t.selectorTargets(n.filter(t.isTargetToShow,t)));this.revert();this.defocus();r.classed(i.focused,!0).classed(i.defocused,!1);t.hasArcType()&&t.expandArc(n);t.toggleFocusLegend(n,!0);t.focusedTargetIds=n;t.defocusedTargetIds=t.defocusedTargetIds.filter(function(t){return n.indexOf(t)<0})};r.defocus=function(n){var t=this.internal,r;n=t.mapToTargetIds(n);r=t.svg.selectAll(t.selectorTargets(n.filter(t.isTargetToShow,t)));r.classed(i.focused,!1).classed(i.defocused,!0);t.hasArcType()&&t.unexpandArc(n);t.toggleFocusLegend(n,!1);t.focusedTargetIds=t.focusedTargetIds.filter(function(t){return n.indexOf(t)<0});t.defocusedTargetIds=n};r.revert=function(n){var t=this.internal,r;n=t.mapToTargetIds(n);r=t.svg.selectAll(t.selectorTargets(n));r.classed(i.focused,!1).classed(i.defocused,!1);t.hasArcType()&&t.unexpandArc(n);t.config.legend_show&&(t.showLegend(n.filter(t.isLegendToShow.bind(t))),t.legend.selectAll(t.selectorLegends(n)).filter(function(){return t.d3.select(this).classed(i.legendItemFocused)}).classed(i.legendItemFocused,!1));t.focusedTargetIds=[];t.defocusedTargetIds=[]};r.show=function(n,t){var i=this.internal,r;n=i.mapToTargetIds(n);t=t||{};i.removeHiddenTargetIds(n);r=i.svg.selectAll(i.selectorTargets(n));r.transition().style("opacity",1,"important").call(i.endall,function(){r.style("opacity",null).style("opacity",1)});t.withLegend&&i.showLegend(n);i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})};r.hide=function(n,t){var i=this.internal,r;n=i.mapToTargetIds(n);t=t||{};i.addHiddenTargetIds(n);r=i.svg.selectAll(i.selectorTargets(n));r.transition().style("opacity",0,"important").call(i.endall,function(){r.style("opacity",null).style("opacity",0)});t.withLegend&&i.hideLegend(n);i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})};r.toggle=function(n,t){var i=this,r=this.internal;r.mapToTargetIds(n).forEach(function(n){r.isTargetToShow(n)?i.hide(n,t):i.show(n,t)})};r.zoom=function(n){var t=this.internal;return n&&(t.isTimeSeries()&&(n=n.map(function(n){return t.parseDate(n)})),t.brush.extent(n),t.redraw({withUpdateXDomain:!0,withY:t.config.zoom_rescale}),t.config.zoom_onzoom.call(this,t.x.orgDomain())),t.brush.extent()};r.zoom.enable=function(n){var t=this.internal;t.config.zoom_enabled=n;t.updateAndRedraw()};r.unzoom=function(){var n=this.internal;n.brush.clear().update();n.redraw({withUpdateXDomain:!0})};r.load=function(n){var t=this.internal,i=t.config;if(n.xs&&t.addXs(n.xs),"classes"in n&&Object.keys(n.classes).forEach(function(t){i.data_classes[t]=n.classes[t]}),"categories"in n&&t.isCategorized()&&(i.axis_x_categories=n.categories),"axes"in n&&Object.keys(n.axes).forEach(function(t){i.data_axes[t]=n.axes[t]}),"colors"in n&&Object.keys(n.colors).forEach(function(t){i.data_colors[t]=n.colors[t]}),"cacheIds"in n&&t.hasCaches(n.cacheIds)){t.load(t.getCaches(n.cacheIds),n.done);return}"unload"in n?t.unload(t.mapToTargetIds(typeof n.unload=="boolean"&&n.unload?null:n.unload),function(){t.loadFromArgs(n)}):t.loadFromArgs(n)};r.unload=function(n){var t=this.internal;n=n||{};n instanceof Array?n={ids:n}:typeof n=="string"&&(n={ids:[n]});t.unload(t.mapToTargetIds(n.ids),function(){t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0});n.done&&n.done()})};r.flow=function(n){var t=this.internal,i,c,v=[],l=t.getMaxDataCount(),p,a,e,u,o=0,r=0,h,y;if(n.json)c=t.convertJsonToData(n.json,n.keys);else if(n.rows)c=t.convertRowsToData(n.rows);else if(n.columns)c=t.convertColumnsToData(n.columns);else return;i=t.convertDataToTargets(c,!0);t.data.targets.forEach(function(n){for(var e=!1,f,u=0;u<i.length;u++)if(n.id===i[u].id){for(e=!0,n.values[n.values.length-1]&&(r=n.values[n.values.length-1].index+1),o=i[u].values.length,f=0;f<o;f++)i[u].values[f].index=r+f,t.isTimeSeries()||(i[u].values[f].x=r+f);n.values=n.values.concat(i[u].values);i.splice(u,1);break}e||v.push(n.id)});t.data.targets.forEach(function(n){for(var i,u=0;u<v.length;u++)if(n.id===v[u])for(r=n.values[n.values.length-1].index+1,i=0;i<o;i++)n.values.push({id:n.id,index:r+i,x:t.isTimeSeries()?t.getOtherTargetX(r+i):r+i,value:null})});t.data.targets.length&&i.forEach(function(n){for(var u=[],i=t.data.targets[0].values[0].index;i<r;i++)u.push({id:n.id,index:i,x:t.isTimeSeries()?t.getOtherTargetX(i):i,value:null});n.values.forEach(function(n){n.index+=r;t.isTimeSeries()||(n.x+=r)});n.values=u.concat(n.values)});t.data.targets=t.data.targets.concat(i);p=t.getMaxDataCount();e=t.data.targets[0];u=e.values[0];s(n.to)?(o=0,y=t.isTimeSeries()?t.parseDate(n.to):n.to,e.values.forEach(function(n){n.x<y&&o++})):s(n.length)&&(o=n.length);l?l===1&&t.isTimeSeries()&&(h=(e.values[e.values.length-1].x-u.x)/2,a=[new Date(+u.x-h),new Date(+u.x+h)],t.updateXDomain(null,!0,!0,!1,a)):(h=t.isTimeSeries()?e.values.length>1?e.values[e.values.length-1].x-u.x:u.x-t.getXDomain(t.data.targets)[0]:1,a=[u.x-h,u.x],t.updateXDomain(null,!0,!0,!1,a));t.updateTargets(t.data.targets);t.redraw({flow:{index:u.index,length:o,duration:f(n.duration)?n.duration:t.config.transition_duration,done:n.done,orgDataCount:l},withLegend:!0,withTransition:l>1,withTrimXDomain:!1,withUpdateXAxis:!0})};t.generateFlow=function(n){var t=this,u=t.config,r=t.d3;return function(){var ft=n.targets,o=n.flow,et=n.drawBar,ot=n.drawLine,st=n.drawArea,ht=n.cx,ct=n.cy,b=n.xv,lt=n.xForText,at=n.yForText,vt=n.duration,h,d=1,e,c=o.index,l=o.length,a=t.getValueOnIndex(t.data.targets[0].values,c),y=t.getValueOnIndex(t.data.targets[0].values,c+l),p=t.x.domain(),s,yt=o.duration||vt,pt=o.done||function(){},f=t.generateWait(),g=t.xgrid||r.selectAll([]),w=t.xgridLines||r.selectAll([]),k=t.mainRegion||r.selectAll([]),nt=t.mainText||r.selectAll([]),tt=t.mainBar||r.selectAll([]),it=t.mainLine||r.selectAll([]),rt=t.mainArea||r.selectAll([]),ut=t.mainCircle||r.selectAll([]);t.flowing=!0;t.data.targets.forEach(function(n){n.values.splice(0,l)});s=t.updateXDomain(ft,!0,!0);t.updateXGrid&&t.updateXGrid(!0);o.orgDataCount?h=o.orgDataCount===1||a.x===y.x?t.x(p[0])-t.x(s[0]):t.isTimeSeries()?t.x(p[0])-t.x(s[0]):t.x(a.x)-t.x(y.x):t.data.targets[0].values.length!==1?h=t.x(p[0])-t.x(s[0]):t.isTimeSeries()?(a=t.getValueOnIndex(t.data.targets[0].values,0),y=t.getValueOnIndex(t.data.targets[0].values,t.data.targets[0].values.length-1),h=t.x(a.x)-t.x(y.x)):h=v(s)/2;d=v(p)/v(s);e="translate("+h+",0) scale("+d+",1)";t.hideXGridFocus();t.hideTooltip();r.transition().ease("linear").duration(yt).each(function(){f.add(t.axes.x.transition().call(t.xAxis));f.add(tt.transition().attr("transform",e));f.add(it.transition().attr("transform",e));f.add(rt.transition().attr("transform",e));f.add(ut.transition().attr("transform",e));f.add(nt.transition().attr("transform",e));f.add(k.filter(t.isRegionOnX).transition().attr("transform",e));f.add(g.transition().attr("transform",e));f.add(w.transition().attr("transform",e))}).call(f,function(){var n,r=[],f=[],e=[];if(l){for(n=0;n<l;n++)r.push("."+i.shape+"-"+(c+n)),f.push("."+i.text+"-"+(c+n)),e.push("."+i.eventRect+"-"+(c+n));t.svg.selectAll("."+i.shapes).selectAll(r).remove();t.svg.selectAll("."+i.texts).selectAll(f).remove();t.svg.selectAll("."+i.eventRects).selectAll(e).remove();t.svg.select("."+i.xgrid).remove()}g.attr("transform",null).attr(t.xgridAttr);w.attr("transform",null);w.select("line").attr("x1",u.axis_rotated?0:b).attr("x2",u.axis_rotated?t.width:b);w.select("text").attr("x",u.axis_rotated?t.width:0).attr("y",b);tt.attr("transform",null).attr("d",et);it.attr("transform",null).attr("d",ot);rt.attr("transform",null).attr("d",st);ut.attr("transform",null).attr("cx",ht).attr("cy",ct);nt.attr("transform",null).attr("x",lt).attr("y",at).style("fill-opacity",t.opacityForText.bind(t));k.attr("transform",null);k.select("rect").filter(t.isRegionOnX).attr("x",t.regionX.bind(t)).attr("width",t.regionWidth.bind(t));u.interaction_enabled&&t.redrawEventRect();pt();t.flowing=!1})}};r.selected=function(n){var t=this.internal,r=t.d3;return r.merge(t.main.selectAll("."+i.shapes+t.getTargetSelectorSuffix(n)).selectAll("."+i.shape).filter(function(){return r.select(this).classed(i.SELECTED)}).map(function(n){return n.map(function(n){var t=n.__data__;return t.data?t.data:t})}))};r.select=function(n,t,r){var u=this.internal,e=u.d3,f=u.config;f.data_selection_enabled&&u.main.selectAll("."+i.shapes).selectAll("."+i.shape).each(function(o,h){var c=e.select(this),v=o.data?o.data.id:o.id,l=u.getToggle(this,o).bind(u),y=f.data_selection_grouped||!n||n.indexOf(v)>=0,p=!t||t.indexOf(h)>=0,a=c.classed(i.SELECTED);c.classed(i.line)||c.classed(i.area)||(y&&p?f.data_selection_isselectable(o)&&!a&&l(!0,c.classed(i.SELECTED,!0),o,h):s(r)&&r&&a&&l(!1,c.classed(i.SELECTED,!1),o,h))})};r.unselect=function(n,t){var r=this.internal,f=r.d3,u=r.config;u.data_selection_enabled&&r.main.selectAll("."+i.shapes).selectAll("."+i.shape).each(function(e,o){var s=f.select(this),h=e.data?e.data.id:e.id,c=r.getToggle(this,e).bind(r),l=u.data_selection_grouped||!n||n.indexOf(h)>=0,a=!t||t.indexOf(o)>=0,v=s.classed(i.SELECTED);s.classed(i.line)||s.classed(i.area)||l&&a&&u.data_selection_isselectable(e)&&v&&c(!1,s.classed(i.SELECTED,!1),e,o)})};r.transform=function(n,t){var i=this.internal,r=["pie","donut"].indexOf(n)>=0?{withTransform:!0}:null;i.transformTo(t,n,r)};t.transformTo=function(n,t,i){var r=this,f=!r.hasArcType(),u=i||{withTransitionForAxis:f};u.withTransitionForTransform=!1;r.transiting=!1;r.setTargetType(n,t);r.updateTargets(r.data.targets);r.updateAndRedraw(u)};r.groups=function(n){var i=this.internal,t=i.config;return c(n)?t.data_groups:(t.data_groups=n,i.redraw(),t.data_groups)};r.xgrids=function(n){var i=this.internal,t=i.config;return n?(t.grid_x_lines=n,i.redrawWithoutRescale(),t.grid_x_lines):t.grid_x_lines};r.xgrids.add=function(n){var t=this.internal;return this.xgrids(t.config.grid_x_lines.concat(n?n:[]))};r.xgrids.remove=function(n){var t=this.internal;t.removeGridLines(n,!0)};r.ygrids=function(n){var i=this.internal,t=i.config;return n?(t.grid_y_lines=n,i.redrawWithoutRescale(),t.grid_y_lines):t.grid_y_lines};r.ygrids.add=function(n){var t=this.internal;return this.ygrids(t.config.grid_y_lines.concat(n?n:[]))};r.ygrids.remove=function(n){var t=this.internal;t.removeGridLines(n,!1)};r.regions=function(n){var i=this.internal,t=i.config;return n?(t.regions=n,i.redrawWithoutRescale(),t.regions):t.regions};r.regions.add=function(n){var i=this.internal,t=i.config;return n?(t.regions=t.regions.concat(n),i.redrawWithoutRescale(),t.regions):t.regions};r.regions.remove=function(n){var t=this.internal,r=t.config,u,f,e;return n=n||{},u=t.getOption(n,"duration",r.transition_duration),f=t.getOption(n,"classes",[i.region]),e=t.main.select("."+i.regions).selectAll(f.map(function(n){return"."+n})),(u?e.transition().duration(u):e).style("opacity",0).remove(),r.regions=r.regions.filter(function(n){var t=!1;return n["class"]?(n["class"].split(" ").forEach(function(n){f.indexOf(n)>=0&&(t=!0)}),!t):!0}),r.regions};r.data=function(n){var t=this.internal.data.targets;return typeof n=="undefined"?t:t.filter(function(t){return[].concat(n).indexOf(t.id)>=0})};r.data.shown=function(n){return this.internal.filterTargetsToShow(this.data(n))};r.data.values=function(n){var t,i=null;return n&&(t=this.data(n),i=t[0]?t[0].values.map(function(n){return n.value}):null),i};r.data.names=function(n){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",n)};r.data.colors=function(n){return this.internal.updateDataAttributes("colors",n)};r.data.axes=function(n){return this.internal.updateDataAttributes("axes",n)};r.category=function(n,t){var i=this.internal,r=i.config;return arguments.length>1&&(r.axis_x_categories[n]=t,i.redraw()),r.axis_x_categories[n]};r.categories=function(n){var i=this.internal,t=i.config;return arguments.length?(t.axis_x_categories=n,i.redraw(),t.axis_x_categories):t.axis_x_categories};r.color=function(n){var t=this.internal;return t.color(n)};r.x=function(n){var t=this.internal;return arguments.length&&(t.updateTargetX(t.data.targets,n),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs};r.xs=function(n){var t=this.internal;return arguments.length&&(t.updateTargetXs(t.data.targets,n),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs};r.axis=function(){};r.axis.labels=function(n){var t=this.internal;arguments.length&&(Object.keys(n).forEach(function(i){t.axis.setLabelText(i,n[i])}),t.axis.updateLabels())};r.axis.max=function(n){var i=this.internal,t=i.config;if(arguments.length)typeof n=="object"?(f(n.x)&&(t.axis_x_max=n.x),f(n.y)&&(t.axis_y_max=n.y),f(n.y2)&&(t.axis_y2_max=n.y2)):t.axis_y_max=t.axis_y2_max=n,i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});else return{x:t.axis_x_max,y:t.axis_y_max,y2:t.axis_y2_max}};r.axis.min=function(n){var i=this.internal,t=i.config;if(arguments.length)typeof n=="object"?(f(n.x)&&(t.axis_x_min=n.x),f(n.y)&&(t.axis_y_min=n.y),f(n.y2)&&(t.axis_y2_min=n.y2)):t.axis_y_min=t.axis_y2_min=n,i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});else return{x:t.axis_x_min,y:t.axis_y_min,y2:t.axis_y2_min}};r.axis.range=function(n){if(arguments.length)s(n.max)&&this.axis.max(n.max),s(n.min)&&this.axis.min(n.min);else return{max:this.axis.max(),min:this.axis.min()}};r.legend=function(){};r.legend.show=function(n){var t=this.internal;t.showLegend(t.mapToTargetIds(n));t.updateAndRedraw({withLegend:!0})};r.legend.hide=function(n){var t=this.internal;t.hideLegend(t.mapToTargetIds(n));t.updateAndRedraw({withLegend:!0})};r.resize=function(n){var i=this.internal,t=i.config;t.size_width=n?n.width:null;t.size_height=n?n.height:null;this.flush()};r.flush=function(){var n=this.internal;n.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})};r.destroy=function(){var t=this.internal;return n.clearInterval(t.intervalForObserveInserted),n.onresize=null,t.selectChart.classed("c3",!1).html(""),Object.keys(t).forEach(function(n){t[n]=null}),null};r.tooltip=function(){};r.tooltip.show=function(n){var t=this.internal,i,r;n.mouse&&(r=n.mouse);n.data?t.isMultipleX()?(r=[t.x(n.data.x),t.getYScale(n.data.id)(n.data.value)],i=null):i=f(n.data.index)?n.data.index:t.getIndexByX(n.data.x):typeof n.x!="undefined"?i=t.getIndexByX(n.x):typeof n.index!="undefined"&&(i=n.index);t.dispatchEvent("mouseover",i,r);t.dispatchEvent("mousemove",i,r)};r.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0)};t.isSafari=function(){var t=n.navigator.userAgent;return t.indexOf("Safari")>=0&&t.indexOf("Chrome")<0};t.isChrome=function(){var t=n.navigator.userAgent;return t.indexOf("Chrome")>=0};Function.prototype.bind||(Function.prototype.bind=function(n){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var r=Array.prototype.slice.call(arguments,1),u=this,t=function(){},i=function(){return u.apply(this instanceof t?this:n,r.concat(Array.prototype.slice.call(arguments)))};return t.prototype=this.prototype,i.prototype=new t,i});typeof define=="function"&&define.amd?define("c3",["d3"],l):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=l:n.c3=l}(window);